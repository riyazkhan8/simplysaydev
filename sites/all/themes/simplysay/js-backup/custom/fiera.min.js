/*! Fiera.js Copyright 2016, www.homeTLT.ru (Denis Ponomarev <ponomarevtlt@gmail.com>) 2018-04-20 12:01:13 */
var fiera=function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=8)}([function(t,e){t.exports=fabric},function(t,e,i){"use strict";(function(e){function n(t,e){return t.charAt(0).toUpperCase()+(e?t.slice(1):t.slice(1).toLowerCase())}function o(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}var a=i(2);a.object=i(3),a.compile=i(5);var s=function(t,e,i,n){this.initialize(t,e,i,n)};s._getKeyString=function(t){var e="";return t.ctrlKey&&(e+="Ctrl + "),t.altKey&&(e+="Alt + "),t.shiftKey&&(e+="Shift + "),t.key&&(e+=t.key),e},s.makeActions=function(t,e){var i={};for(var n in t){t[n].id=n;var o=this.makeAction(t[n],e);o&&(i[n]=o)}return i},s.makeAction=function(t,e){function i(t,e){if(t.constructor===Function)return t;if(t.constructor===String){var i=!1;return"!"===t[0]&&(t=t.substr(1),i=!0),function(){return this[t].constructor===Function?!!this[t]()^i:!!this[t]^i}}return null}var r,c=t;t.constructor===Function&&(c=t.call(e)),r=c.target&&c.target.constructor===Function?c.target.call(e):c.target||e;var l=c.target,u=c.parent;delete c.parent,delete c.target;var h=a.object.cloneDeep(c);if(c.parent=u,c.target=l,h.parent=u,h.target=r,h.id=o(c.id),h.type||(h.menu?h.type="menu":h.type="button"),h.action||"button"!==h.type&&"key"!==h.type||(h.action=c.id),h.action&&(h.action.constructor===String&&(h.action=r[h.action]),c.args?h._action=h.action.bind(r,c.args):h._action=h.action.bind(r),h.action=function(){h.disabled||h._action.apply(this,arguments)}),c.menu&&c.menu.constructor===Function&&(h.menu=c.menu.bind(r)),c.active&&(h.active=i(c.active).bind(r)),c.visible&&(h.visible=i(c.visible).bind(r)),c.enabled&&(h.enabled=i(c.enabled).bind(r)),!c.value)switch(c.type){case"color":case"text":case"number":case"range":case"label":case"select":case"checkbox":c.value=c.id}if(c.value){var d,f,p;if(c.value.constructor===String){var g="set"+n(c.value,!0),v="get"+n(c.value,!0),m="min"+n(c.value,!0),b="max"+n(c.value,!0),y=function(t){r[g](t)},I=r[v],C=r[m],_=r[b];d=y||(c.args?function(t,e){this[c.value][e]=t}:function(t){this[c.value]=t}),f=I||(c.args?function(t){return this[c.value][t]}:function(){return this[c.value]}),h.value={min:C,max:_}}else d=c.value.set,f=c.value.get,p=c.value.options;void 0!==h.value.min&&h.value.min.constructor===String&&(h.value.min=r[h.value.min]),void 0!==h.value.max&&h.value.max.constructor===String&&(h.value.max=r[h.value.max]),void 0!==h.value.step&&h.value.step.constructor===String&&(h.value.step=r[h.value.step]);var A=h.value.min,w=h.value.max,j=h.value.step;d&&(h.value.set=c.args?d.bind(r,c.args):d.bind(r)),f&&(h.value.get=c.args?f.bind(r,c.args):f.bind(r)),A&&A.constructor===Function&&(h.value.min=c.args?A.bind(r,c.args):A.bind(r)),w&&w.constructor===Function&&(h.value.max=c.args?w.bind(r,c.args):w.bind(r)),j&&j.constructor===Function&&(h.value.step=c.args?j.bind(r,c.args):j.bind(r)),p&&(h.value.options=c.args?p.bind(r,c.args):p.bind(r))}if(c.data&&(h.data=c.data.call(r)),h.menu){if(c.menu.constructor===Function&&(h.menu=c.menu.call(r)),"options"===h.type)for(var x in h.menu)h.menu[x].parent=h,h.menu[x].type="option",h.menu[x].title||(h.menu[x].title=x),h.menu[x].option||(h.menu[x].option=x);for(var x in h.menu)h.menu[x].constructor===String&&(h.menu[x]=h.target._getActionValue(h.menu[x]),h.menu[x].parent=h),h.menu[x].id||(h.menu[x].id=x),h.menu[x]=s.makeAction(h.menu[x],r),h.menu[x]||delete h.menu[x]}return!1!==c.keyboard&&(c.key||c.keyCode||c.shiftKey||c.altKey||c.ctrlKey||c.metaKey)&&(c.key&&1==c.key.length&&(h.ctrlKey=!0),c.keyCode&&c.keyCode.constructor===String&&(h.keyCode=c.keyCode.toUpperCase().charCodeAt(0),h.key=String.fromCharCode(h.keyCode)),h.keyboard=!0),h},s.getButtons=function(t){var e=[];for(var i in t){var n=t[i];n.keyboard&&(n.title+=" ("+s._getKeyString(n)+")",e.push(n)),t.menu&&(e=e.concat(s.getButtons(t.menu)))}return e},s.prototype={initKeys:function(t){this.buttons=s.getButtons(t),this.__keydownHandler=this.handleKeydown.bind(this),$(document).on("keydown",this.__keydownHandler)},handleKeydown:function(t){for(var e in this.buttons){var i=this.buttons[e];i.enabled&&!i.enabled()||(i.disabled||i.disabled||i.disabled||i.hidden||i.keyCode!=t.keyCode&&i.key!=t.key||void 0!==i.ctrlKey&&i.ctrlKey!=t.ctrlKey||void 0!==i.altKey&&i.altKey!=t.altKey||void 0!==i.shiftKey&&i.shiftKey!=t.shiftKey||void 0!==i.metaKey&&i.metaKey!=t.metaKey||(t.preventDefault(),t.stopPropagation(),void 0!==i.option?i.action.call(i.target,i.option,t):i.action.call(i.target,t)))}},tools:{key:{},label:{scope:function(t,e){return{getValue:t.value.get,valueCurrent:t.value.get()}},template:'<div class="object-menu-item object-menu-label" title="{title}">',render:function(t,i,n,o,s){var r=e.util.object.defaults(o.scope.call(this,i,n),i);t.html(i.template.format(i.value.get())),a.compile.compileElement(t,r)}},number:{scope:function(t,e){return{getInputValue:function(){return parseFloat(t.$item.find("input").val())},getValue:t.value.get,setValue:t.value.set,minValue:t.value.min&&t.value.min(),maxValue:t.value.max&&t.value.max(),valueCurrent:t.value.get(),onchange:function(e){t.value.set(parseFloat($(e.target).val()))}}},template:'<div class="object-menu-item object-menu-number" title="{title}"><input type="number" min="{minValue}" max="{maxValue}" value="{valueCurrent}" onchange="onchange(event)">',render:function(t,e,i,n,o){t.find("input").val(e.value.get())}},range:{scope:function(t,e){return{minValue:t.value.min?"function"==typeof t.value.min?t.value.min():t.value.min:0,maxValue:t.value.max?"function"==typeof t.value.max?t.value.max():t.value.max:1,valueStep:t.value.step?"function"==typeof t.value.step?t.value.step():t.value.step:.1,valueCurrent:t.value.get(),onchange:function(e){t.value.set(parseFloat($(e.target).val()))}}},template:'<div class="object-menu-item object-menu-range" title="{title}"><input type="range" step="{valueStep}" min="{minValue}" max="{maxValue}" value="{valueCurrent}" onchange="onchange(event)">',render:function(t,e,i,n,o){t.find("input").val(e.value.get())}},checkbox:{scope:function(t,e){return{onchange:function(e){t.value.set(e.target.checked)},valueCurrent:t.value.get()}},template:'<div class="object-menu-item object-menu-checkbox" title="{title}">\n          <input type="checkbox" onchange="onchange(event)" dp-checked="{valueCurrent}" id="checkbox-{id}">\n          <label for="checkbox-{id}"  class="btn button-{id} {className}">',render:function(t,e,i,n,o){t.find("input").val(o)}},menu:{template:'<div class="object-menu-item object-menu-menu" title="{title}">\n          <label dp-if="title" for="button-{id}">{title}</label>\n          <button class="btn button-menu-trigger button-{id} {className}" id="button-{id}"/>\n          <div class="object-menu submenu" style="display: none;" transclude/>',post:function(t,e,i,n){t.find(".button-menu-trigger").click(function(){t.find(".object-menu").toggle()}),e.hovered&&(t.addClass("hovered"),this.toggleByHover(t,n,null,e)),e.toggled&&(t.addClass("toggled"),this.toggleByButton(t,n)),this.generateMenu(e.target,n,i,e.menu)}},button:{scope:function(t,e){return{buttonsTitle:e.buttons&&e.buttons.title||!1,buttonscClassName:e.buttons&&e.buttons.className||""}},template:'<div class="object-menu-item" title="{title}">\n          <button class="btn button-{id} {className} {buttonscClassName}"  onclick="!disabled && option ? action(option) : action()">\n          <img dp-if="icon" dp-src="icon">\n          <span dp-include="svg" dp-if="svg"></span>\n          <span dp-if="buttonsTitle" class="button-title">{title}</span>'}},initialize:function(t,e,i,n){this.buttons=[],this.options=n||{},e.constructor===String?this.container=$(document.getElementById(e)):this.container=e,this.container&&(this.generateMenu(t,this.container,n,i),this.container.show()),this.initKeys(t.generatedActions)},destroy:function(t){for(var e=this.buttons.length;e--;){var i=this.buttons[e];t&&i.target!=t||this.buttons.splice(e,1)}this.__keydownHandler&&$(document).off("keydown",this.__keydownHandler),this.fire("destroy")},createInput:function(t,e,i){var n=e.target,o=$("<input>").attr("type",i).attr("min",e.value.min()).attr("max",e.value.max());if(o.val(e.value.get()),e.value.observe){var a=function(t){o.val(e.value.get())};n.on(e.value.observe,a),this.on("destroy",function(){n.off(e.value.observe,a)})}o.change(function(t){e.value.set(parseFloat(o.val()))}),t.append(o)},initItem:function(t,e){if(e.active&&e.active.call(e.target,e.option)&&t.addClass("active"),void 0!==e.visible&&(e.visible.constructor==Function?e.visible.call(e.target)||t.hide():e.visible||t.hide()),e.disabled=!1,void 0!==e.enabled&&e.enabled.constructor==Function&&(e.enabled.call(e.target)||(t.attr("disabled",!0),e.disabled=!0)),e.observe&&e.target){if(e.visible&&e.visible.constructor==Function){var i=function(){e.visible.call(e.target)?(t.show(),e.hidden=!1):(t.hide(),e.hidden=!0)};e.observe.constructor===String?e.target&&e.target.on(e.observe,i):e.observe.call(e.target,i)}if("options"==e.type&&e.target&&e.target.on(e.observe,function(){var t=e.value.get();$("[name="+e.id+"]").prop("checked",!1),$("[name="+e.id+"][value="+t+"]").prop("checked",!0)}),e.enabled&&e.enabled.constructor==Function){var n=function(){e.enabled.call(e.target)?(t.removeAttr("disabled"),e.disabled=!1):(t.attr("disabled",!0),e.disabled=!0)};e.enableCallback=n,e.observe.constructor===String?e.target&&e.target.on(e.observe,n):e.observe.call(e.target,n)}e.destroy&&(this.on("destroy",e.destroy.bind(e.target,e)),delete e.enabledCallback)}},toggleByHover:function(t,e,i,n){var o;e.hide(),t.mouseout(function(){e.hide(),o&&o()}),t.mouseover(function(){e.show(),o=i&&i()}),t.click(function(){n&&n.immediately&&n.action()})},toggleByButton:function(t,e,i,n){var o,a=function(i){var n=$(i.target).parents();for(var a in n)if(n[a]===t[0])return!1;"none"!==e.css("display")&&(e.hide(),o&&o())};e.click(function(t){t.stopPropagation()}),e.hide(),t.click(function(){"none"!==e.css("display")?(e.hide(),o&&o(),$(window).off("click",a)):(e.show(),$(window).on("click",a),o=i&&i(),n&&n.immediately&&n.action())})},generateMenuButton:function(t,i,n,o){var r=this;if(o.constructor===String&&(o=t.actions[o]),o.target||(o=s.makeAction(o,t)),o&&(void 0===o.insert||o.insert)){o.type=o.type||"button";var c=this.tools[o.type];if(c){var l=o;if(c.scope&&(l=e.util.object.defaults(c.scope.call(this,o,n),o)),c.template){var u=$(c.template.format(l)),h=u.find("[transclude]");if(l.$item=o.$item=u,o.template&&u.html(o.template.format(o.value.get())),a.compile.compileElement(u,l),o.value&&o.value.observe){var d=function(t){c.post&&c.post.call(r,u,l,n,h.length?h:null),c.render&&c.render.call(r,u,o,n,c,t)};(o.target||t).on(o.value.observe,d)}this.initItem(u,o),c.post&&c.post.call(this,u,l,n,h.length?h:null),i.append(u)}this.fire(o.type+":created",{data:l,options:n,tool:c})}}},generateMenu:function(t,i,n,o){var a=this;n=n||{title:!1},n.buttons=n.buttons||{className:"",title:!1},i.empty(),e.util.object.each(o,function(e){a.generateMenuButton(t,i,n,e)})}},a.observable(s.prototype),s.single=function(t,e){t.$item=e,t.type=t.type||"button";var i=s.prototype.tools[t.type];if(s.prototype.initItem(e,t),t.value&&t.value.observe&&t.target.on(t.value.observe,function(n){i.render(e,t,{},i,n)}),i.post){var n=e.find("[transclude]");i.post.call(s.prototype,e,t,{},n.length?n:null)}var o=t;i.scope&&(o=_.defaults(t,i.scope.call(s.prototype,t,{}))),e.eachSelf("*",function(){for(var t,e=[],i=[],n=0,a=this.attributes,s=a.length;n<s;n++)t=a[n],e.push(t.nodeName),i.push(t.nodeValue),this.setAttribute(t.nodeName,t.nodeValue.format(o))}),a.compile.compileElement(e,o)},t.exports=s}).call(e,i(0))},function(t,e,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o={Utf8ArrayToStr:function(t){var e,i,n,o,a,s;for(e="",n=t.length,i=0;i<n;)switch((o=t[i++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:e+=String.fromCharCode(o);break;case 12:case 13:a=t[i++],e+=String.fromCharCode((31&o)<<6|63&a);break;case 14:a=t[i++],s=t[i++],e+=String.fromCharCode((15&o)<<12|(63&a)<<6|(63&s)<<0)}return e},dataURItoBlob:function(t,e){for(var i=atob(t.split(",")[1]),n=[],o=0;o<i.length;o++)n.push(i.charCodeAt(o));return new Blob([new Uint8Array(n)],{type:e})},blobToDataURL:function(t,e){var i=new FileReader;i.onload=function(t){e(t.target.result)},i.readAsDataURL(t)},worker:function(t){if(window.Worker){var e=""+t;e="onmessage=function("+e.substring(e.indexOf("(")+1,e.indexOf(","))+"){"+e.substring(e.indexOf(",")+1,e.indexOf(")"))+"= postMessage;"+e.substring(e.indexOf("{")+1);var i=new Blob([e]),n=window.URL.createObjectURL(i);return new Worker(n)}var o={terminate:function(){},postMessage:function(e){setTimeout(function(){t({data:e},function(t){o.onmessage&&o.onmessage({data:t})})})}};return o},observable:function(t){t.fire=function(t,e){if(this.__eventListeners){var i=this.__eventListeners[t];if(i){for(var n=0,o=i.length;n<o;n++)i[n].call(this,e||{});return this}}},t.on=function(t,e){if(t.constructor==Object){for(var i in t)this.on(i,t[i]);return this}var n=t.split(" ");for(var i in n)this.observe(n[i],e);return this},t.observe=function(t,e){if(this.__eventListeners||(this.__eventListeners={}),1===arguments.length)for(var i in t)this.on(i,t[i]);else this.__eventListeners[t]||(this.__eventListeners[t]=[]),this.__eventListeners[t].push(e);return this},t.off=function(t,e){function i(t,e){if(this.__eventListeners[t])if(e){var i=this.__eventListeners[t].indexOf(e);-1!==i&&this.__eventListeners[t].splice(i,1)}else this.__eventListeners[t].length=0}if(this.__eventListeners){if(0===arguments.length)this.__eventListeners={};else if(1===arguments.length&&"object"===n(arguments[0]))for(var o in t)i.call(this,o,t[o]);else i.call(this,t,e);return this}}},order:function(t,e){!function i(){if(t.length){var n=t.shift();n?n.length?n.call(e,i):(n.call(e),i()):i()}}()},inOrder:function(t,e,i){function n(){++o<t.length?e(t[o],o,n):i&&i()}var o=0;e(t[o],o,n)},queryString:function(t){t=t?t.substr(t.indexOf("?")+1):window.location.search.substring(1);var e={},i=0;if(!t)return e;for(var n=t.split("&"),o=0;o<n.length;o++){var a=n[o].split("="),s=a[0],r=a[1];if(void 0===e[s])e[s]=r||"",Object.defineProperty(e,i,{value:s,enumerable:!1}),i++;else if("string"==typeof e[s]){var c=[e[s],r];e[s]=c,Object.defineProperty(e,i,{value:s,enumerable:!1}),i++}else e[s].push(r),Object.defineProperty(e,i,{value:s,enumerable:!1}),i++}return Object.defineProperty(e,"length",{value:i,enumerable:!1}),e},splitBy:function(t,e){var i=[],n=0,o=0,a=0;if(""==t)return[];for(var s=0;s<t.length;s++){var r=t[s];"("==r?(n++,o=1):")"==r&&n--,0==n&&1==o&&(o=0),-1!=e.indexOf(r)&&0==n&&0==o&&(i.push(t.substring(a,s)),a=s+1)}return i.push(t.substring(a)),i},queueLoad:function(t,e,i){var n=function t(e){t.loaded.push(e),t.progressCB&&t.progressCB(t.loaded.length,t.total,e,t.loaded),t.loaded.length==t.total&&(t.completeCB&&t.completeCB(t.loaded),t.fire("loaded"))};return n.completeCB=e,n.progressCB=i,n.total=t,n.loaded=[],o.observable(n),n}};t.exports=o},function(t,e,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=i(11),a={extendArraysObject:function(t,e){var i={};for(var n in t)t[n].constructor==Array?i[n]=[].concat(t[n]):i[n]=[t[n]];for(var n in e)i[n]?i[n].push(e[n]):i[n]=[e[n]];return i},filterValues:function(t,e){var i=[];for(var n in t){var o={};for(var a in e)o[e[a]]=t[n][e[a]];i.push(o)}return i},shuffle:function(t){if(t.length){for(var e=t.length;--e;){var i=Math.floor(Math.random()*(e+1)),n=t[e];t[e]=t[i],t[i]=n}return t}},deepExtend:function(){if(arguments.length<1||"object"!==n(arguments[0]))return!1;if(arguments.length<2)return arguments[0];var t,e,i,o,s=arguments[0],r=Array.prototype.slice.call(arguments,1);return r.forEach(function(r){if("object"===(void 0===r?"undefined":n(r)))for(t in r)t in r&&(i=s[t],e=a.cloneDeep(r[t]),"object"!==(void 0===i?"undefined":n(i))||null===i?s[t]=e:Array.isArray(e)?(o=Array.isArray(i)?i:[],e.forEach(function(t){o.push(a.cloneDeep(t))}),s[t]=o):(o=Array.isArray(i)?{}:i,s[t]=a.deepExtend(o,e)))}),s},cloneDeep:function(t){if(void 0!==t){if(null===t)return null;if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return RegExp(t);if(t.cloneSync)return t.cloneSync();if(t.constructor==Object)return a.deepExtend({},t);if(t.constructor==Array){for(var e=[],i=0;i<t.length;i++)e.push(a.cloneDeep(t[i]));return e}return t}},rearrange:function(t,e){var i={};for(var n in e)void 0!==t[e[n]]&&(i[e[n]]=t[e[n]]);return i},copyValue:function(t){if(null==t)return null;if(void 0!=t)switch(t.constructor){case Object:return a.deepExtend({},t);case Array:return a.deepExtend([],t);case String:case Number:case Boolean:return t;default:return a.deepExtend({},t)}},clearValue:function(t){switch(t.constructor){case Object:for(var e in t)delete t[e];break;case Array:t.length=0}},difference:function(t,e){var i={};for(var s in e)if(!t||t[s]!==e[s])if("object"==n(e[s])){var r=a.difference(t[s],e[s]);o.isEmpty(r)||(i[s]=r)}else i[s]=e[s];return i},clone:function(t,e){return e?a.cloneDeep(t):a.extend({},t)}};o.defaults(a,o),t.exports=a},function(t,e,i){"use strict";t.exports={resolve:function(t){for(var e=t.split("/"),i=0,n=e.length;n-- >0;)if(".."==e[n])i++;else for(;i>0;)e.splice(n,1),e.splice(n--,1),i--;return e.join("/")},getParentDirectoryUrl:function(t){return t.substr(0,t.lastIndexOf("/")+1)}}},function(module,exports,__webpack_require__){"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};String.prototype.format=function(){var t=""+this;if(arguments.length){var e=_typeof(arguments[0]),i="string"==e||"number"==e?Array.prototype.slice.call(arguments):arguments[0];t=t.replace(/\{([^}]*)\}/g,function(t,e){return utils.evalInContext(e,i)})}return t};var utils={extractVariables:function(t){return t.match(/(?!(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$)[$A-Z\_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc][$A-Z\_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc0-9\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19b0-\u19c0\u19c8\u19c9\u19d0-\u19d9\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1dc0-\u1de6\u1dfc-\u1dff\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f1\ua900-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]*/gi)},evalInContext:function evalInContext(js){js=js.replace(/\s+/g,"");for(var keys=[],values=[],i=1;i<arguments.length;i++){keys=keys.concat(Object.keys(arguments[i]));for(var j in arguments[i])values.push(arguments[i][j])}var arr=utils.extractVariables(js);for(var i in arr)-1===keys.indexOf(arr[i])&&(keys.push(arr[i]),values.push(void 0));js="var foo = function("+keys.join(",")+"){ var __return__value = "+js+" ;return __return__value;}; foo;";try{var foo=eval(js);return foo.apply(this,values)}catch(t){return}},compileElement:function(t,e){function i(t,e,i){t.find(e).each(i),t.is(e)&&i.call(t[0])}i(t,"[onclick]",function(){var t=$(this).attr("onclick");$(this).removeAttr("onclick"),$(this).click(function(i){utils.evalInContext(t,e,{event:i})})}),i(t,"[onchange]",function(){var t=$(this).attr("onchange");$(this).removeAttr("onchange"),$(this).change(function(i){utils.evalInContext(t,e,{event:i})})}),i(t,"[dp-checked]",function(){var t=$(this).attr("dp-checked");utils.evalInContext(t,e)?$(this).attr("checked","checked"):$(this).removeAttr("checked")}),i(t,"[dp-src]",function(){var t=$(this).attr("dp-src"),i=utils.evalInContext(t,e);i&&$(this).attr("src",i)}),i(t,"[dp-if]",function(){var t=$(this).attr("dp-if");if("false"===t&&$(this).remove(),"true"===t);else{utils.evalInContext(t,e)||$(this).remove()}}),i(t,"[dp-include]",function(){var t=$(this),i=t.attr("dp-include"),n=utils.evalInContext(i,e);t.load(n)})},parseTemplate:function(t,e){var i=$(t.format(e));return _.compileElement(i,e),i}};module.exports=utils},function(t,e,i){"use strict";(function(t){t.util.object.extend(t.Canvas.prototype,{_setSVGObject:function(e,i,n){var o=e.push(i.toSVG(n));if(i._clipTo){var a="Clipped"+t.Object.__uid++;o='<clipPath id="'+a+'">\n                    '+i._clipTo.toSVG(n)+'\n                </clipPath>\n                <g clip-path="url(#'+a+')">'+o+"</g>"}return n?n(o):o},_fabric_clip_function:function(t){var e=this.clipRect;t.save(),e.render(t),t.restore()}}),t.util.object.extend(t.Object.prototype,{setClipTo:function(e){if(this.clipTo=e,delete this._clipTo,this.clipTo){"string"!=typeof e&&(this._clipTo=e,this.clipTo=e.id);var i=t.util.getFunctionBody(e);void 0!==i&&(this._clipTo=Function("ctx",i))}},_initClipping:function(e){if(e._clipTo){var i=t.util.getFunctionBody(e.clipTo);void 0!==i&&(this._clipTo=Function("ctx",i))}}}),t.util.clipContext=function(t,e){if(!t._clipTo)if("canvas"===t.clipTo){var i=t.canvas,n=i.originalWidth||i.width,o=i.originalHeight||i.height,a=i.offsets;i.getZoom();e.rect(a.left,a.top,n-a.left-a.right,o-a.top-a.bottom)}else{var s=t.clipTo.substring(1),r=t.canvas.getObjectByID(s);if(!r)return void delete t.clipTo;t._clipTo=r}t._clipTo.constructor===Function?t._clipTo(e):(e.save(),e.transform.apply(e,t.canvas.viewportTransform),t._clipTo.transform(e),t._clipTo._render(e),e.restore(),e.clip())},t.util._clipToObject=function(t,e){}}).call(e,i(0))},function(t,e){t.exports=$},function(t,e,i){"use strict";(function(e){i(9),i(18),i(19),i(20),i(21),i(23),i(24),i(25),i(26),i(27),i(28),i(29),i(30),i(31),i(32),i(33),i(34),i(35),i(36),i(37),i(38),i(39),i(40),i(41),i(42),i(43),i(45),i(46),i(47),i(48),i(51),i(53),i(54),i(55),i(56),i(57),i(58),i(60),i(62),e.isLikelyNode||(i(63),i(65),i(67),e.media={error:"data:image/svg+xml;base64,"+i(76)}),t.exports=e}).call(e,i(0))},function(t,e,i){"use strict";(function(t){t.util.data=i(10),t.util.path=i(4),t.util.compile=i(5),t.util.loader=i(13),t.util.syntax=i(14),t.util.promise=i(15),i(16),i(17),t.util.object.extend(t.util,i(2))}).call(e,i(0))},function(t,e,i){"use strict";function n(){return!("undefined"!=typeof window&&window.document)}function o(t,e,i){function n(t){l.recoursive(t,function(t,e,i){if(/^url\(.*\)$/.test(e)){var n=/^url\((\.?\/)?(.*)\)$/.exec(e),o=n[2];"/"==n[1]&&(o=window.APP_STATIC_PATH+o),"./"==n[1]&&(o=a.getParentDirectoryUrl(h)+o),i[t]=a.resolve(o)}});var n=s.queueLoad(1,function(){if(f)for(var n=f.split("/"),o=0;o<n.length;o++)t=t[n[o]];u.length?i&&i(u):(e&&e(t),c=t)});l.recoursive(t,function(t,e,i){if(/^\/\/.*$/.test(e)||/^@comment\(.*\)$/.test(e)||"@comment"==t)i.constructor==Array?i.splice(t,1):delete i[t];else if(/^@extend.*$/.test(t))n.total++,o(e,function(t){var e=r.deepExtend(t,i);r.deepExtend(i,e),delete i["@extend"],n()},function(t,e){u.push(e),n()});else if(/^@extend\(.*\)$/.test(e)){var s=/^@extend\((\.\/)?(.*)\)$/.exec(e),c=s[2];s[1]&&(c=a.getParentDirectoryUrl(h)+c),n.total++,o(c,function(e){i[t]=e,n()},function(t,e){u.push(e),n()})}else if(/^@mixin\(.*\)$/.test(e)){var s=/^@mixin\((\.\/)?(.*)\)$/.exec(e),c=s[2];s[1]&&(c=a.getParentDirectoryUrl(h)+c),n.total++,o(c,function(e){if(i.constructor==Array){i.splice(t,1);for(var o in e)i.push(e[o])}else{delete i[t];for(var o in e)i[o]=e[o]}n()},function(t,e){u.push(e),n()})}else if(/^@load\((.*)\)$/.test(e)){var s=/^@load\((\.?\/)?(.*)\)$/.exec(e),c=s[2];"/"==s[1]&&(c=window.APP_STATIC_PATH+c),"./"==s[1]&&(c=a.getParentDirectoryUrl(h)+c),n.total++,l.getInlineJson(c,"html",function(e){i[t]=e,n()},function(t,e){u.push(e),n()})}}),n()}var c=null,u=[];if(t.constructor==String){var h,d,f;d=/^([^#]*)#?(.*)$/.exec(t),h=d[1],f=d[2],l.getInlineJson(h,"json",n,function(t){u.push(t),i&&i(t)})}else n(t);return c}var a=i(4),s=i(2),r=i(3);if(n())var c=i(12);var l={CACHED_JSON:{},loadJsonSync:function(t){var e;return o(t,function(t){e=t}),e},loadJson:function(t,e,i){return o(t,function(t){e&&e(t)},function(t){i&&i(t)})},removeComments:function(t){return t=t.replace(/^\s*(\/\/.*|(?:\/\*[\s\S]*?)\*\/\s*)$/gm,"")},recoursive:function(t,e){var i=[];if(t)return function t(n){if(-1==i.indexOf(n))if(i.push(n),n instanceof Array)for(var o=n.length;o--;)if(!n[o]||n[o].constructor!=Object&&n[o].constructor!=Array){e(o,n[o],n)}else t(n[o]);else for(var o in n)if(!n[o]||n[o].constructor!=Object&&n[o].constructor!=Array){e(o,n[o],n)}else t(n[o])}(t)},parseCSV:function(t){var e=t.split(/\n/),i=e[0].split(",");e.splice(0,1);for(var n=0;n<e.length;n++){for(var o={},a=[],s=!1,r=-1,c=-1,l=e[n];++c<l.length;)if(s)l[c]==s&&(s=!1);else if("'"!=l[c]&&'"'!=l[c]||(s=l[c]),","==l[c]){var u=l.substring(r,c);'"'==u[0]&&'"'==u[u.length-1]&&(u=u.substring(1,u.length-1)),a.push(u),r=c+1}for(var c in a)o[i[c]]=a[c];e[n]=o}return e},doubleQuote:function(t){var e=/({|,)(?:\s*)(?:')?([A-Za-z_$\.][A-Za-z0-9_ \-\.$]*)(?:')?(?:\s*):/g;return t.replace(e,'$1"$2":')},parseData:function(t,e){var i;if("csv"==e)i=l.parseCSV(t);else if("json"==e){i=t.trim(),i=l.removeComments(i),i=l.doubleQuote(i);try{var i=JSON.parse(i)}catch(e){return{status:"error",message:""+e,data:t}}}return{status:"success",data:i}},load:function(t,e,i,o){if(n())try{var a=c.readFileSync(t,"utf8");a=a.replace(/^\uFEFF/,"");var s=l.parseData(a,e);if("error"==s.status)return void o({status:"error",message:s.message,data:s.data});i(s.data)}catch(t){if("ENOENT"!==t.code)throw t;o(a)}else{var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4===r.readyState)if(200===r.status){var n=r.responseText,a=l.parseData(n,e);if("error"==a.status)return void o({status:r.status,message:a.message,response:r.responseText});i(a.data)}else o(t,r)},r.open("GET",t),r.send()}},getInlineJson:function(t,e,i,n){if(e.constructor!=String&&(n=i,i=e,e="json"),void 0!==l.CACHED_JSON&&l.CACHED_JSON&&l.CACHED_JSON[t])return void i(l.CACHED_JSON[t]);if("undefined"!=typeof $&&"undefined"!=typeof document){var o=$("script[id='"+t+"']");if(o.length>0){var a=o[0].innerText||o[0].textContent||o[0].text;if("json"==e){var a=l.removeComments(a);i(JSON.parse(a))}else i(a);return}}l.load(t,e,i,n)}};t.exports=l},function(t,e,i){"use strict";function n(t){function e(e,i,n,o,a,s){for(;a>=0&&a<s;a+=t){var r=o?o[a]:a;n=i(n,e[r],r,e)}return n}return function(i,n,o,a){n=C(n,a,4);var s=!M(i)&&I.keys(i),r=(s||i).length,c=t>0?0:r-1;return arguments.length<3&&(o=i[s?s[c]:c],c+=t),e(i,n,o,s,c,r)}}function o(t){return function(e,i,n){i=_(i,n);for(var o=S(e),a=t>0?0:o-1;a>=0&&a<o;a+=t)if(i(e[a],a,e))return a;return-1}}function a(t,e,i){return function(n,o,a){var s=0,r=S(n);if("number"==typeof a)t>0?s=a>=0?a:Math.max(a+r,s):r=a>=0?Math.min(a+1,r):a+r+1;else if(i&&a&&r)return a=i(n,o),n[a]===o?a:-1;if(o!==o)return a=e(d.call(n,s,r),I.isNaN),a>=0?a+s:-1;for(a=t>0?s:r-1;a>=0&&a<r;a+=t)if(n[a]===o)return a;return-1}}function s(t,e){var i=E.length,n=t.constructor,o=I.isFunction(n)&&n.prototype||l,a="constructor";for(I.has(t,a)&&!I.contains(e,a)&&e.push(a);i--;)(a=E[i])in t&&t[a]!==o[a]&&!I.contains(e,a)&&e.push(a)}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c=Array.prototype,l=Object.prototype,u=Function.prototype,h=c.push,d=c.slice,f=l.toString,p=l.hasOwnProperty,g=Array.isArray,v=Object.keys,m=u.bind,b=Object.create,y=function(){},I=function t(e){return e instanceof t?e:this instanceof t?void(this._wrapped=e):new t(e)};I.VERSION="1.8.3";var C=function(t,e,i){if(void 0===e)return t;switch(null==i?3:i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,o){return t.call(e,i,n,o)};case 4:return function(i,n,o,a){return t.call(e,i,n,o,a)}}return function(){return t.apply(e,arguments)}},_=function(t,e,i){return null==t?I.identity:I.isFunction(t)?C(t,e,i):I.isObject(t)?I.matcher(t):I.property(t)};I.iteratee=function(t,e){return _(t,e,1/0)};var A=function(t,e){return function(i){var n=arguments.length;if(n<2||null==i)return i;for(var o=1;o<n;o++)for(var a=arguments[o],s=t(a),r=s.length,c=0;c<r;c++){var l=s[c];e&&void 0!==i[l]||(i[l]=a[l])}return i}},w=function(t){if(!I.isObject(t))return{};if(b)return b(t);y.prototype=t;var e=new y;return y.prototype=null,e},j=function(t){return function(e){return null==e?void 0:e[t]}},x=Math.pow(2,53)-1,S=j("length"),M=function(t){var e=S(t);return"number"==typeof e&&e>=0&&e<=x};I.each=I.forEach=function(t,e,i){e=C(e,i);var n,o;if(M(t))for(n=0,o=t.length;n<o;n++)e(t[n],n,t);else{var a=I.keys(t);for(n=0,o=a.length;n<o;n++)e(t[a[n]],a[n],t)}return t},I.map=I.collect=function(t,e,i){e=_(e,i);for(var n=!M(t)&&I.keys(t),o=(n||t).length,a=Array(o),s=0;s<o;s++){var r=n?n[s]:s;a[s]=e(t[r],r,t)}return a},I.reduce=I.foldl=I.inject=n(1),I.reduceRight=I.foldr=n(-1),I.find=I.detect=function(t,e,i){var n;if(void 0!==(n=M(t)?I.findIndex(t,e,i):I.findKey(t,e,i))&&-1!==n)return t[n]},I.filter=I.select=function(t,e,i){var n=[];return e=_(e,i),I.each(t,function(t,i,o){e(t,i,o)&&n.push(t)}),n},I.reject=function(t,e,i){return I.filter(t,I.negate(_(e)),i)},I.every=I.all=function(t,e,i){e=_(e,i);for(var n=!M(t)&&I.keys(t),o=(n||t).length,a=0;a<o;a++){var s=n?n[a]:a;if(!e(t[s],s,t))return!1}return!0},I.some=I.any=function(t,e,i){e=_(e,i);for(var n=!M(t)&&I.keys(t),o=(n||t).length,a=0;a<o;a++){var s=n?n[a]:a;if(e(t[s],s,t))return!0}return!1},I.contains=I.includes=I.include=function(t,e,i,n){return M(t)||(t=I.values(t)),("number"!=typeof i||n)&&(i=0),I.indexOf(t,e,i)>=0},I.invoke=function(t,e){var i=d.call(arguments,2),n=I.isFunction(e);return I.map(t,function(t){var o=n?e:t[e];return null==o?o:o.apply(t,i)})},I.pluck=function(t,e){return I.map(t,I.property(e))},I.where=function(t,e){return I.filter(t,I.matcher(e))},I.findWhere=function(t,e){return I.find(t,I.matcher(e))},I.max=function(t,e,i){var n,o,a=-1/0,s=-1/0;if(null==e&&null!=t){t=M(t)?t:I.values(t);for(var r=0,c=t.length;r<c;r++)(n=t[r])>a&&(a=n)}else e=_(e,i),I.each(t,function(t,i,n){((o=e(t,i,n))>s||o===-1/0&&a===-1/0)&&(a=t,s=o)});return a},I.min=function(t,e,i){var n,o,a=1/0,s=1/0;if(null==e&&null!=t){t=M(t)?t:I.values(t);for(var r=0,c=t.length;r<c;r++)(n=t[r])<a&&(a=n)}else e=_(e,i),I.each(t,function(t,i,n){((o=e(t,i,n))<s||o===1/0&&a===1/0)&&(a=t,s=o)});return a},I.shuffle=function(t){for(var e,i=M(t)?t:I.values(t),n=i.length,o=Array(n),a=0;a<n;a++)e=I.random(0,a),e!==a&&(o[a]=o[e]),o[e]=i[a];return o},I.sample=function(t,e,i){return null==e||i?(M(t)||(t=I.values(t)),t[I.random(t.length-1)]):I.shuffle(t).slice(0,Math.max(0,e))},I.sortBy=function(t,e,i){return e=_(e,i),I.pluck(I.map(t,function(t,i,n){return{value:t,index:i,criteria:e(t,i,n)}}).sort(function(t,e){var i=t.criteria,n=e.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(i<n||void 0===n)return-1}return t.index-e.index}),"value")};var T=function(t){return function(e,i,n){var o={};return i=_(i,n),I.each(e,function(n,a){var s=i(n,a,e);t(o,n,s)}),o}};I.groupBy=T(function(t,e,i){I.has(t,i)?t[i].push(e):t[i]=[e]}),I.indexBy=T(function(t,e,i){t[i]=e}),I.countBy=T(function(t,e,i){I.has(t,i)?t[i]++:t[i]=1}),I.toArray=function(t){return t?I.isArray(t)?d.call(t):M(t)?I.map(t,I.identity):I.values(t):[]},I.size=function(t){return null==t?0:M(t)?t.length:I.keys(t).length},I.partition=function(t,e,i){e=_(e,i);var n=[],o=[];return I.each(t,function(t,i,a){(e(t,i,a)?n:o).push(t)}),[n,o]},I.first=I.head=I.take=function(t,e,i){if(null!=t)return null==e||i?t[0]:I.initial(t,t.length-e)},I.initial=function(t,e,i){return d.call(t,0,Math.max(0,t.length-(null==e||i?1:e)))},I.last=function(t,e,i){if(null!=t)return null==e||i?t[t.length-1]:I.rest(t,Math.max(0,t.length-e))},I.rest=I.tail=I.drop=function(t,e,i){return d.call(t,null==e||i?1:e)},I.compact=function(t){return I.filter(t,I.identity)};var O=function t(e,i,n,o){for(var a=[],s=0,r=o||0,c=S(e);r<c;r++){var l=e[r];if(M(l)&&(I.isArray(l)||I.isArguments(l))){i||(l=t(l,i,n));var u=0,h=l.length;for(a.length+=h;u<h;)a[s++]=l[u++]}else n||(a[s++]=l)}return a};I.flatten=function(t,e){return O(t,e,!1)},I.without=function(t){return I.difference(t,d.call(arguments,1))},I.uniq=I.unique=function(t,e,i,n){I.isBoolean(e)||(n=i,i=e,e=!1),null!=i&&(i=_(i,n));for(var o=[],a=[],s=0,r=S(t);s<r;s++){var c=t[s],l=i?i(c,s,t):c;e?(s&&a===l||o.push(c),a=l):i?I.contains(a,l)||(a.push(l),o.push(c)):I.contains(o,c)||o.push(c)}return o},I.union=function(){return I.uniq(O(arguments,!0,!0))},I.intersection=function(t){for(var e=[],i=arguments.length,n=0,o=S(t);n<o;n++){var a=t[n];if(!I.contains(e,a)){for(var s=1;s<i&&I.contains(arguments[s],a);s++);s===i&&e.push(a)}}return e},I.difference=function(t){var e=O(arguments,!0,!0,1);return I.filter(t,function(t){return!I.contains(e,t)})},I.zip=function(){return I.unzip(arguments)},I.unzip=function(t){for(var e=t&&I.max(t,S).length||0,i=Array(e),n=0;n<e;n++)i[n]=I.pluck(t,n);return i},I.object=function(t,e){for(var i={},n=0,o=S(t);n<o;n++)e?i[t[n]]=e[n]:i[t[n][0]]=t[n][1];return i},I.findIndex=o(1),I.findLastIndex=o(-1),I.sortedIndex=function(t,e,i,n){i=_(i,n,1);for(var o=i(e),a=0,s=S(t);a<s;){var r=Math.floor((a+s)/2);i(t[r])<o?a=r+1:s=r}return a},I.indexOf=a(1,I.findIndex,I.sortedIndex),I.lastIndexOf=a(-1,I.findLastIndex),I.range=function(t,e,i){null==e&&(e=t||0,t=0),i=i||1;for(var n=Math.max(Math.ceil((e-t)/i),0),o=Array(n),a=0;a<n;a++,t+=i)o[a]=t;return o};var k=function(t,e,i,n,o){if(!(n instanceof e))return t.apply(i,o);var a=w(t.prototype),s=t.apply(a,o);return I.isObject(s)?s:a};I.bind=function(t,e){if(m&&t.bind===m)return m.apply(t,d.call(arguments,1));if(!I.isFunction(t))throw new TypeError("Bind must be called on a function");var i=d.call(arguments,2);return function n(){return k(t,n,e,this,i.concat(d.call(arguments)))}},I.partial=function(t){var e=d.call(arguments,1);return function i(){for(var n=0,o=e.length,a=Array(o),s=0;s<o;s++)a[s]=e[s]===I?arguments[n++]:e[s];for(;n<arguments.length;)a.push(arguments[n++]);return k(t,i,this,this,a)}},I.bindAll=function(t){var e,i,n=arguments.length;if(n<=1)throw Error("bindAll must be passed function names");for(e=1;e<n;e++)i=arguments[e],t[i]=I.bind(t[i],t);return t},I.memoize=function(t,e){var i=function i(n){var o=i.cache,a=""+(e?e.apply(this,arguments):n);return I.has(o,a)||(o[a]=t.apply(this,arguments)),o[a]};return i.cache={},i},I.delay=function(t,e){var i=d.call(arguments,2);return setTimeout(function(){return t.apply(null,i)},e)},I.defer=I.partial(I.delay,I,1),I.throttle=function(t,e,i){var n,o,a,s=null,r=0;i||(i={});var c=function(){r=!1===i.leading?0:I.now(),s=null,a=t.apply(n,o),s||(n=o=null)};return function(){var l=I.now();r||!1!==i.leading||(r=l);var u=e-(l-r);return n=this,o=arguments,u<=0||u>e?(s&&(clearTimeout(s),s=null),r=l,a=t.apply(n,o),s||(n=o=null)):s||!1===i.trailing||(s=setTimeout(c,u)),a}},I.debounce=function(t,e,i){var n,o,a,s,r,c=function c(){var l=I.now()-s;l<e&&l>=0?n=setTimeout(c,e-l):(n=null,i||(r=t.apply(a,o),n||(a=o=null)))};return function(){a=this,o=arguments,s=I.now();var l=i&&!n;return n||(n=setTimeout(c,e)),l&&(r=t.apply(a,o),a=o=null),r}},I.wrap=function(t,e){return I.partial(e,t)},I.negate=function(t){return function(){return!t.apply(this,arguments)}},I.compose=function(){var t=arguments,e=t.length-1;return function(){for(var i=e,n=t[e].apply(this,arguments);i--;)n=t[i].call(this,n);return n}},I.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},I.before=function(t,e){var i;return function(){return--t>0&&(i=e.apply(this,arguments)),t<=1&&(e=null),i}},I.once=I.partial(I.before,2);var L=!{toString:null}.propertyIsEnumerable("toString"),E=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];I.keys=function(t){if(!I.isObject(t))return[];if(v)return v(t);var e=[];for(var i in t)I.has(t,i)&&e.push(i);return L&&s(t,e),e},I.allKeys=function(t){if(!I.isObject(t))return[];var e=[];for(var i in t)e.push(i);return L&&s(t,e),e},I.values=function(t){for(var e=I.keys(t),i=e.length,n=Array(i),o=0;o<i;o++)n[o]=t[e[o]];return n},I.mapObject=function(t,e,i){e=_(e,i);for(var n,o=I.keys(t),a=o.length,s={},r=0;r<a;r++)n=o[r],s[n]=e(t[n],n,t);return s},I.pairs=function(t){for(var e=I.keys(t),i=e.length,n=Array(i),o=0;o<i;o++)n[o]=[e[o],t[e[o]]];return n},I.invert=function(t){for(var e={},i=I.keys(t),n=0,o=i.length;n<o;n++)e[t[i[n]]]=i[n];return e},I.functions=I.methods=function(t){var e=[];for(var i in t)I.isFunction(t[i])&&e.push(i);return e.sort()},I.extend=A(I.allKeys),I.extendOwn=I.assign=A(I.keys),I.findKey=function(t,e,i){e=_(e,i);for(var n,o=I.keys(t),a=0,s=o.length;a<s;a++)if(n=o[a],e(t[n],n,t))return n},I.pick=function(t,e,i){var n,o,a={},s=t;if(null==s)return a;I.isFunction(e)?(o=I.allKeys(s),n=C(e,i)):(o=O(arguments,!1,!1,1),n=function(t,e,i){return e in i},s=Object(s));for(var r=0,c=o.length;r<c;r++){var l=o[r],u=s[l];n(u,l,s)&&(a[l]=u)}return a},I.omit=function(t,e,i){if(I.isFunction(e))e=I.negate(e);else{var n=I.map(O(arguments,!1,!1,1),String);e=function(t,e){return!I.contains(n,e)}}return I.pick(t,e,i)},I.defaults=A(I.allKeys,!0),I.allKeys=function(t){if(!I.isObject(t))return[];var e=[];for(var i in t)e.push(i);return L&&s(t,e),e};var A=function(t,e){return function(i){var n=arguments.length;if(n<2||null==i)return i;for(var o=1;o<n;o++)for(var a=arguments[o],s=t(a),r=s.length,c=0;c<r;c++){var l=s[c];e&&void 0!==i[l]||(i[l]=a[l])}return i}};I.create=function(t,e){var i=w(t);return e&&I.extendOwn(i,e),i},I.clone=function(t){return I.isObject(t)?I.isArray(t)?t.slice():I.extend({},t):t},I.tap=function(t,e){return e(t),t},I.isMatch=function(t,e){var i=I.keys(e),n=i.length;if(null==t)return!n;for(var o=Object(t),a=0;a<n;a++){var s=i[a];if(e[s]!==o[s]||!(s in o))return!1}return!0};var D=function t(e,i,n,o){if(e===i)return 0!==e||1/e==1/i;if(null==e||null==i)return e===i;e instanceof I&&(e=e._wrapped),i instanceof I&&(i=i._wrapped);var a=f.call(e);if(a!==f.call(i))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+e==""+i;case"[object Number]":return+e!=+e?+i!=+i:0==+e?1/+e==1/i:+e==+i;case"[object Date]":case"[object Boolean]":return+e==+i}var s="[object Array]"===a;if(!s){if("object"!=(void 0===e?"undefined":r(e))||"object"!=(void 0===i?"undefined":r(i)))return!1;var c=e.constructor,l=i.constructor;if(c!==l&&!(I.isFunction(c)&&c instanceof c&&I.isFunction(l)&&l instanceof l)&&"constructor"in e&&"constructor"in i)return!1}n=n||[],o=o||[];for(var u=n.length;u--;)if(n[u]===e)return o[u]===i;if(n.push(e),o.push(i),s){if((u=e.length)!==i.length)return!1;for(;u--;)if(!t(e[u],i[u],n,o))return!1}else{var h,d=I.keys(e);if(u=d.length,I.keys(i).length!==u)return!1;for(;u--;)if(h=d[u],!I.has(i,h)||!t(e[h],i[h],n,o))return!1}return n.pop(),o.pop(),!0};I.isEqual=function(t,e){return D(t,e)},I.isEmpty=function(t){return null==t||(M(t)&&(I.isArray(t)||I.isString(t)||I.isArguments(t))?0===t.length:0===I.keys(t).length)},I.isElement=function(t){return!(!t||1!==t.nodeType)},I.isArray=g||function(t){return"[object Array]"===f.call(t)},I.isObject=function(t){var e=void 0===t?"undefined":r(t);return"function"===e||"object"===e&&!!t},I.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){I["is"+t]=function(e){return f.call(e)==="[object "+t+"]"}}),"function"!=typeof/./&&"object"!=("undefined"==typeof Int8Array?"undefined":r(Int8Array))&&(I.isFunction=function(t){return"function"==typeof t||!1}),I.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},I.isNaN=function(t){return I.isNumber(t)&&t!==+t},I.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===f.call(t)},I.isNull=function(t){return null===t},I.isUndefined=function(t){return void 0===t},I.has=function(t,e){return null!=t&&p.call(t,e)},I.identity=function(t){return t},I.constant=function(t){return function(){return t}},I.noop=function(){},I.property=j,I.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},I.matcher=I.matches=function(t){return t=I.extendOwn({},t),function(e){return I.isMatch(e,t)}},I.times=function(t,e,i){var n=Array(Math.max(0,t));e=C(e,i,1);for(var o=0;o<t;o++)n[o]=e(o);return n},I.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},I.now=Date.now||function(){return(new Date).getTime()};var N={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},z=I.invert(N),P=function(t){var e=function(e){return t[e]},i="(?:"+I.keys(t).join("|")+")",n=RegExp(i),o=RegExp(i,"g");return function(t){return t=null==t?"":""+t,n.test(t)?t.replace(o,e):t}};I.escape=P(N),I.unescape=P(z),I.result=function(t,e,i){var n=null==t?void 0:t[e];return void 0===n&&(n=i),I.isFunction(n)?n.call(t):n};var Z=0;I.uniqueId=function(t){var e=++Z+"";return t?t+e:e},I.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var G=/(.)^/,F={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},R=/\\|'|\r|\n|\u2028|\u2029/g,Y=function(t){return"\\"+F[t]};I.template=function(t,e,i){!e&&i&&(e=i),e=I.defaults({},e,I.templateSettings);var n=RegExp([(e.escape||G).source,(e.interpolate||G).source,(e.evaluate||G).source].join("|")+"|$","g"),o=0,a="__p+='";t.replace(n,function(e,i,n,s,r){return a+=t.slice(o,r).replace(R,Y),o=r+e.length,i?a+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'":n?a+="'+\n((__t=("+n+"))==null?'':__t)+\n'":s&&(a+="';\n"+s+"\n__p+='"),e}),a+="';\n",e.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{var s=Function(e.variable||"obj","_",a)}catch(t){throw t.source=a,t}var r=function(t){return s.call(this,t,I)};return r.source="function("+(e.variable||"obj")+"){\n"+a+"}",r},I.chain=function(t){var e=I(t);return e._chain=!0,e};var B=function(t,e){return t._chain?I(e).chain():e};I.mixin=function(t){I.each(I.functions(t),function(e){var i=I[e]=t[e];I.prototype[e]=function(){var t=[this._wrapped];return h.apply(t,arguments),B(this,i.apply(I,t))}})},I.mixin(I),I.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=c[t];I.prototype[t]=function(){var i=this._wrapped;return e.apply(i,arguments),"shift"!==t&&"splice"!==t||0!==i.length||delete i[0],B(this,i)}}),I.each(["concat","join","slice"],function(t){var e=c[t];I.prototype[t]=function(){return B(this,e.apply(this._wrapped,arguments))}}),I.prototype.value=function(){return this._wrapped},I.prototype.valueOf=I.prototype.toJSON=I.prototype.value,I.prototype.toString=function(){return""+this._wrapped},t.exports=I},function(t,e){t.exports=require("fs")},function(t,e,i){"use strict";t.exports={loadScript:function(t,e,i){var n=document.getElementsByTagName("head")[0],o=document.createElement("script");o.type="text/javascript",o.onerror=i,o.onreadystatechange=function(){"complete"==this.readyState&&e(o,__src)},o.addEventListener("load",e,!0),o.src=t,n.appendChild(o)},scriptURL:function(){if(document.currentScript)return document.currentScript.src;for(var t=document.getElementsByTagName("script"),e=t.length-1;e--;)if(t[e].src)return t[e].src;return!1}}},function(t,e,i){"use strict";var n={VALUE_CREATED:"created",VALUE_UPDATED:"updated",VALUE_DELETED:"deleted",VALUE_UNCHANGED:"unchanged",map:function(t,e){if(this.isFunction(t)||this.isFunction(e))throw"Invalid argument. Function given, object expected.";if(this.isValue(t)||this.isValue(e))return{_map_type:this.compareValues(t,e),_map_data:void 0===e?t:e};if(_.isArray(e))var i=!0,n=[];else var n={};for(var o in t)if(!this.isFunction(t[o])){var a=void 0;void 0!==e[o]&&(a=e[o]),n[o]=this.map(t[o],a)}for(var o in e)if(!this.isFunction(e[o])&&void 0===n[o]){var s=this.map(void 0,e[o]);i?n.push(s):n[o]=s}return{_map_type:"",_map_data:n}},compareValues:function(t,e){return t===e?this.VALUE_UNCHANGED:void 0===t?this.VALUE_CREATED:void 0===e?this.VALUE_DELETED:this.VALUE_UPDATED},isFunction:function(t){return"[object Function]"==={}.toString.apply(t)},isArray:function(t){return"[object Array]"==={}.toString.apply(t)},isObject:function(t){return"[object Object]"==={}.toString.apply(t)},isValue:function(t){return!this.isObject(t)&&!this.isArray(t)}};t.exports={differenceMap:n.map.bind(n),syntaxHighlight:function(t){return"string"!=typeof t&&(t=JSON.stringify(t,null,2)),t=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),t=t.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,function(t){var e="number";return/^"/.test(t)?e=/:$/.test(t)?"key":"string":/true|false/.test(t)?e="boolean":/null/.test(t)&&(e="null"),'<span class="'+e+'">'+t+"</span>"}),t=t.replace(/[^,\n][^\n]*/g,function(t){return"<span>"+t+"</span>"})},differenceHighlight:function(t,e){function i(t,e,n,o,a){var s=$("<p>");if(s.append($("<span>").addClass("object-key").append($("<span>").text(Array(e).join(" ")))),a&&s.append($("<span>").text('"').addClass("invisible"),$("<span>").addClass("key").text(a),$("<span>").text('"').addClass("invisible"),$("<span>").text(": ")),t&&void 0!==t._map_type)if(s.addClass(t._map_type),_.isArray(t._map_data)){s.append($("<span>").text("["));var r=t._map_data.length-1;for(var c in t._map_data)i(t._map_data[c],e+1,s,c!=r);s.append($("<p>").text(Array(e).join(" ")+"]"+(o?",":"")))}else if(_.isObject(t._map_data)){s.append($("<span>").text("{"));var r=Object.keys(t._map_data).pop();for(var c in t._map_data)i(t._map_data[c],e+1,s,c!=r,c);s.append($("<p>").text(Array(e).join(" ")+"}"+(o?",":"")))}else _.isNull(t._map_data)?s.append($("<span>").text(JSON.stringify(t._map_data,null,2))):t._map_data.constructor===String?s.append($("<span>").text('"'),$("<span>").addClass("string").text(t._map_data),$("<span>").text('"')):t._map_data.constructor===Number||t._map_data.constructor===Boolean?s.append($("<span>").addClass("number").text(t._map_data)):s.append($("<span>").text(JSON.stringify(t._map_data,null,2))),o&&s.append($("<span>").text(","));else s.append($("<span>").text(JSON.stringify(t,null,2))),o&&s.append($("<span>").text(","));n.append(s)}return e?e.empty():e=$("<pre>"),i(t,1,e),e}}},function(t,e,i){"use strict";t.exports={map:function(t,e){if(t.constructor==Array)return Promise.all(t.map(e)).then(function(t,e){return e?Promise.reject(e):Promise.resolve(t)});var i=Object.keys(t),n=Object.values(t);return Promise.all(n.map(e)).then(function(t,e){if(e)return Promise.reject(e);for(var n={},o=0;o<t.length;o++)n[i[o]]=t[o];return Promise.resolve(n)})},wrap:function(t){return function(e){return function(){Array.prototype.slice.call(arguments,1);return e.length?new Promise(e.bind(t)):new Promise(function(i,n){var o=e.call(t);o||void 0===o?i():n()})}}}}},function(t,e,i){"use strict";(function(t){String.prototype.splice||(String.prototype.splice=function(t,e,i){return this.slice(0,t)+i+this.slice(t+Math.abs(e))}),t.util.string.toDashed=function(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},t.util.string.uncapitalize=function(t){return t.charAt(0).toLowerCase()+t.slice(1)}}).call(e,i(0))},function(t,e,i){"use strict";(function(t){t.util.object.extend(t.util.object,i(3))}).call(e,i(0))},function(t,e,i){"use strict";(function(t){t.util.object.extend(t.util,{idCounter:1,createObject:function(e,i,n){"string"!=typeof e?(n=i,i=e,e=null):i.type=e;var o=i.application;o&&o.fire("entity:load",{options:i});var a=t.util.string.camelize(t.util.string.capitalize(e||i.type||o.prototypes.Object.type,!0)),s=i.application.klasses[a]||t[a];if(!s){var r=i.text&&i.text.constructor==String?i.text:a;return delete i.text,n(new t.Text(r,i))}var c=s.fromObject(i,function(t){n&&n(t),n=null});return c&&(n&&n(c),n=null),c},getProportions:function(t,e,i){i=i||"fit";var n=t.naturalWidth||t.width,o=t.naturalHeight||t.height;if(!e.height&&!e.width)return{scale:1,width:n,height:o};if(!t.height&&!t.width)return{scale:.001,width:e.width,height:e.height};var a,s=e.width&&e.width/n||999,r=e.height&&e.height/o||999;return"cover"===i&&(a=Math.max(s,r)),"fit"===i&&(a=Math.min(s,r)),"center"===i&&(a=1),{scale:a,width:Math.floor(n*a),height:Math.floor(o*a)}},createCanvasElementWithSize:function(e){var i=t.util.createCanvasElement();return i.width=e.width,i.height=e.height,i},getRect:function(e,i,n){var o={},a=t.util.flex(e,[{value:n.left,flex:0},{value:n.width,flex:1},{value:n.right,flex:0}]);o.left=a[0],o.width=a[1],o.right=a[2];var a=t.util.flex(i,[{value:n.top,flex:0},{value:n.height,flex:1},{value:n.bottom,flex:0}]);return o.top=a[0],o.height=a[1],o.bottom=a[2],o},flex:function(t,e){var i=[],n=0;e.forEach(function(e,i){void 0===e.value?n++:t-=e.value});var o=t/n;return e.forEach(function(t){i.push(void 0===t.value?o:t.value)}),i}})}).call(e,i(0))},function(t,e,i){"use strict";(function(t){function e(t,e){if(this.__eventListeners[t]){var i=this.__eventListeners[t];e?i.splice(i.indexOf(e),1):i.length=0}}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.Observable.stopObserving=function(t,n){if(this.__eventListeners){if(0===arguments.length)for(t in this.__eventListeners)e.call(this,t);else if(1===arguments.length&&"object"===i(arguments[0]))for(var o in t)e.call(this,o,t[o]);else e.call(this,t,n);return this}},t.Observable.on=function(t,e,i){if(t.constructor==Object){for(var n in t)this.on(n,t[n],i);return this}var o=t.split(" ");for(var n in o)t=o[n],this.observe(t,e),i&&this.__eventListeners[t].unshift(this.__eventListeners[t].pop());return this},t.Observable.off=function(t,e){var i=t.split(" ");for(var n in i)this.stopObserving(i[n],e);return this},t.Observable.fire=function(t,e){if(this.__eventListeners){var i=this.__eventListeners[t];if(i)for(var n=0,o=i.length;n<o;n++)i[n].call(this,e||{});var a=this.__eventListeners["*"];if(a)for(e=e||{},e.eventName=t,e.listeners=i,n=0,o=a.length;n<o;n++)a[n].call(this,e);return this}},t.util.object.extend(t.Object.prototype,t.Observable),t.util.object.extend(t.IText.prototype,t.Observable),t.util.object.extend(t.Textbox.prototype,t.Observable),t.util.object.extend(t.Image.prototype,t.Observable),t.util.object.extend(t.Canvas.prototype,t.Observable),t.util.object.extend(t,t.Observable)}).call(e,i(0))},function(t,e,i){"use strict";(function(t){var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.Object._fromObject=function(e,i,n,o,a){var s=t[e],r=i.application;if(delete i.application,i=t.util.object.clone(i,!0),i.application=r,!o){var c=a?new s(i[a],i):new s(i);return n&&n(c),c}t.util.enlivenPatterns([i.fill,i.stroke],function(t){void 0!==t[0]&&(i.fill=t[0]),void 0!==t[1]&&(i.stroke=t[1]);var e=a?new s(i[a],i):new s(i);n&&n(e)})},t.INCLUDE_ALL="*",t.util.object.extend(t.Object.prototype,{storeProperties:["type"],eventListeners:{},optionsOrder:["*"],setEventListeners:function(t){this.on(t)},set:function(t,i){return"object"===(void 0===t?"undefined":e(t))?this._setObject(t,i):"&"===t[0]?(t=t.substr(1),this._set(t,i(this.get(t)))):this._set(t,i),this},_setObject:function(e,i){var n=Object.keys(e);if(this.optionsOrder){for(var o,a,s=this.optionsOrder.indexOf("*")||-1,r=s;o=this.optionsOrder[--r];)-1!==(a=n.indexOf(o))&&(n.splice(a,1),n.unshift(o));for(r=s;o=this.optionsOrder[++r];)-1!==(a=n.indexOf(o))&&(n.splice(a,1),n.push(o))}var c;for(var r in n){var l=n[r];if(void 0!==e[l]){var u="set"+t.util.string.capitalize(l,!0);this[u]&&this[u].name&&"anonymous"!=this[u].name?2==this[u].length?(c?c.total++:c=t.util.queueLoad(2,i),this[u](e[l],function(t){c()}.bind(this,l))):this[u](e[l]):this.__set(l,e[l])}}c?c():i&&i()},__set:t.Object.prototype._set,_set:function(e,i,n){var o="set"+t.util.string.capitalize(e,!0);return this[o]&&this[o].name&&"anonymous"!=this[o].name?this[o](i,n):this.__set(e,i),this},setAngle:function(t){this.angle=t},setShadow:function(e){return this.shadow=e?new t.Shadow(e):null},disable:function(){this.set({selectable:!1,evented:!1,hasControls:!1,lockMovementX:!0,lockMovementY:!0})},stored:!0,store_left:function(){return t.util.toFixed(this.left,t.Object.NUM_FRACTION_DIGITS)},store_top:function(){return t.util.toFixed(this.top,t.Object.NUM_FRACTION_DIGITS)},store_width:function(){return t.util.toFixed(this.width,t.Object.NUM_FRACTION_DIGITS)},store_height:function(){return t.util.toFixed(this.height,t.Object.NUM_FRACTION_DIGITS)},store_fill:function(){return this.fill&&this.fill.toObject?this.fill.toObject():this.fill},store_stroke:function(){return this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke},store_strokeWidth:function(){return t.util.toFixed(this.strokeWidth,t.Object.NUM_FRACTION_DIGITS)},store_strokeDashArray:function(){return this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray},store_strokeMiterLimit:function(){return t.util.toFixed(this.strokeMiterLimit,t.Object.NUM_FRACTION_DIGITS)},store_scaleX:function(){return t.util.toFixed(this.scaleX,t.Object.NUM_FRACTION_DIGITS)},store_scaleY:function(){return t.util.toFixed(this.scaleY,t.Object.NUM_FRACTION_DIGITS)},store_angle:function(){return t.util.toFixed(this.getAngle(),t.Object.NUM_FRACTION_DIGITS)},store_opacity:function(){return t.util.toFixed(this.opacity,t.Object.NUM_FRACTION_DIGITS)},store_shadow:function(){return this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow},store_clipTo:function(){return this.clipTo&&(this.clipTo.id&&"#"+this.clipTo.id||this.clipTo)||null},store_transformMatrix:function(){return this.transformMatrix?this.transformMatrix.concat():null},store_skewX:function(){return t.util.toFixed(this.skewX,t.Object.NUM_FRACTION_DIGITS)},store_skewY:function(){return t.util.toFixed(this.skewY,t.Object.NUM_FRACTION_DIGITS)},toObject:function(t){t=(t||[]).concat(this.storeProperties).concat(this.stateProperties);var e=this.getProperties(t);return this.includeDefaultValues||(e=this._removeDefaultValues(e,this.type)),this.fire("before:object",{object:e}),e},setOptions:function(t){this._setObject(t)},_initEntity:function(t){t.canvas&&!t.application&&(t.application=t.canvas.application),t.application&&t.application.fire("entity:created",{target:this,options:t})},initialize:function(t,e){t=t||{},this._initEntity(t);var i=this;this._setObject(t,function(){i.loaded=!0,i.fire("loaded"),e&&e(i)})},add:function(t){t.add(this)},hasBoundsControls:!0,stroke:"transparent",stepRotating:function(){var t=this.getAngle(),e=45*parseInt(t/45);5>t-e?this.setAngle(e):40<t-e&&this.setAngle(e+45)},onTop:function(){return this.canvas._objects.indexOf(this)==this.canvas._objects.length-1},onBottom:function(){return 0==this.canvas._objects.indexOf(this)},flop:function(){this.flipY=!this.flipY,this.canvas.renderAll()},flip:function(){this.flipX=!this.flipX,this.canvas.renderAll()},duplicate:function(){var t=this.toObject();return t.active=!0,t.left+=10,t.top+=10,this.canvas.createObject(t)},_normalizeAngle:function(){this.angle<0?this.angle+=360:this.angle>360&&(this.angle%=360)},minStrokeWidth:0,maxStrokeWidth:function(){return Math.min(this.width,this.height)/2},movementDelta:1,moveUp:function(){this.top-=this.movementDelta,this.canvas.renderAll()},moveDown:function(){this.top+=this.movementDelta,this.canvas.renderAll()},moveLeft:function(){this.left-=this.movementDelta,this.canvas.renderAll()},moveRight:function(){this.left+=this.movementDelta,this.canvas.renderAll()}})}).call(e,i(0))},function(t,e,i){"use strict";(function(t){i(22),t.util.object.extend(t.Image.prototype,t.ImageMixin,{filters:null,resizeFilters:null,originalSrc:null,storeProperties:t.Object.prototype.storeProperties.concat(["filters","resizeFilters","originalSrc","src","contentOffsets"]),store_originalSrc:function(){return this._edited?this._original_src||this._originalElement.src||this._element.src:null},store_src:function(){var e=void 0;return e=this._edited?this._element.src:this._original_src||this._originalElement.src||this._element.src,0===e.indexOf(t.util.mediaRoot)&&(e=e.replace(t.util.mediaRoot,"")),e},store_filters:function(){var t=[],e=1,i=1;return this.filters.forEach(function(n){n&&("Resize"===n.type&&(e*=n.scaleX,i*=n.scaleY),t.push(n.toObject()))}),t.length&&t||null},store_resizeFilters:function(){var t=[];return this.resizeFilters.forEach(function(e){e&&t.push(e.toObject())}),t.length&&t||null},setSrc:function(t){},toObject:t.Object.prototype.toObject,async:!0,initialize:function(e,i,n){i||(i={}),this.filters=[],this.resizeFilters=[],i.originalSrc&&(this._edited=!0,t.util.loadImage(i.originalSrc,function(t){this._originalElement=t}.bind(this))),this._initElement(e,i,n&&function(){t.Object.prototype.initialize.call(this,i,n)}.bind(this))},_initElement:function(e,i,n){this.setElement(t.util.getById(e),n,i),t.util.addClass(this.getElement(),t.Image.CSS_CANVAS)},setCrossOrigin:function(t){return this.crossOrigin=t,this._element&&(this._element.crossOrigin=t),this},setElement:function(t,e,i){var n,o;return this._element=t,this._originalElement=t,this._initConfig(i),0===this.resizeFilters.length?n=e:(o=this,n=function(){o.applyFilters(e,o.resizeFilters,o._filteredEl||o._originalElement,!0)}),0!==this.filters.length?this.applyFilters(n):n&&n(this),this.canvas&&this.canvas.renderAll(),this},cloneSync:function(){return new t.Image(this._element,this)}}),t.util.initFilters=function(e,i,n){for(var o in i.filters)i.filters[o].type=t.util.string.capitalize(t.util.string.camelize(i.filters[o].type),!0);t.Image.prototype._initFilters.call(i,i.filters,function(o){i.filters=o||[],t.Image.prototype._initFilters.call(i,i.resizeFilters,function(t){i.resizeFilters=t||[],n(e,i)})})},t.util.initImageAndFilters=function(e,i){if(e.image){var n=e.image;delete e.src,delete e.image,t.util.initFilters(n,e,i)}else e.src?t.util.loadImage(e.src,function(n){t.util.initFilters(n,e,i)},null,e.crossOrigin):t.util.initFilters(null,e,i)},t.Image.fromObject=function(e,i){t.util.initImageAndFilters(e,function(e,n){new t.Image(e,n,i)})}}).call(e,i(0))},function(t,e,i){"use strict";(function(t){t.ImageMixin={setElementFromMenu:function(t){this.setElement(t.image)},initProportinalSize:!0,_setWidthHeight:function(t){if(this.element||this._element)var e=this.getOriginalSize();else e={};"width"in t?this.width=t.width:e.width?this.initProportinalSize&&"height"in t?this.width=t.height/e.height*e.width:this.width=e.width:this.width=100,"height"in t?this.height=t.height:e.height?this.initProportinalSize&&"width"in t?this.height=t.width/e.width*e.height:this.height=e.height:this.height=100}}}).call(e,i(0))},function(t,e,i){"use strict";(function(t){var e=t.Canvas.prototype.setDimensions;t.util.object.extend(t.StaticCanvas.prototype,{optionsOrder:[],__set:t.Object.prototype.__set,_set:t.Object.prototype._set,_setObject:t.Object.prototype._setObject,get:t.Object.prototype.get,set:t.Object.prototype.set}),t.util.object.extend(t.Object.prototype,{layer:"objects"}),t.util.object.extend(t.Canvas.prototype,{originalState:{},stateProperties:[],editingObject:null,frontObjectsSelectionPriority:!1,findTarget:function(t,e){if(!this.skipTargetFind){var i,n,o=this.getPointer(t,!0),a=this.getActiveGroup(),s=this.getActiveObject();if(this.targets=[],a&&!e&&a===this._searchPossibleTargets([a],o))return this._fireOverOutEvents(a,t),a;if(s&&s._findTargetCorner(o))return this._fireOverOutEvents(s,t),s;if(!this.frontObjectsSelectionPriority&&s&&s===this._searchPossibleTargets([s],o)){if(!this.preserveObjectStacking)return this._fireOverOutEvents(s,t),s;i=s,n=this.targets,this.targets=[]}var r=this._searchPossibleTargets(this._objects,o);return t[this.altSelectionKey]&&r&&i&&r!==i&&(r=i,this.targets=n),this._fireOverOutEvents(r,t),r}},setDimensions:function(t,i){e.call(this,t,i),this.backgroundImage&&this.backgroundImage.constructor!==String&&this._update_background_overlay_image("background"),this.overlayImage&&this.overlayImage.constructor!==String&&this._update_background_overlay_image("overlay"),this.fire("dimensions:modified"),this.renderAll()}});var i={objects:null,animated:!1,fitIndex:.8,originalWidth:0,originalHeight:0,setAnimated:function(e){e&&t.util.requestAnimFrame(function e(){this.renderAll(),t.util.requestAnimFrame(e)}.bind(this))},_chooseObjectsToRender:function(t){if(this.interactive)var e=this.getActiveGroup(),i=this.getActiveObject();var n,o=[],a=[];if(e&&!this.preserveObjectStacking){for(var s=0,r=this._objects.length;s<r;s++)n=this._objects[s],t&&n.layer!==t||(e.contains(n)?a.push(n):n.hiddenActive||o.push(n));e&&o.push(e),i&&o.push(i)}else if(t)for(var s=0,r=this._objects.length;s<r;s++)n=this._objects[s],t&&n.layer!==t||o.push(n);else o=this._objects;return o},setEventListeners:function(t){this.on(t)},find:function(e){return"string"==typeof e&&(e={type:e}),t.util.object.where(this._objects,e)},_update_background_overlay_image:function(e){var i=this[e+"Position"],n=this[e+"Image"];if(n&&n.constructor!==Object&&n.constructor!==String)if("resize"===i)this.originalWidth=n.width,this.originalHeight=n.height;else if("manual"!==i){var o=this.originalWidth||this.width,a=this.originalHeight||this.height;if("fit"!==i&&n._originalElement)var s=t.util.getProportions(n._originalElement,{width:o,height:a},i);else s={width:o,height:a};var r;r="center"===n.originX?o/2:(o-s.width)/2;var c;c="center"===n.originY?a/2:(a-s.height)/2;this.viewportTransform[0];n.set({left:r,top:c,width:s.width,height:s.height,scaleX:1,scaleY:1})}},_setBackgroundOverlayImage:function(t,e){var i=e+"Image",n=e+"Position";if(this.loaded){var o={};o[i]=this[i]}if(this[i]=t,this[i].canvas=this,this._update_background_overlay_image(e),"resize"===this[n]&&(this.originalWidth=t.width,this.originalHeight=t.height),this.loaded){var a={};a[i]=this[i],this.fire("modified",{states:{original:o,modified:a}})}this.fire("background-image:loaded",{target:t})},setBackgroundOverlayImage:function(e,i,n){var o=this,a=i+"Image",s=this.application.prototypes&&this.application.prototypes[t.util.string.capitalize(a)];if(!e)return this[a]=null,void(n&&n());if(e instanceof HTMLImageElement||e instanceof Image){var r=new t.Image(e,{width:e.naturalWidth,height:e.naturalHeight});return this._setBackgroundOverlayImage(r,i),void(n&&n())}e.constructor==String&&(e={src:e}),s&&t.util.object.extend(e,s),e.application=this.application,e.disableDefaultProperties=!0,e.type=e.type||"image",t.util.createObject(e,function(t){o._setBackgroundOverlayImage(t,i),n&&n()})},setOverlayImage:function(t,e){this.setBackgroundOverlayImage(t,"overlay",e)},setBackgroundImage:function(t,e){this.setBackgroundOverlayImage(t,"background",e)},createObjects:function(e,i){function n(t){s.fire("progress:complete",{objects:e});for(var n in t)s.add(t[n]);s.renderAll(),i&&i.call(s)}function o(e,i){s.fire("progress",{loaded:e,total:i}),t.util.loaderDebug}if(this.application)for(var a in e)e[a].constructor==String&&(e[a]=this.application.objects[e[a]]);var s=this,r=[];if(!e||!e.length)return void n(r);if("klass"===e[0].constructor.name)return void n(e);var c=t.util.queueLoad(e.length,function(){n(t.util.object.pluck(r,"object"))},o);c.data=(this.title||"")+"objects";for(var a in e)(function(e){var i={object:null,options:e};r.push(i),e.application=s.application,t.util.createObject(e,function(t){i.object=t,c()})}).call(this,e[a])},applyOptions:function(t,e){this._objects.forEach(function(i){for(var n in t)if(i[n]!==t[n])return;i.setOptions(e)})},createObject:function(e,i,n){function o(t){t.canvas||(a.add(t),n&&n(t))}"string"!=typeof e?(n=i,i=t.util.object.clone(e),e=null):(i=t.util.object.clone(i),i.type=e);var a=this;i=t.util.object.extend({},this.application.getDefaultProperties(i.type),i),i.application=this.application;var s=t.util.createObject(i,o);return s&&o(s),s},onLoad:function(t){this.processing=!1,this.loaded=!0,this.fire("loading:end",{type:"slide",target:this}),this.application.fire("slide:loading:end",{target:this,type:"slide"}),this.interactive=!0,this.renderAll(),t&&t.call(this)},load:function(t,e){t&&(this.application._populateWithDefaultProperties(this,t),t.width&&(t.originalWidth=t.width,t.originalHeight=t.height),this.processing=!0,this.interactive=!1,this.clear(),this.fire("loading:begin",{type:"slide",options:t}),this.application.fire("slide:loading:begin",{target:this,type:"slide",options:t}),this.set(t,this.onLoad.bind(this,e)))},setObjects:function(t,e){this._objects.length=0,this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.interactive&&(this.discardActiveGroup(),this.discardActiveObject(),this.clearContext(this.contextTop)),this.createObjects(t,function(){for(var t in this._objects)this._objects[t].setCoords();e()})},onResize:function(){Math.min(1,800/this.width);this.setDimensions({width:this.width,height:this.height})},getCenter:function(t){return{top:(this.originalHeight||this.getHeight())/2,left:(this.originalWidth||this.getWidth())/2}},setOriginalSize:function(t,e){return this.originalWidth=e?t:t.naturalWidth||t.width,this.originalHeight=e||(t.naturalHeight||t.height),this}},n=t.Canvas.prototype.getPointer;t.util.object.extend(t.StaticCanvas.prototype,i,{type:"canvas",cacheProperties:[],optionsOrder:function(){var e=t.StaticCanvas.prototype.optionsOrder;return e.unshift("originalWidth","originalHeight","width","height","*"),e}(),_initEntity:function(t){t.application&&t.application.fire("entity:created",{target:this,options:t})},_layers:["background","objects","areas","overlayImage","overlay","controls"],layers:{background:{render:function(t,e){t._renderBackground(e)},svg:function(t,e,i){t._setSVGBgOverlayColor(e,"backgroundColor"),t._setSVGBgOverlayImage(e,"backgroundImage",i)}},areas:{render:function(e,i){i.save(),e.clipTo&&t.util.clipContext(e,i),i.transform.apply(i,e.viewportTransform),e._offsetsObject&&e._offsetsObject.render(i),e._areasObjects&&e._renderObjects(i,e._areasObjects),e._helpersObjects&&e._renderObjects(i,e._helpersObjects),i.restore()},objects:function(t){return t._areasObjects||t._offsetsObject&&[t._offsetsObject]||[]}},objects:{render:function(e,i){i.save(),e.clipTo&&t.util.clipContext(e,i),i.transform.apply(i,e.viewportTransform),e._renderObjects(i,e._chooseObjectsToRender("objects")),i.restore()},objects:function(t){return t._objects},svg:function(t,e,i){var n=t._chooseObjectsToRender("objects"),o=!0,a=!1,s=void 0;try{for(var r,c=n[Symbol.iterator]();!(o=(r=c.next()).done);o=!0){var l=r.value;l.excludeFromExport||t._setSVGObject(e,l,i)}}catch(t){a=!0,s=t}finally{try{!o&&c.return&&c.return()}finally{if(a)throw s}}}},overlay:{render:function(e,i){i.save(),e.clipTo&&t.util.clipContext(e,i),i.transform.apply(i,e.viewportTransform),e._renderObjects(i,e._chooseObjectsToRender("overlay")),i.restore()},svg:function(t,e,i){var n=t._chooseObjectsToRender("overlay"),o=!0,a=!1,s=void 0;try{for(var r,c=n[Symbol.iterator]();!(o=(r=c.next()).done);o=!0){var l=r.value;l.excludeFromExport||t._setSVGObject(e,l,i)}}catch(t){a=!0,s=t}finally{try{!o&&c.return&&c.return()}finally{if(a)throw s}}}},controls:{render:function(t,e){t.interactive&&t.drawControls(e)}},overlayImage:{render:function(t,e){t._renderOverlay(e)},svg:function(t,e,i){t._setSVGBgOverlayColor(e,"overlayColor"),t._setSVGBgOverlayImage(e,"overlayImage",i)}}},renderCanvas:function(t,e){this.clearContext(t),this.fire("before:render");var i=!0,n=!1,o=void 0;try{for(var a,s=this._layers[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var r=a.value;this.layers[r].render(this,t)}}catch(t){n=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(n)throw o}}this.fire("after:render")},_renderOverlayObjects:function(){},_renderBackgroundObjects:function(){},_initStatic:function(e,i){this._objects=[],this._helpersObjects=[],this._createLowerCanvas(e),this._initSize(i),this.set(i),this._setImageSmoothing(),this.interactive||this._initRetinaScaling(),this.calcOffset(),this.backgroundRect=new t.Rect({width:this.width,height:this.height,background:"#fff",shadow:{color:"rgba(0,0,0,0.3)"}})},_initSize:function(){this.width=this.width||parseInt(this.lowerCanvasEl.width,10)||0,this.height=this.height||parseInt(this.lowerCanvasEl.height,10)||0,this.lowerCanvasEl.style&&(this.lowerCanvasEl.width=this.width,this.lowerCanvasEl.height=this.height,this.lowerCanvasEl.style.width=this.width+"px",this.lowerCanvasEl.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},initialize:function(t,e){t&&t.constructor==Object&&(e=t,t=null),e=e||{},e.application&&e.application.fire("entity:created",{target:this,options:e}),this._initEntity(e),this._initStatic(t,e),this.updateFonts()},updateFonts:function(e){var i=this;t.on("fonts:loaded",function(){var t=i.find({type:"text"}),e=!0,n=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(e=(a=s.next()).done);e=!0){var r=a.value;r.dirty=!0}}catch(t){n=!0,o=t}finally{try{!e&&s.return&&s.return()}finally{if(n)throw o}}var t=i.find({type:"textbox"}),c=!0,l=!1,u=void 0;try{for(var h,d=t[Symbol.iterator]();!(c=(h=d.next()).done);c=!0){var r=h.value;r.dirty=!0}}catch(t){l=!0,u=t}finally{try{!c&&d.return&&d.return()}finally{if(l)throw u}}var t=i.find({type:"i-text"}),f=!0,p=!1,g=void 0;try{for(var v,m=t[Symbol.iterator]();!(f=(v=m.next()).done);f=!0){var r=v.value;r.dirty=!0}}catch(t){p=!0,g=t}finally{try{!f&&m.return&&m.return()}finally{if(p)throw g}}i.renderAll()})},setData:function(e){if("background"===e.role)this.setBackgroundImage(e,this.renderAll.bind(this));else{var i={position:void 0===e.left&&void 0===e.top?"center":"manual",active:!0},n=this.activeArea&&this.activeArea.id&&"#"+this.activeArea.id;n&&(i.movementLimits=n,i.clipTo=n),this.createObject(t.util.object.deepExtend(i,e))}},setOriginalWidth:function(t){this.originalWidth=t,this.stretchable||this.setWidth(t)},setOriginalHeight:function(t){this.originalHeight=t,this.stretchable||this.setHeight(t)},setWidth:function(t){return this.setDimensions({width:t},{})},setHeight:function(t){return this.setDimensions({height:t},{})},backgroundPosition:"manual",setBackgroundPosition:function(t){return this.backgroundPosition=t,this._update_background_overlay_image("background"),this},store_offsets:function(){return this.offsets?this.offsets.left==this.offsets.right&&this.offsets.right==this.offsets.top&&this.offsets.top==this.offsets.bottom?this.offsets.left:this.offsets:0},offsets:0,fillBackgroundColorOverCanvas:!1,_renderBackgroundOrOverlay:function(t,e){var i=this[e+"Color"],n=this.originalWidth||this.width,o=this.originalHeight||this.height,a=this.backgroundRect;"background"===e&&a?(a.left=this.viewportTransform[4],a.top=this.viewportTransform[5],a.width=this.originalWidth*this.viewportTransform[0],a.height=this.originalHeight*this.viewportTransform[0],a.fill=i||"#ffffff",a.dirty=!0,a.render(t)):i&&(t.fillStyle=i.toLive?i.toLive(t):i,this.fillBackgroundColorOverCanvas?t.fillRect(i.offsetX||0,i.offsetY||0,this.width,this.height):t.fillRect(i.offsetX||this.viewportTransform[4],i.offsetY||this.viewportTransform[5],n*this.viewportTransform[0],o*this.viewportTransform[0])),(i=this[e+"Image"])&&i.constructor!==String&&i.constructor!==Object&&(t.save(),t.transform.apply(t,this.viewportTransform),i.render(t),t.restore())},getImageData:function(e){e=t.util.object.extend({clipped_area:!1,clipped_area_only:!1,draw_background:!0,format:"png",quality:.8},e||{});var i;if(e.clipped_area){i=e.clipped_area.getBoundingRect();var n=this.getZoom();i.left/=n,i.top/=n,i.width/=n,i.height/=n,t.util.object.extend(e,i)}else i={width:e.width||this.originalWidth||this.width,height:e.height||this.originalHeight||this.height},e.clipped_area_only&&(i.width-=this.offsets.left+this.offsets.right,i.height-=this.offsets.top+this.offsets.bottom);e.zoom&&(i.width*=e.zoom,i.height*=e.zoom);var o=t.util.createCanvasElement();o.width=i.width,o.height=i.height,e.left=Math.floor(e.left),e.top=Math.floor(e.top),e.height=Math.ceil(e.height),e.width=Math.ceil(e.width),this.renderThumb(o,e);var a=o.toDataURL(e),s=t.util.dataURItoBlob(a,"image/"+e.format);return{dataURL:a,blob:s,url:URL.createObjectURL(s),canvas:o}},getOriginalSize:function(){return{width:this.originalWidth,height:this.originalHeight}},getObjectByID:function(t){for(var e in this.layers)if(this.layers[e].objects){var i=!0,n=!1,o=void 0;try{for(var a,s=this.layers[e].objects(this)[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var r=a.value;if(r.id===t)return r}}catch(t){n=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(n)throw o}}}return null},getPointer:function(t,e,i){var o=n.call(this,t,e,i);return t._group?this._normalizePointer(t._group,o):o},hasStateChanged:t.Object.prototype.hasStateChanged,_createLowerCanvas:function(e){this.lowerCanvasEl="string"==typeof e?t.util.getById(e):e?this._createCanvasElement(e):t.util.createCanvasElement(),t.util.addClass(this.lowerCanvasEl,"lower-canvas"),this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},findTarget:function(t,e){if(!this.skipTargetFind){var i=this.getPointer(t,!0),n=this.getActiveGroup(),o=this.getActiveObject();if(n&&!e&&this._checkTarget(i,n))return n;if(o&&this._checkTarget(i,o))return this._fireOverOutEvents(o,t),o;this.targets=[];var a=this._searchPossibleTargets(this._objects,i);return this._fireOverOutEvents(a,t),a}}}),t.util.object.extend(t.Canvas.prototype,i,{type:"slide"})}).call(e,i(0))},function(t,e,i){"use strict";(function(t){var e=t.Text.prototype.initialize;t.util.object.extend(t.Text.prototype,{stateProperties:t.Text.prototype.stateProperties.concat(["text"]),initializeOverriden:e,initialize:function(t,e){this._initEntity(e),this.initializeOverriden(t,e)},accepts:{role:"fontFamily"},setData:function(t){"fontFamily"==t.role&&this.setFontFamily(t.fontFamily)},getStyle:function(t){var e=this;return e.getSelectionStyles&&e.isEditing?e.getSelectionStyles()[t]||e[t]:e[t]||e["__"+t]||""},getPattern:function(t){var e=this.getStyle("fill ");return e&&e.source},setStyles:function(t){this.styles=t||{}},setPattern:function(e){if(e){var i=this;t.util.loadImage(e,function(e){i.setStyle("fill",new t.Pattern({source:e,repeat:"repeat"}))})}else this.setStyle("fill")},getRadius:function(){return this.get("radius")},setShadow:function(e){return this.setProperty("shadow",e?new t.Shadow(e):null)},setRadius:function(t){this.setProperty("radius",t)},getSpacing:function(){return this.get("spacing")},setSpacing:function(t){this.setProperty("spacing",t)},getReverted:function(){return this.get("reverted")},setReverted:function(t){this.setProperty("reverted",t)},getFill:function(){return this.getStyle("fill")},setFill:function(t){this.setStyle("fill",t)},getText:function(){return this.get("text")},setText:function(t){this.setProperty("text",t)},getTextAlign:function(){return this.get("textAlign")},setTextAlign:function(t){this.setProperty("textAlign",t.toLowerCase())},getFontFamily:function(){return this.get("fontFamily")},setFontFamily:function(t){this.setStyle("fontFamily",t)},getStyles:function(){return{fill:this.fill,fontSize:this.fontSize,textBackgroundColor:this.textBackgroundColor,textDecoration:this.textDecoration,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontStyle:this.fontStyle,stroke:this.stroke,strokeWidth:this.strokeWidth}},getBgColor:function(){return this.get("backgroundColor")},setBgColor:function(t){this.setProperty("backgroundColor",t)},getTextBgColor:function(){return this.get("textBackgroundColor")},setTextBgColor:function(t){this.setProperty("textBackgroundColor",t)},getStroke:function(){return this.getStyle("stroke")},setStroke:function(t){this.setStyle("stroke",t)},getStrokeWidth:function(){return this.getStyle("strokeWidth")},setStrokeWidth:function(t){this.setStyle("strokeWidth",parseInt(t,10))},decreaseFontSize:function(){this.setStyle("fontSize",parseInt(this.getStyle("fontSize"))-1)},increaseFontSize:function(){this.setStyle("fontSize",parseInt(this.getStyle("fontSize"))+1)},getFontSize:function(){return this.getStyle("fontSize")},setFontSize:function(t){this.setStyle("fontSize",parseInt(t,10))},getLineHeight:function(){return this.getStyle("lineHeight")},setLineHeight:function(t){this.setStyle("lineHeight",parseFloat(t,10))},addText:function(e,i){var n=this.text.match(/\n/g),o=n&&n.length||0,a=this.text.length-this.text.lastIndexOf("\n")-1;this.styles[o]||(this.styles[o]={}),this.styles[o][a]||(this.styles[o][a]={}),t.util.object.extend(this.styles[o][a],i),this.text+=e},getBold:function(){return"bold"===this.getStyle("fontWeight")},setBold:function(t){this.setStyle("fontWeight",t?"bold":"")},getItalic:function(){return"italic"===this.getStyle("fontStyle")},setItalic:function(t){this.setStyle("fontStyle",t?"italic":"")},getUnderline:function(){return this.getStyle("textDecoration").indexOf("underline")>-1},setUnderline:function(t){t=t?this.getStyle("textDecoration")+" underline":this.getStyle("textDecoration").replace("underline",""),this.setStyle("textDecoration",t)},getLinethrough:function(){return this.getStyle("textDecoration").indexOf("line-through")>-1},setLinethrough:function(t){t=t?this.getStyle("textDecoration")+" line-through":this.getStyle("textDecoration").replace("line-through",""),this.setStyle("textDecoration",t)},getOverline:function(){return this.getStyle("textDecoration").indexOf("overline")>-1},setOverline:function(t){t=t?this.getStyle("textDecoration")+" overline":this.getStyle("textDecoration").replace("overlin",""),this.setStyle("textDecoration",t)},_checkModifiedText:function(t,e){if(this.isEditing){this._textBeforeEdit!==this.text&&this.canvas.fire("object:modified",{target:this})}},setProperty:function(t,e){this._checkModifiedText(),this.saveState(),this[t]=e,this.fire("modified",{}),this.canvas&&(this.canvas.fire("object:modified",{target:this}),this.canvas.renderAll()),this._textBeforeEdit=this.text},setStyle:function(t,e){if(this._checkModifiedText(),this.saveState(),this.getStyles().styles=this.styles,this.setSelectionStyles&&this.isEditing&&this.selectionStart!==this.selectionEnd){var i={};void 0!==e?i[t]=e:delete i[t],this.setSelectionStyles(i),this.setCoords()}else{void 0!==e?this[t]=e:delete this[t];for(var n in this.styles)for(var o in this.styles[n])void 0!==this.styles[n][o][t]&&delete this.styles[n][o][t]}this.setCoords(),this.caching&&(this.dirty=!0),this.fire("modified",{}),this.canvas&&(this.canvas.fire("object:modified",{target:this}),this.canvas.renderAll())},generateTextStyle:function(){return{"font-style":this.isItalic()?"italic":"normal","font-weight":this.isBold()?700:400,"text-decoration":(this.isLinethrough()?"line-through ":"")+(this.isOverline()?"overline ":"")+(this.isUnderline()?"underline ":"")}}}),t.util.object.extend(t.Textbox.prototype,{toObject:t.Object.prototype.toObject}),t.util.object.extend(t.IText.prototype,{stateProperties:t.IText.prototype.stateProperties.concat(["styles"]),store_styles:function(){if(!Object.keys(this.styles).length)return null;var e={},i=!1;for(var n in this.styles)if(Object.keys(this.styles[n]).length){var o=!0;for(var a in this.styles[n])Object.keys(this.styles[n][a]).length&&(o&&(e[n]={},o=!1),e[n][a]=t.util.object.clone(this.styles[n][a]));o||(i=!0)}return i&&e||null},toObject:t.Object.prototype.toObject,initHiddenTextarea_native:t.IText.prototype.initHiddenTextarea,initHiddenTextarea:function(){this.initHiddenTextarea_native(),this.hiddenTextarea.style.width="9999px",this.hiddenTextarea.style["margin-left"]="-9999px"},maxStrokeWidth:function(){return Math.ceil(this.getFontSize()/10)}})}).call(e,i(0))},function(t,e,i){"use strict";(function(t){t.util.object.extend(t,{errors:[]}),t.Editor=function(e){e.id&&(this.id=e.id,delete e.id),this.initEventListeners(),this.fire("created",{options:e}),e=t.util.object.deepExtend({},this.defaultOptions,e||{}),this.init(e)},t.Editor.prototype=t.util.object.extend({},t.Observable,{defaultOptions:{},credentials:!1,ready:!1,optionsOrder:["canvasContainer","*","objects","slide"],plugins:{configuration:[],canvas:[]},eventListeners:{"canvas:created":[],"entity:created":[function(e){if(e.options.id||(e.options.id=t.util.idCounter++),e.target.eventListeners)for(var i in e.target.eventListeners){var n=e.target.eventListeners[i];if(n.constructor==Array)for(var o in n)e.target.on(i,n[o]);else e.target.on(i,n)}if(e.options.eventListeners)for(var i in e.options.eventListeners)e.target.on(i,e.options.eventListeners[i]);if(delete e.options.eventListeners,e.target._default_event_listeners)for(var i in e.target._default_event_listeners)e.target.on(i,e.target._default_event_listeners[i])}]},onSlideLoaded:function(){},callback:function(){},init:function(e){this._options=e,this._loading=!0,this.fire("loading:begin",{options:this._options}),t.util.order([this.preloader,this.loadConfiguration,this.initOptions,this.initialize,function(){},this.postloader,function(){setTimeout(this.callback.bind(this),0)},function(){this.ready=!0,this.fire("ready")}],this)},setCredentials:function(t){},initOptions:function(t,e){this.set(this._options,function(){t()})},configurationProperties:[],loadConfiguration:function(e,i){var n=this;if(this.configurationProperties){var o=!0,a=!1,s=void 0;try{for(var r,c=this.configurationProperties[Symbol.iterator]();!(o=(r=c.next()).done);o=!0){var l=r.value;this._options[l]&&(this._options.configuration||(this._options.configuration={}),this._options.configuration[l]=this._options[l])}}catch(t){a=!0,s=t}finally{try{!o&&c.return&&c.return()}finally{if(a)throw s}}}if(!this._options.configuration)return e();var u=this;t.util.promise.map(this._options.configuration,function(e){return new Promise(function(i,n){e.constructor===Function?e.length?e(i,n):i(e()):t.util.data.loadJson(e,i,n)})}).then(function(e){t.util.object.extend(u._options,e),delete n._options.configuration}).then(e,i)},createCanvas:function(e){var i;if(t.isLikelyNode){var n=e.slideWidth,o=e.slideHeight,a=t.Canvas.prototype.zoom||1;i=t.createCanvasForNode(n*a,o*a)}else i=new t.Canvas({application:this,width:e.width,height:e.height});return delete e.width,delete e.height,this.fire("canvas:created"),i},getLibraryElements:function(t){return[]},_setCanvasContainer:function(t,e){this.canvasContainer=t,this._options.slide&&(this.canvas=this.createCanvas(this._options.slide),this.canvasContainer.appendChild(this.canvas.wrapperEl),this.slides=[this.canvas])},setCanvasContainer:function(t,e){var i=this;if(t.constructor===String){var n=document.getElementById(t);n?(this._setCanvasContainer(n),e()):$(document).ready(function(){i._setCanvasContainer(document.getElementById(t)),e()})}else this._setCanvasContainer(t)},dispose:function(){this.canvas.dispose()},setEventListeners:function(t){this.on(t)},initEventListeners:function(){this.__eventListeners||(this.__eventListeners={});for(var t in this.eventListeners)this.__eventListeners[t]||(this.__eventListeners[t]=[]),this.__eventListeners[t]=this.__eventListeners[t].concat(this.eventListeners[t])},cacheProperties:[],toObject:function(){var t={};if(this.slide)return this.slide.toObject();if(this.slides){t.slides=[];for(var e in this.slides)t.slides.push(this.slides[e].toObject())}return t},__set:t.Object.prototype.__set,_setObject:t.Object.prototype._setObject,set:t.Object.prototype.set,setOptions:t.Object.prototype.setOptions}),t.app=function(e){return new t.Editor(e)}}).call(e,i(0))},function(t,e,i){"use strict";(function(t){t.util.object.extend(t.StaticCanvas.prototype,{setBackgroundColor:function(t,e){var i=this;return this.loaded&&this.saveState(["backgroundColor"]),this.__setBgOverlayColor("backgroundColor",t,function(){i.renderAll(),i.loaded&&i.fire("modified"),e&&e()})},storeProperties:["objects","backgroundColor","overlayColor","backgroundImage","overlayImage","width","height"],toObjectSync:function(e){e=(e||[]).concat(this.storeProperties);var i={objects:this.getObjects(),width:this.originalWidth||this.width,height:this.originalHeight||this.height};return t.util.populateWithProperties(this,i,e),this.fire("before:object",{object:i}),i},store_backgroundImage:function(){return this.backgroundImage&&!this.backgroundImage.excludeFromExport?this.backgroundImage.toObject():null},store_overlayImage:function(){return this.overlayImage&&!this.overlayImage.excludeFromExport?this.overlayImage.toObject():null},store_backgroundColor:function(){return this.backgroundColor?this.backgroundColor.toObject?this.backgroundColor.toObject():this.backgroundColor:""},store_width:function(){return this.originalWidth||this.width},store_height:function(){return this.originalHeight||this.height},store_overlayColor:function(){return this.overlayColor?this.overlayColor.toObject?this.overlayColor.toObject():this.overlayColor:""},store_objects:function(){var e=this,i=t.util.object.filter(this.getObjects(),{stored:!0});return i.length?i.map(function(t){return t.toObject(e.objectsPropertiesToInclude)}):null},toObject:t.Object.prototype.toObject,addText:function(){this.createObject({active:!0,position:"center",type:this.defaultTextType,clipTo:this.activeArea,text:this.deafultText,movementLimits:this.activeArea})}}),t.util.object.extend(t.Canvas.prototype,{type:"canvas",width:160,height:90,dotsPerUnit:1,scale:1,loaded:!1,interactive:!0,defaultTextType:"text",thumbSize:{width:50,height:100},contextTopImageSmoothingEnabled:!0,setInteractive:function(t){this.interactive=t},setContextTopImageSmoothingEnabled:function(){var t=this.contextTop;if(t.imageSmoothingEnabled)return void(t.imageSmoothingEnabled=this.contextTopImageSmoothingEnabled);t.webkitImageSmoothingEnabled=this.contextTopImageSmoothingEnabled,t.mozImageSmoothingEnabled=this.contextTopImageSmoothingEnabled,t.msImageSmoothingEnabled=this.contextTopImageSmoothingEnabled,t.oImageSmoothingEnabled=this.contextTopImageSmoothingEnabled},_onMouseUpInDrawingMode:function(t){this._isCurrentlyDrawing=!1,this.clipTo&&this.contextTop.restore();var e=this.getPointer(t);this.freeDrawingBrush.onMouseUp(e),this._handleEvent(t,"up")},_clearObjects:function(){var t=this._objects.splice(0);return this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),t},clearObjects:function(){var t=this._clearObjects();return this.clearContext(this.contextContainer),this.fire("canvas:cleared",{objects:t}),this.renderAll(),this},renderPageBackground:!1,initialize:function(e,i,n){this.processing=!0,e&&e.constructor==Object&&(i,i=e,e=null),i=i||{},i.application&&i.application.fire("entity:created",{target:this,options:i}),this.fire("before:created",{options:i}),this._objects=[],this._helpersObjects=[],this._createLowerCanvas(e),this.created=!0,this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this.calcOffset(),this.wrapperEl.appendChild(this.upperCanvasEl),this._createCacheCanvas(),this._setImageSmoothing(),this._initRetinaScaling(),this._initSize(),this.set(i),this.renderPageBackground&&(this.backgroundRect=new t.Rect({width:this.width,height:this.height,shadow:{offsetX:1,offsetY:3,blur:10,color:"rgba(0,0,0,0.6)"}})),this.updateFonts(),this.calcOffset(),this.on({"canvas:cleared":function(){var t={};t.previous=this.application.target,t.previous&&t.previous.fire("deselected"),this.application.target=null,this.application.fire("target:cleared",t)},"object:modified":function(t){this.application.target===t.target&&this.application.fire("target:modified",{target:t.target,canvas:this})},"selection:cleared":function(t){this.application.target&&(this.application.target.fire("deselected",t),this.application.target.canvas===this&&(t.previous=this.application.target,this.application.target=null,this.application.fire("target:cleared",t)))},"object:selected":function(t){t.previous=this.application.target,this.application.target=t.target,t.previous&&t.previous.fire("deselected",t),this.application.fire("target:changed",t)},"group:selected":function(t){t.previous=this.application.target,this.application.target=t.target,this.application.fire("target:changed",t)}}),this.fire("created"),this.processing=!1,this.renderAll()},animated:!1,setAnimated:function(e){this.animated=e,e&&t.util.requestAnimFrame(function e(){this.renderAll(),t.util.requestAnimFrame(e)}.bind(this))},create:function(){this.created=!0,this._initInteractive(),this._createCacheCanvas()}}),t.Canvas.fromJson=function(e,i,n){t.util.data.loadJson(e,function(e){new t.Canvas(n,e,i)})}}).call(e,i(0))},function(t,e,i){"use strict";(function(t){t.PREVIEW={NONE:0,SINGLE:1,ALL:2},t.Editor.prototype.configurationProperties.push("slides"),t.util.object.extend(t.Editor.prototype,{defaultOptions:t.util.object.extend(t.Editor.prototype.defaultOptions,{activeSlide:0}),previewMode:t.PREVIEW.SINGLE,optionsOrder:function(){var e=t.Editor.prototype.optionsOrder;return e.push("slides","activeSlide"),e}(),_setSlidesData:function(t){function e(){var t=!0,i=!1,n=void 0;try{for(var o,a=this.slides[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){if(!o.value.loaded)return!1}}catch(t){i=!0,n=t}finally{try{!t&&a.return&&a.return()}finally{if(i)throw n}}return this.fire("loading:end",{}),this.off("slide:loading:end",e),!0}var i=this;this.slides&&this.slides.forEach(function(t){t.processing=!0,t.dispose(),t.lowerCanvasEl.parentNode.removeChild(t.lowerCanvasEl)}),this.slides=[],this.canvas&&(this.canvas._objects.length=0),t.forEach(function(t){return i.addSlide(t)}),e.call(this)||this.on("slide:loading:end",e)},_parse_function_json:function(e,i,n){if("function"==typeof e){if(e.length)return e.call(this,i,n);e=e.call(this)}t.util.data.loadJson(e,i,n)},setSlide:function(t,e){var i=this;this._parse_function_json(t,function(t){i._setSlidesData([t]),i._setActiveSlide(i.slides[0]),e&&e()},function(){e&&e()})},setSlides:function(t,e){var i=this;this._parse_function_json(t,function(t){i._setSlidesData(t),e&&e()},function(){e&&e()})},_setActiveSlide:function(t){this.canvas!==t&&(this.canvas&&this.canvas.setActive(!1),this.canvas=t,this.canvas.setActive(!0),this.canvas._onResize(),this.fire("slide:changed",{canvas:this.canvas}))},setActiveSlide:function(t){var e=this,i=void 0;if(!this.slides)return!1;t.constructor===Number?i=this.slides[t]:t.constructor===String||(i=t),this.activeSlide!==i&&(i.loaded?this._setActiveSlide(i):i.on("loading:end",function(){e._setActiveSlide(i)}))},unloadUnactiveSlides:!1,addSlide:function(e){var i=this.createCanvas(e);return i.load(e),this.slides.push(i),this.previewMode===t.PREVIEW.ALL&&this.canvasContainer&&(this.canvasContainer.appendChild(i.wrapperEl),i._onResize()),i.on("mouse:down",function(){this.application.setActiveSlide(this)},!0),this.fire("slide:created",{target:i}),i},removeSlide:function(t){var e=this.slides,i=e.indexOf(t);if(e.splice(i,1),t.fire("removed"),t===this.activeSlide&&delete this.activeSlide,0===this.slides.length){var n={},o=this.addSlide(n);o.load(o.object),this.setActiveSlide(0)}else this.slides.length>i?this.setActiveSlide(i):this.setActiveSlide(i-1)},moveSlide:function(t,e){var i=this.slides,n=i.indexOf(t);e=parseInt(e),i.splice(n,1),i.splice(e,0,t)},replaceSlide:function(t,e){var i=this.slides,n=i[e],o=i.indexOf(t);o<e?(i.splice(e,1,t),i.splice(o,1,n)):(i.splice(o,1,n),i.splice(e,1,t))},setActiveSlideByIndex:function(t){this.setActiveSlide(this.slides[t])},setActiveSlideById:function(e){this.setActiveSlide(t.util.object.findWhere(this.slides,{id:e}))},duplicateSlide:function(t){t=t.toObject();var e=this.addSlide(t);e.load(e.object)},nextSlide:function(){var t=this.slides.indexOf(this.activeSlide);t<this.slides.length-1&&this.setActiveSlide(t+1)},prevSlide:function(){var t=this.slides.indexOf(this.activeSlide);t>0&&this.setActiveSlide(t-1)},gotoSlide:function(t){this.setActiveSlide(t-1)},nextSlideAvailable:function(){return this.slides.indexOf(this.activeSlide)<this.slides.length-1},prevSlideAvailable:function(){return this.slides.indexOf(this.activeSlide)>0},createSlidesListElement:function(e){var i=this,n=t.util.createCanvasElement();n.setAttribute("height",140),t.util.createThumb(e,n),e.$slideElement=$("<div>").addClass("slide").click(function(){return i.setActiveSlide(e)}).append(n).append($("<span>").html(e.title)),e.description&&e.$slideElement.attr("title",e.description),e.on({modified:function(){this.renderAll()},removed:function(){e.$slideElement.remove()}}),this.$slideListInner.append(e.$slideElement)},createSlidesList:function(t){var e=this;return this.$slideList=this.$slidesList=$("<div>").addClass("slides-list"),this.$slideListInner=$("<div>").addClass("slides-list-inner"),this.$slideList.append(this.$slideListInner),t.append(this.$slidesList),this.slides.forEach(function(t){return e.createSlidesListElement(t)}),this.on("slide:created",function(t){e.createSlidesListElement(t.target)}),{list:this.$slideList}},updateThumbs:function(){var t=this;this.slides.forEach(function(e){e.canvas.setDimensions({width:t.canvas.width,height:t.canvas.height})})}}),t.util.object.extend(t.Canvas.prototype,{title:"New Slide",setActive:function(e){var i=$(this.wrapperEl);!1===e?(this.discardActiveGroup(),this.discardActiveObject(),this.renderAll(),this.application.previewMode===t.PREVIEW.SINGLE?i.remove():i.removeClass("active")):this.application.previewMode===t.PREVIEW.SINGLE?this.application.canvasContainer.appendChild(this.wrapperEl):i.addClass("active")},unique:!1,required:!1,removeSlide:function(){this.application.removeSlide(this)},duplicateSlide:function(){this.application.duplicateSlide(this)}})}).call(e,i(0))},function(t,e,i){"use strict";(function(t){t.util.object.extend(t.Object.prototype,{_removeDefaultValues:function(t,e){var i=this.application.getKlass(e||t.type).prototype,n=this.application&&this.application.getDefaultProperties(i)||{};for(var o in t)if("type"!==o){var a=void 0!==n[o]?n[o]:i[o];t[o]===a&&delete t[o];var s="[object Array]"===Object.prototype.toString.call(t[o])&&"[object Array]"===Object.prototype.toString.call(a);s&&0===t[o].length&&0===a.length&&delete t[o]}return t}}),t.util.object.extend(t.Canvas.prototype,{_removeDefaultValues:t.Object.prototype._removeDefaultValues}),t.util.object.extend(t.Editor.prototype,{optionsOrder:function(){var e=t.Editor.prototype.optionsOrder;return e.splice(e.indexOf("canvasContainer"),0,"prototypes"),e}(),getDefaultProperties:function(e){if(this.prototypes){var i,n;if(e.constructor===String){i=t.util.string.capitalize(t.util.string.camelize(e),!0);n=this.getKlass(i).prototype}else n=e,i=t.util.string.capitalize(t.util.string.camelize(n.type),!0);var o=n&&n.__proto__&&n.__proto__.type&&this.getDefaultProperties(n.__proto__)||{},a=i&&t.util.object.clone(this.prototypes[i])||{};return t.util.object.extend(o,a),o}},prototypes:{Object:{includeDefaultValues:!1},Canvas:{includeDefaultValues:!1}},setUtils:function(e){e&&(t.util.object.extend(this.util||{},e),this.options.util&&t.util.object.extend(t.util,this.options.util),this.options.fabric&&t.util.object.extend(t,this.options.fabric),delete this.options.fabric,delete this.options.util)},klasses:[],getKlass:function(e){var i=t.util.string.camelize(e.charAt(0).toUpperCase()+e.slice(1));return this.klasses[i]||t[i]},setPrototypes:function(e){var i=t.util.object.deepExtend({},this.prototypes,e);this.prototypes=i,i.eventListeners&&(i.eventListeners.$extend="array");for(var n in i){var o=i[n];for(var a in o)if(o[a]&&o[a].$extend){var s=o[a].$extend;o[a]="array"==s?t.util.object.extendArraysObject(t[n].prototype[a],o[a]):"deep"==s?t.util.object.deepExtend(t[n].prototype[a],o[a]):t.util.object.extend(t[n].prototype[a],o[a]),delete o[a].$extend}if(o.$super){var r=t[o.$super];if(!r)continue;delete o.$super,o.type=t.util.string.toDashed(n);var c=o.fromObject||r.fromObject;delete o.fromObject;var l=this.klasses[n]=t.util.createClass(r,o);l.fromObject=c.bind(l)}}i.Editor&&t.util.object.deepExtend(this,i.Editor),this.actions&&this.actions.constructor==Function&&(this.actions=this.actions.call(this))},_populateWithDefaultProperties:function(e,i){if(!e.disableDefaultProperties){t.util.object.defaults(i,this.getDefaultProperties(e,i));for(var n in i){var o=i[n];if("+"==n[0]){var a=n.substr(1),s=e.get(a);s=s instanceof Array?s.slice().concat(o):t.util.object.extend({},s,o),i[a]=s,delete i[n]}}}},eventListeners:t.util.object.extendArraysObject(t.Editor.prototype.eventListeners,{created:function(e){e.options.prototypes&&e.options.prototypes.Editor&&t.util.object.defaults(e.options,e.options.prototypes.Editor)},"entity:created":function(t){t.target.application=this,this._populateWithDefaultProperties(t.target,t.options),delete t.options.type,delete t.options.application}})})}).call(e,i(0))},function(t,e,i){"use strict";(function(t){t.ActionsMixin={setActions:function(e){for(var i in e)e[i].id=i;this.actions=t.util.object.deepExtend({},this.__proto__.actions,e)},_getActionValue:function(e){var i=this,n=void 0;do{if(!n){var o=this.application.getDefaultProperties("Object").actions;n=o&&o[e]}if(i.actions&&i.actions[e])return t.util.object.extend({},i.actions[e],n)}while(i=i.__proto__);return t.util.object.extend({},n)}},t.util.object.extend(t.Editor.prototype,{_getActionValue:function(t){return this.actions[t]},setActions:function(e){for(var i in e){for(var n in e[i])e[i][n].id=n;if("Editor"!=i){this.prototypes[i]||(this.prototypes[i]={});var o=this.getKlass(i);this.prototypes[i].actions=t.util.object.deepExtend({},o&&o.prototype.actions,e[i])}else this.actions=t.util.object.deepExtend(this.actions,e[i])}},actions:{save:{title:"save project",className:"fa fa-floppy-o",action:function(){var t=this.toObject();this.save(t)}},addSlide:{title:"add slide",className:"fa fa-plus",action:function(){var t={},e=this.addSlide(t);e.canvas.load(e.object),this._setActiveSlide(e)}}}}),t.util.object.extend(t.Canvas.prototype,t.ActionsMixin,{actions:{clear:{title:"Clear",className:"fa fa-trash"},clearObjects:{title:"Clear All",className:"fa fa-trash"},backgroundColor:{title:"Set Background Colour",type:"color"},addText:{className:"fa fa-font",title:"Add Text",action:function(){this.addText()}},removeSlide:{title:"add slide",className:"fa fa-trash-o"},duplicateSlide:{title:"duplicate slide",className:"fa fa-clone"}}}),t.util.object.extend(t.Object.prototype,t.ActionsMixin,{actions:{movement:{className:"fa fa-arrows",menu:["moveUp","moveDown","moveLeft","moveRight"]},moveUp:{className:"fa fa-arrow-up",type:"key",keyCode:38},moveDown:{className:"fa fa-arrow-down",type:"key",keyCode:40},moveLeft:{className:"fa fa-arrow-left",type:"key",keyCode:37},moveRight:{className:"fa fa-arrow-right",type:"key",keyCode:39},boundingRect:{type:"label",template:'<dt>L:</dt><dd class="{leftClass}" title="{left}">{roundLeft}</dd><dt>T:</dt><dd class="{topClass}"  title="{top}">{roundTop}</dd><dt>R:</dt><dd class="{rightClass}" title="{right}">{roundRight}</dd><dt>B:</dt><dd class="{bottomClass}"  title="{bottom}">{roundBottom}</dd>',value:{observe:"modified scaling moving rotating",get:function(){var t=this.getBoundingRect();if(this.movementLimits){if(this.movementLimits==this.canvas)var e=this.canvas.viewportTransform,i={left:e[4],top:e[5],width:(this.canvas.originalWidth||this.canvas.width)*e[0],height:(this.canvas.originalHeight||this.canvas.height)*e[3],right:0,bottom:0};else i=this.movementLimits.getBoundingRect();t.bottom=this.movementLimits.height-t.height;var n=t.top-i.top,o=t.left-i.left,a=i.width-t.width-o,s=i.height-t.height-n}else n=t.top,o=t.left,s=this.canvas.height-t.height-t.top,a=this.canvas.width-t.width-t.left;return{topClass:n>0?"positive":n<0?"negative":"zero",bottomClass:s>0?"positive":s<0?"negative":"zero",leftClass:o>0?"positive":o<0?"negative":"zero",rightClass:a>0?"positive":a<0?"negative":"zero",top:n,left:o,bottom:s,right:a,roundTop:Math.round(n),roundLeft:Math.round(o),roundBottom:Math.round(s),roundRight:Math.round(a)}}}},left:{type:"number",title:"left",value:{set:function(t){this.left=t,this.fire("modified"),this.canvas.fire("object:modified",{target:this}),this.canvas.renderAll()},get:function(){return this.left},observe:"modified"}},top:{type:"number",title:"top",value:{set:function(t){this.top=t,this.fire("modified"),this.canvas.fire("object:modified",{target:this}),this.canvas.renderAll()},get:function(){return this.top},observe:"modified"}},position:{title:"position",type:"menu",menu:["left","top"]},dimensions:{title:"dimensions",type:"menu",menu:{objectWidth:{type:"number",title:"width",value:{set:function(t){this.saveState(),this.dimensionsWidthValue=t,this.scaleToWidth(t*this.canvas.getZoom()),this.fire("modified",{}),this.canvas.fire("object:modified",{target:this}),this.canvas.renderAll(),delete this.dimensionsWidthValue},get:function(){return this.dimensionsWidthValue?this.dimensionsWidthValue:Math.round(this.getBoundingRect().width/this.canvas.getZoom())},observe:"modified"}},objectHeight:{type:"number",title:"height",value:{set:function(t){this.saveState(),this.scaleToHeight(t*this.canvas.getZoom()),this.dimensionsHeightValue=t,this.fire("modified",{}),this.canvas.fire("object:modified",{target:this}),this.canvas.renderAll(),delete this.dimensionsHeightValue},get:function(){return this.dimensionsHeightValue?this.dimensionsHeightValue:Math.round(this.getBoundingRect().height/this.canvas.getZoom())},observe:"modified"}}}},center:{className:"fa fa-bullseye",title:"Center",action:function(){this.center(),this.setCoords()}},flip:{className:"fa fa-arrows-h",title:"flip",action:"flip"},flop:{className:"fa fa-arrows-v",title:"flop"},order:{className:"fa fa-exchange fa-rotate-90",menu:["bringForward","sendBackwards","bringToFront","sendToBack"]},bringForward:{title:"bring forward",className:"fa fa-level-up",enabled:"!onTop",observe:function(t){this.canvas.on("object:added object:removed object:replaced",t)},destroy:function(t){this.canvas.off("object:added object:removed object:replaced",t.enableCallback)}},sendBackwards:{title:"send backwards",className:"fa fa-level-down",enabled:"!onBottom",observe:function(t){this.canvas.on("object:added object:removed object:replaced",t)},destroy:function(t){this.canvas.off("object:added object:removed object:replaced",t.enableCallback)}},bringToFront:{title:"bring to front",className:"fa fa-level-up",enabled:"!onTop",observe:function(t){this.canvas.on("object:added object:removed object:replaced",t)},destroy:function(t){this.canvas.off("object:added object:removed object:replaced",t.enableCallback)}},sendToBack:{title:"send to back",className:"fa fa-level-down",enabled:"!onBottom",observe:function(t){this.canvas.on("object:added object:removed object:replaced",t)},destroy:function(t){this.canvas.off("object:added object:removed object:replaced",t.enableCallback)}},remove:{className:"fa fa-trash",title:"remove",key:"Delete"},duplicate:{className:"fa fa-clone",title:"duplicate"},fill:{type:"color",title:"fill",value:"fill"},rotateLeft:{className:"fa fa-rotate-left",title:"rotate Left",action:function(){this._normalizeAngle();var t=90*(Math.floor(this.angle/90)-1);this.rotate(t),this.canvas.renderAll()}},rotateRight:{className:"fa fa-rotate-right",title:"rotate Right",action:function(){this._normalizeAngle();var t=90*(Math.floor(this.angle/90)+1);this.rotate(t),this.canvas.renderAll()}},stretch:{className:"fa fa-arrows-alt",title:"stretch",action:function(){this._normalizeAngle();var t=this.angle%90;this.angle=90*Math.floor(this.angle/90),t>45&&(this.angle+=90);var e=void 0,i=void 0;90===this.angle||270===this.angle?(e=this.canvas.width/this.height,i=this.canvas.height/this.width):(e=this.canvas.width/this.width,i=this.canvas.height/this.height),this._setOriginToCenter(),this.set({scaleX:e,scaleY:i,left:this.canvas.width/2,top:this.canvas.height/2}),this.canvas._restoreOriginXY(this),this.setCoords(),this.canvas.renderAll()}}}}),t.util.object.extend(t.Text.prototype,{actions:{fill:{type:"color",title:"fill",value:{get:function(){return"string"==typeof this.fill?this.fill:"transparent"},set:function(t){this.setFill(t)}}},textBgcolor:{type:"color",title:"bgColor",value:"bgColor"},textTextbgcolor:{type:"color",title:"textBgColor",value:"textBgColor"},textBold:{type:"checkbox",title:"bold",value:"bold",className:"fa fa-bold"},textItalic:{type:"checkbox",title:"italic",value:"italic",className:"fa fa-italic"},textUnderline:{type:"checkbox",title:"Underline",value:"underline",className:"fa fa-underline"},textLinethrough:{type:"checkbox",insert:"advancedTextStyleTools",title:"Linethrough",value:"linethrough",className:"text-linethrough fa fa-strikethrough"},textOverline:{type:"checkbox",insert:"advancedTextStyleTools",title:"overline",value:"overline",className:"text-overline fa fa-overline"},textAlign:{type:"options",title:"text align",insert:"textAligmentTools",value:"textAlign",menu:{textAlignCenter:{title:"align center",option:"center",className:"fa fa-align-center"},textAlignLeft:{title:"align left",option:"left",className:"fa fa-align-left"},textAlignRight:{title:"align right",option:"right",className:"fa fa-align-right"},textAlignJustify:{title:"align justify",option:"justify",className:"fa fa-align-justify"}}},fontFamily:{type:"fontFamily",title:"font family",className:"fa fa-font",value:"fontFamily",data:function(){return this.application.fonts}},textFontSize:{insert:"textFontSizeTools",type:"number",title:"fontSize",value:"fontSize"},advancedColorsTools:{className:"colors",type:"menu",title:"colors",toggled:!0,menu:["fill","textBgcolor","textTextbgcolor","fill"]},textStyle:{type:"menu",title:"text style",toggled:!0,className:"fa fa-font",style:"generateTextStyle",menu:["textBold","textItalic","textUnderline","textLinethrough","textOverline","textAlign","fontFamily","textFontSize"]}}}),t.util.object.extend(t.IText.prototype,{actions:t.util.object.extend({enterEditing:{insert:"editTool",className:"fa fa-pencil-square-o",title:"edit"}},t.Text.prototype.actions)}),t.util.object.extend(t.Image.prototype,{actions:{source:{type:"effect",className:"fa fa-file-image-o",title:"source",actionParameters:function(t,e){e.target.application.createGallery(e.target,t)}}}})}).call(e,i(0))},function(t,e,i){"use strict";(function(t){var e={_saveStateOverwritten:t.Object.prototype.saveState,getProperties:function(t){var e={},i=!0,n=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var r=a.value;e[r]=this["store_"+r]?this["store_"+r]():this[r]}}catch(t){n=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(n)throw o}}return e},saveState:function(e){var i=this.includeDefaultValues;return i||(this.includeDefaultValues=!0),0===t.version.indexOf("1.7")?e?e.length?this._stateProperties=this.getProperties(e):this._saveStateOverwritten(e):this._stateProperties=this.toObject():this.originalState=this.toObject(),i||(this.includeDefaultValues=!1),this},getModifiedStates:function(){var e=void 0;e=0===t.version.indexOf("1.7")?this._stateProperties:this.originalState;var i=0,n={original:{},modified:{}},o=this.includeDefaultValues;o||(this.includeDefaultValues=!0);var a=this.toObject();o||(this.includeDefaultValues=!1);for(var s in e)if(e[s]!==a[s]){if(e[s]instanceof Object&&JSON.stringify(e[s])===JSON.stringify(a[s]))continue;n.original[s]=e[s],n.modified[s]=a[s],i++}return i&&n}};t.util.object.extend(t.Object.prototype,e),t.util.object.extend(t.Canvas.prototype,e,{_finalizeCurrentTransform:function(){var t=this._currentTransform,e=t.target;e._scaling&&(e._scaling=!1),e.setCoords(),this._restoreOriginXY(e),e.fire("modified",{}),this.fire("object:modified",{target:e})}})}).call(e,i(0))},function(t,e,i){"use strict";(function(t){t.util.object.extend(t,{debugTimeout:0}),t.StaticCanvas.prototype.enableConsoleDebugging=function(){window.canvas=this,this.on("object:selected",function(t){window.target=t.target}),this.on("selection:updated",function(t){window.target=t.target}),this.on("selection:cleared",function(t){window.target=null}),this.on("selection:created",function(t){window.target=t.target})},t.StaticCanvas.prototype.setDebug=function(t){t&&this.enableConsoleDebugging()},t.Editor&&t.util.object.extend(t.Editor.prototype,{logEvents:t.Object.prototype.logEvents=function(t){var e={};for(var i in t)e[i]=0,this.on(t[i],function(t,e){}.bind(this,i))},setDebug:function(e){t.debug=e,this.on("ready",function(){this.enableDebugging()})},enableDebugging:function(){if(t.debug){window[t.debug]=this,window.canvas=this.canvas,window.target=null,this.on("target:changed",function(){window.target=this.target}),this.on("slide:changed",function(t){window.canvas=t.canvas})}}}),t.Object.prototype.debug=function(t){var e=document.createElement("canvas");e.width=t?this.width:this.width+2,e.height=t?this.height:this.height+2;var i=e.getContext("2d");t||(i.lineWidth=1,i.strokeStyle="yellow",i.strokeRect(0,0,this.width+2,this.height+2),i.setLineDash([4,4]),i.strokeStyle="#000000",i.strokeRect(0,0,this.width+2,this.height+2)),i.translate(this.width/2+1,this.height/2+1);var n=this.clipTo;delete this.clipTo,this.render(i,!0),this.clipTo=n,window.open(e.toDataURL(),"_blank")}}).call(e,i(0))},function(t,e,i){"use strict";(function(t){t.util.object.extend(t.Canvas.prototype,{stretchable:!1,_onResize:function(){if(this.stretchable){if(!this.wrapperEl.parentNode)return;var t=$(this.wrapperEl.parentNode),e=($(this.wrapperEl).position(),this.application&&this.application.widthMargin||0),i=t.width()-e,n=t.height();this.application&&this.application.onResize?(this.application.onResize({width:i,height:n},{width:this.originalWidth,height:this.originalHeight}),this.calcOffset()):this.setDimensions({width:i-e,height:n})}else this.calcOffset()},setStretchable:function(t){this.stretchable=t,this._onResize()}})}).call(e,i(0))},function(t,e,i){"use strict";(function(t){t.Editor.prototype.configurationProperties.push("templates"),t.util.object.extend(t.Editor.prototype,{setTemplates:function(t){this.templates=t}}),t.util.object.extend(t.Canvas.prototype,{eventListeners:t.util.object.extendArraysObject(t.Canvas.prototype.eventListeners,{"loading:begin":function(t){this._applyTemplate(t.options)}})}),t.util.object.extend(t.StaticCanvas.prototype,{eventListeners:t.util.object.extendArraysObject(t.StaticCanvas.prototype.eventListeners,{"loading:begin":function(t){this._applyTemplate(t.options)}}),_applyTemplate:function(e){var i=e.template;if(i){var n=this.getTemplate(i);t.util.object.extend(e,n.data),n.data.width&&(e.originalWidth=n.data.width),n.data.height&&(e.originalHeight=n.data.height)}},getTemplate:function(e){return t.util.object.findWhere(this.application.templates,{id:e})},updateSlideTemplate:function(t){t.canvas.setTemplate(t.canvas.template),this.canvas.template=t.canvas.template,this.activeSlide==t&&this.canvas.setTemplate(t.canvas.template)},updateTemplate:function(t){for(var e in this.slides)this.slides[e].canvas.template==t&&this.updateSlideTemplate(this.slides[e])}})}).call(e,i(0))},function(t,e,i){"use strict";(function(t){t.util.object.extend(t.StaticCanvas.prototype,{_toFront:function(t){if(t.layer){for(var e=this._layers.indexOf(t.layer),i=0;i<this._objects.length&&!(this._objects[i].layer&&this._layers.indexOf(this._objects[i].layer)>e);i++);this._objects.splice(i,0,t)}else this._objects.push(t)},_toBack:function(t){if(t.layer)for(var e=this._layers.indexOf(t.layer),i=this._objects.length;i--;)if(this._objects[i].layer&&this._layers.indexOf(this._objects[i].layer)<e)return void this._objects.splice(i+1,0,t);this._objects.unshift(t)},add:function(){var t=!0,e=!1,i=void 0;try{for(var n,o=arguments[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){var a=n.value;this._toFront(a),this._onObjectAdded&&this._onObjectAdded(a)}}catch(t){e=!0,i=t}finally{try{!t&&o.return&&o.return()}finally{if(e)throw i}}return this.renderOnAddRemove&&this.renderAll(),this},sendToBack:function(e){if(!e)return this;var i,n,o,a=this._activeGroup;if(e===a)for(o=a._objects,i=o.length;i--;)n=o[i],t.util.removeFromArray(this._objects,n),this._objects.unshift(n);else t.util.removeFromArray(this._objects,e),this._toBack(e),this.fire("object:replaced",{target:e});return this.renderAll&&this.renderAll()},bringToFront:function(e){if(!e)return this;var i,n,o,a=this._activeGroup;if(e===a)for(o=a._objects,i=0;i<o.length;i++)n=o[i],t.util.removeFromArray(this._objects,n),this._objects.push(n);else t.util.removeFromArray(this._objects,e),this._toFront(e),this.fire("object:replaced",{target:e});return this.renderAll&&this.renderAll()}}),t.util.object.extend(t.Object.prototype,{onTop:function(){var t=this.canvas._objects,e=t.indexOf(this);return e===t.length-1||!(!this.layer||!t[e+1].layer||t[e+1].layer==this.layer)},onBottom:function(){var t=this.canvas._objects,e=t.indexOf(this);return 0===e||!(!this.layer||!t[e-1].layer||t[e-1].layer==this.layer)},sendBackwards:function(e){return this.group?t.StaticCanvas.prototype.sendBackwards.call(this.group,this,e):(this.canvas.sendBackwards(this,e),this.canvas.fire("object:replaced",{target:this})),this},bringForward:function(e){return this.group?t.StaticCanvas.prototype.bringForward.call(this.group,this,e):(this.canvas.bringForward(this,e),this.canvas.fire("object:replaced",{target:this})),this}})}).call(e,i(0))},function(t,e,i){"use strict";(function(t){t.Image.filters.Sharpen=t.util.createClass(t.Image.filters.Convolute,{type:"Sharpen",initialize:function(t){t=t||{},this.opaque=t.opaque,this.matrix=t.matrix||[0,-1,0,-1,5,-1,0,-1,0]}}),t.Image.filters.Sharpen.fromObject=function(e){return new t.Image.filters.Sharpen(e)},t.Image.filters.Blur=t.util.createClass(t.Image.filters.Convolute,{type:"Blur",initialize:function(t){t=t||{};var e=1/9;this.opaque=t.opaque,this.matrix=t.matrix||[e,e,e,e,e,e,e,e,e]}}),t.Image.filters.Blur.fromObject=function(e){return new t.Image.filters.Blur(e)},t.Image.filters.Emboss=t.util.createClass(t.Image.filters.Convolute,{type:"Emboss",initialize:function(t){t=t||{},this.opaque=t.opaque,this.matrix=t.matrix||[1,1,1,1,.7,-1,-1,-1,-1]}}),t.Image.filters.Emboss.fromObject=function(e){return new t.Image.filters.Emboss(e)},t.Image.filters.Mask.prototype.maskFilter=!0;var e={Brightness:{brightness:{value:100,min:0,max:255}},Noise:{noise:{value:100,min:0,max:1e3}},Convolute:{opaque:{value:!0,type:"boolean"},matrix:{value:[1,1,1,1,1,1,1,1,1],type:"matrix"}},Blur:{},Sharpen:{},Emboss:{},Multiply:{color:{type:"color",value:"#F0F"}},Pixelate:{blocksize:{value:4,min:2,max:20}},Tint:{color:{type:"color",value:"#3513B0"},opacity:{value:1,min:0,max:1,step:.1}},Mask:{mask:{type:"image",value:{src:"photos/explosion.png"}},channel:{value:0}},Blend:{color:{type:"color",value:"#3513B0"},mode:{value:"add",options:[{value:"add",title:"Add"},{value:"diff",title:"Diff"},{value:"subtract",title:"Subtract"},{value:"multiply",title:"Multiply"},{value:"screen",title:"Screen"},{value:"lighten",title:"Lighten"},{value:"darken",title:"Darken"}]}}};for(var i in e)t.Image.filters[i].prototype.options=e[i];t.Image.getFiltersList=function(e){e=e||t.Image.prototype;var i=[];for(var n in e.availableFilters){var o=t.Image.filters[e.availableFilters[n]],a={type:e.availableFilters[n]};if((!o.prototype.custom||e.customFilters)&&(!o.prototype.maskFilter||e.maskFilter)){if(o.prototype.caman){if(!e.camanFilters)continue;a.caman=!0}else if(!e.fabricFilters)continue;o.prototype.options&&(a.options=t.util.object.clone(o.prototype.options)),a.text=o.prototype.title||e.availableFilters[n],i.push(a)}}return i},t.util.object.extend(t.Image.prototype,{camanFilters:!1,fabricFilters:!0,customFilters:!1,maskFilter:!1,getFiltersData:function(){var e=t.Image.getFiltersList(this);for(var i in this.filters){var n=t.util.object.findWhere(e,{type:t.util.string.capitalize(this.filters[i].type)});n&&(n.enabled=!0)}return e},availableFilters:["Grayscale","Sepia","Sepia2","Invert","Blur","Sharpen","Emboss","Blend","Tint","Multiply","Noise","Brightness","Pixelate","GradientTransparency","Mask"],getFilter:function(e){e=t.util.string.uncapitalize(e);for(var i in this.filters)if(t.util.string.uncapitalize(this.filters[i].type)===e)return this.filters[i];return!1},setFilter:function(e){var i=!1;if(e.replace?this.filters=[]:(i=t.util.object.findWhere(this.filters,{type:e.type}),i=i&&i.toObject()||!1),e.type)var n=t.util.string.capitalize(e.type,!0),o=e.options&&t.util.object.clone(e.options);else n=!1,o=!1;this._set_filter(n,o,i)},_set_filter:function(e,i){if(e)var n=this.getFilter(e);if(n&&i)for(var o in i)n[o]=i[o];else n&&!i&&this.filters.splice(this.filters.indexOf(n),1);!n&&i&&this.filters.push(new t.Image.filters[e](i)),this.applyFilters(this.canvas.renderAll.bind(this.canvas))},applyFilters:function(e,i,n,o){if(i=i||this.filters,n=n||this._originalElement){var a,s,r=t.util.createImage(),c=this.canvas?this.canvas.getRetinaScaling():t.devicePixelRatio,l=this.minimumScaleTrigger/c,u=this;if(0===i.length)return this._element=n,e&&e(this),n;var h=t.util.createCanvasElement();return h.width=n.naturalWidth,h.height=n.naturalHeight,h.getContext("2d").drawImage(n,0,0,n.naturalWidth,n.naturalHeight),i.forEach(function(t){t&&(o?(a=u.scaleX<l?u.scaleX:1,s=u.scaleY<l?u.scaleY:1,a*c<1&&(a*=c),s*c<1&&(s*=c)):(a=t.scaleX,s=t.scaleY),t.applyTo(h,a,s),o||"Resize"!==t.type||(u.width*=t.scaleX,u.height*=t.scaleY))}),r.width=h.width,r.height=h.height,t.isLikelyNode?(r.src=h.toBuffer(void 0,t.Image.pngCompression),u._element=r,!o&&(u._filteredEl=r),e&&e(u)):(r.onload=function(){u._element=r,!o&&(u._filteredEl=r),e&&e(u),r.onload=h=null},r.src=h.toDataURL("image/png")),h}},actions:t.util.object.extend(t.Image.prototype.actions,{filters:{title:"фильтр",itemClassName:"filters-selector",className:"fa fa-filter",type:"select",dropdown:{theme:"toolbar-filters-selector",previewWidth:0,previewHeight:22,templateSelection:function(t,e){return t.any?t.text:$('<span><span class="color-span" style="background-color:'+t.text+'"></span>'+t.text+"</span>")},templateResult:function(e,i,n){var o=$("<span>"+e.text+"</span>"),a=$("<canvas>");return t.util.drawFilter(a[0],n.target._originalElement||n.target._element,e.id,{width:n.dropdown.previewWidth,height:n.dropdown.previewHeight}),o.prepend(a),o}},value:{set:function(e,i){var n=!1;if("none"===e)e=!1;else{var o=t.util.object.findWhere(i,{id:e});o.enabled=!o.enabled;for(var a in o.options)$.isNumeric(o.options[a])&&(o.options[a]=parseFloat(o.options[a]));if(o.enabled){n={};for(var a in o.options)n[a]=o.options[a].value}}this.setFilter({type:e,options:n,replace:!0})},get:function(){return this.filters.length?t.util.string.capitalize(this.filters[0].type,!0):"none"},options:function(){var t=this.getFiltersData();for(var e in t)t[e].id=t[e].type;return[{id:"none",text:"original",enabled:!this.filters||!this.filters.length}].concat(t)}}}})}),t.util.drawFilter=function(e,i,n,o){i.constructor===String?t.util.loadImage(i,function(i){t.util._drawFilter(e,i,n,o)}):t.util._drawFilter(e,i,n,o)},t.util._drawFilter=function(e,i,n,o){var a=e.getContext("2d");if(o&&(o.width&&o.height?(e.width=o.width,e.height=o.height):o.width?(e.width=o.width,e.height=o.width*(i.height/i.width)):o.height&&(e.height=o.height,e.width=o.height*(i.width/i.height))),a.drawImage(i,0,0,e.width,e.height),n&&"none"!=n){if(n=t.util.string.capitalize(n,!0),t.Image.filters[n])var s=new t.Image.filters[n];else var s=t.Image.filters[n].create({});if(s){var r=t.Image.filters[n].prototype.options,c={};for(var l in r)c[l]=r[l].value;t.util.object.extend(s,c),s.imageData=a.getImageData(0,0,e.width,e.height),s.applyTo(e)}}}}).call(e,i(0))},function(t,e,i){"use strict";(function(t){t.util.object.extend(t.Editor.prototype,{galleries:null,setGalleries:function(e){e.draggableArea&&(this.draggableArea=e.draggableArea,delete e.draggableArea),this.galleries=[];for(var i in e){var n=e[i];n&&(this.galleries[i]=this.createGallery(n.container,t.util.object.map(n.elements,n.mapper),n.options))}},getFontsLibrary:function(){return _.map(this.fonts,function(t){return{fontFamily:t,fontSize:25,category:"fontFamily",role:"fontFamily",text:t,type:"text"}})},createGallery:function(e,i,n){return n||(n={}),n.application=this,new t.Gallery(e,n,i)}}),t.Gallery=function(t,e,i){e.application&&(this.application=e.application),t.constructor===String&&(t=$("#"+t)),this.element=t,this.elements=[],this.options=this._getElementsListOptions(e),this.addElements(i)},t.Gallery.prototype={draggableArea:"body",imageWidth:300,imageHeight:150,_addCanvasEl:function(e,i,n){var o=document.createElement("canvas");n.width=o.width=this.imageWidth,n.height=o.height=this.imageHeight;var a=new t.StaticCanvas(o,{application:this.application});a.clear(),i.position="center",a.createObject(i,function(s){s.getBoundingRect();t.util.object.extend(i,{scaleX:s.scaleX,scaleY:s.scaleY,width:s.width,height:s.fheight,left:s.left,top:s.top,strokeWidth:s.strokeWidth}),delete i.position,a.add(s),a.renderAll(),n.src=o.toDataURL(),delete s.canvas,e[0].data=i,e[0].element=s})},removeElement:function(t){t.element.remove();var e=this.elements.indexOf(t);this.elements.splice(e,1),this.fire("removed",{item:t,target:this,index:e}),this.application&&this.application.fire("gallery:removed",{item:t,target:this,index:e})},addElements:function(t){var e=this;t.forEach(function(t){return e.add(t)})},_getElementsListOptions:function(e){return t.util.object.defaults(e||{},{removable:!1,draggable:!0,itemClass:"list-item",removeButtonTemplate:'<span class="fa fa-close">',activate:function(i){var i=t.util.object.clone(i);e.activateOptions&&(e.activateOptions.width||e.activateOptions.height)?(delete i.width,delete i.height):(i.width=$(i.activeElement).width(),i.height=$(i.activeElement).height()),t.util.object.extend(i,e.activateOptions),delete i.left,delete i.top;var n=this.canvas;n.target&&n.isAccepts(n.target.accepts,i)?n.target.setData(i):n.setData(i)}})},add:function(e){var i=this,n=this.options,o=$("<li>").addClass(n.itemClass),a={data:e,element:o};if(o[0].data=e,n.element&&(e=n.element(e)),e.title){var s=$("<span>").text(e.title).addClass("element-title");o.append(s)}var r=null;if(n.render)r=n.render(e);else switch("fontFamily"===e.role&&(e.preview="fontFamily"),"image"!==e.type&&"video"!==e.type||(e.preview||(e.preview=e.type),e.role||(e.role=e.type)),e.preview){case"fontFamily":r=$("<span>").css({color:e.fill||t.Text.prototype.fill,"font-family":e.fontFamily,"font-size":e.fontSize}).text(e.text);break;case"image":var c=e.image;if(!c){var c=new Image;c.onload=function(){e.width=c.width,e.height=c.height,e.image=c},c.crossOrigin="anonymous",c.src=t.util.getURL(e.src)}o[0].element=e,r=$(c);break;case"video":r=$("<video>"),r[0].crossOrigin="anonymous";for(var l in e.src)r.append($("<source>").attr({src:t.util.mediaRoot+e.src[l],type:l}));o[0].element=r[0];break;default:r=$("<img>"),this._addCanvasEl(o,e,r[0])}if(r.constructor==Array){var u=$("<span>");u.append(r),r=u}if(o.append(r),n.removable){var u=$(this.options.removeButtonTemplate);u.click(this.removeElement.bind(this,a)),o.append(u)}n.draggable&&r.draggable({draggable:"helper",droppable:".canvas-container",ngModel:e,onMove:function(t){i.application.canvas._onDragMove&&i.application.canvas._onDragMove(t.$event)},onDrop:function(t){i.application.canvas._onDrop(t.$event)},draggableArea:this.draggableArea}),e.activeElement=r,r.click(n.activate.bind(this.application,e)),this.element.append(o),this.elements.push(a)}},t.util.observable(t.Gallery.prototype)}).call(e,i(0))},function(t,e,i){"use strict";(function(t){t.GridSnapper=function(e,i){this.canvas=e,this.rect=t.util.getRect(e.width,e.height,e.offsets);for(var n in i)this[n]=i[n];this.createAligmentLines(e);var o=this;(this.canvas.wrapperEl||this.canvas.lowerCanvasEl).addEventListener("mousedown",function(){window.addEventListener("mouseup",o._window_mouse_up.bind(o))})},t.util.object.extend(t.Object.prototype,{griddable:!0,snapCorners:{tl:["tl","bl","br","tr"],bl:["tl","bl","br","tr"],tr:["tl","bl","br","tr"],br:["tl","bl","br","tr"],c:["c"]}}),t.util.object.extend(t.Canvas.prototype,{gridSize:25,gridColor:25,grid:!1,snapArea:3,snapping:!1,setSnapping:function(t){t?(this.on("object:moving",this.gridSnapMove),this.on("mouse:up",this.clearSnapping),this.drawSnapping&&this.on("after:render",this._drawSnapping)):(this.off("object:moving",this.gridSnapMove),this.off("mouse:up",this.clearSnapping),this.drawSnapping&&this.off("after:render",this._drawSnapping)),this.snapping=t},setGrid:function(e){e?(this.grid=new t.GridSnapper(this),this.grid.createGrid(),this.grid.createGridFrame()):this.grid&&(this.grid.removeGrid(),this.grid.removeGridFrame(),this.grid=null),this.renderAll()},clearSnapping:function(){this.clearContext(this.contextTop),this.snapTo=null},gridSnapMove:function(t){if(!t.e.shiftKey&&t.target.griddable){t.target.setCoords();var e=this.gridSnapMoveByAxe(t.target,"x"),i=this.gridSnapMoveByAxe(t.target,"y");return this.snapTo={x:e,y:i},this.snapCallback&&this.snapCallback(this.snapTo),this.snapTo}},_get_corner:function(t,e){if("c"==e){var i=t.getCenterPoint(),n=this.getZoom();return i.x*=n,i.y*=n,i}return t.oCoords[e]},gridSnapMoveByAxe:function(t,e){var i=this.getZoom(),n=void 0,o=void 0,a=void 0;"x"==e?(n=this.offsets.left,o=this.originalWidth-this.offsets.right-n,t.left,a="left"):(n=this.offsets.top,o=this.originalHeight-this.offsets.bottom-n,t.top,a="top");var s=t.snapCorners;for(var r in s){var c=this._get_corner(t,r);for(var l in this.supportLines){var u=this.supportLines[l],h=u[e]+this.rect[a];if(u[e]&&Math.abs(h-c[e])<this.snapArea)return t[a]=(h-(c[e]-t.oCoords.tl[e]))/t.canvas.viewportTransform[0],{value:h,corner:r,object2:u,line:!0}}}for(var d in s){var f=this._get_corner(t,d);for(var p in this.guidlines){var g=this.guidlines[p],v=g[e]*i;if(g[e]&&Math.abs(v-f[e])<this.snapArea)return t[a]=(v-(f[e]-t.oCoords.tl[e]))/t.canvas.viewportTransform[0],{value:v,corner:d,object2:g,line:!0}}}for(var m in s){var b=this._get_corner(t,m);if(this.grid.gridEnabled){var y=(b[e]-n+this.snapArea+this.grid._gridOffset[e])%this.gridSize;if(y<-this.gridSize)return!1;if(y<2*this.snapArea)return t[a]-=y-this.snapArea,{value:b[e]-y+this.snapArea,corner:m,grid:!0}}if(this.borderEnabled){var I=(o+this.offsets[a])*i;if(Math.abs(I-b[e])<this.snapArea)return t[a]=(I-(b[e]-t.oCoords.tl[e]))/i,{value:I,corner:m,grid:!0,corner2:"x"==e?"width":"height"};var C=this.offsets[a]*this.getZoom();if(Math.abs(C-b[e])<this.snapArea)return t[a]=(C-(b[e]-t.oCoords.tl[e]))/t.canvas.viewportTransform[0],{value:C,corner:m,grid:!0,corner2:a}}}for(var _ in this._objects){var A=this._objects[_];if(A.griddable&&A!=t&&A.visible&&!A.hiddenActive)for(var w in s){var j=this._get_corner(t,w);for(var x in s[w]){var S=s[w][x],M=this._get_corner(A,S);if(Math.abs(j[e]-M[e])<this.snapArea)return t[a]=(M[e]-(j[e]-t.oCoords.tl[e]))/t.canvas.viewportTransform[0],{value:M[e],corner:w,object2:A,corner2:S}}}}return!1},_drawSnapping:function(){var t=this.contextTop,e=this.snapTo;if(t.strokeStyle="#ffaaaa",this._currentTransform&&e&&this.clearContext(t),e){if(e.x){if(t.beginPath(),e.x.object2){var i=void 0,n=void 0;n=e.x.object2.oCoords,e.x.line?(t.moveTo(n.mt.x,0),t.lineTo(n.mt.x,this.height)):(t.moveTo(n.tl.x,n.tl.y),t.lineTo(n.tr.x,n.tr.y),t.lineTo(n.br.x,n.br.y),t.lineTo(n.bl.x,n.bl.y),t.lineTo(n.tl.x,n.tl.y),(i="c"==e.x.corner2?e.x.object2.getCenterPoint():n[e.x.corner2])&&(t.moveTo(i.x,i.y),t.arc(i.x,i.y,2,0,2*Math.PI)));n=(this._activeObject||this._activeGroup).oCoords,i="c"==e.x.corner?e.x.object2.getCenterPoint():n[e.x.corner],t.moveTo(i.x,i.y),t.arc(i.x,i.y,2,0,2*Math.PI)}t.moveTo(e.x.value,0),t.lineTo(e.x.value,this.height),t.stroke()}if(e.y){if(t.beginPath(),e.y.object2){var o=void 0,a=void 0;if(a=e.y.object2.oCoords,e.y.line)t.moveTo(0,a.ml.y),t.lineTo(this.width,a.ml.y);else{t.moveTo(a.tl.x,a.tl.y),t.lineTo(a.tr.x,a.tr.y),t.lineTo(a.br.x,a.br.y),t.lineTo(a.bl.x,a.bl.y),t.lineTo(a.tl.x,a.tl.y),o="c"==e.y.corner2?e.y.object2.getCenterPoint():a[e.y.corner2],o&&(t.moveTo(o.x,o.y),t.arc(o.x,o.y,2,0,2*Math.PI));a=(this._activeObject||this._activeGroup).oCoords,o="c"==e.y.corner?e.y.object2.getCenterPoint():a[e.y.corner],t.moveTo(o.x,o.y),t.arc(o.x,o.y,2,0,2*Math.PI)}}t.moveTo(0,e.y.value),t.lineTo(this.width,e.y.value),t.stroke()}}},toggleGrid:function(){var t=!this.grid;this.processing=!0,this.setGrid(t),this.setSnapping(t),this.processing=!1},actions:t.util.object.extend(t.Canvas.prototype.actions,{toggleGrid:{className:"fa fa-th",key:"i",title:"Grid"}})}),t.util.object.extend(t.Editor.prototype,{actions:t.util.object.extend(t.Editor.prototype.actions,{toggleGrid:{className:"fa fa-th",key:"i",title:"Grid",action:function(){this.canvas.toggleGrid()}}})}),t.GridSnapper.prototype={rect:null,supportLines:[],objects:[],enabled:!0,gridEnabled:!0,borderEnabled:!0,gridBorder:!1,gridSize:25,_window_mouse_up:function(){this.hideAligmentLines(),window.removeEventListener("mouseup",this._window_mouse_up)},creteSupportLines:function(){for(var e=this.rect,i=[],n=0;n<this.supportLines.length;n++){var o=this.supportLines[n];i.push(new t.Line(o.x?[o.x,0,o.x,e.height]:[0,o.y,e.width,o.y],{stroke:"red"}))}var a=new t.Group(i,{left:e.left,top:e.top,selectable:!1,evented:!1});return this.canvas._helpersObjects.push(a),a},removeGridFrame:function(){this.canvas._helpersObjects.splice(this.canvas._helpersObjects.indexOf(this.gridFrame),1),delete this.gridFrame},removeGrid:function(){this.canvas._helpersObjects.splice(this.canvas._helpersObjects.indexOf(this._gridObject),1),delete this._gridObject},updateGridSize:function(){this.removeGridFrame(),this.createGridFrame(),this._gridObject&&(this.removeGrid(),this.createGrid()),this.canvas.renderAll()},createGridFrame:function(){var e=[];return e.push(new t.Line([0,this.rect.top,this.canvas.width,this.rect.top],{stroke:this.canvas.gridColor})),e.push(new t.Line([0,this.rect.top+this.rect.height,this.canvas.width,this.rect.top+this.rect.height],{stroke:this.canvas.gridColor})),e.push(new t.Line([this.rect.left,0,this.rect.left,this.canvas.height],{stroke:this.canvas.gridColor})),e.push(new t.Line([this.rect.left+this.rect.width,0,this.rect.left+this.rect.width,this.canvas.height],{stroke:this.canvas.gridColor})),this.gridFrame=new t.Group(e,{selectable:!1,evented:!1}),this.canvas._helpersObjects.push(this.gridFrame),this.gridFrame},createGrid:function(){var e=this.rect,i=this.canvas.gridSize,n=[];this._gridOffset={y:(i-e.height%i)/2,x:(i-e.width%i)/2};for(var o=i-this._gridOffset.y;o<=e.height-1;o+=i)n.push(new t.Line([0,o,e.width,o],{stroke:this.canvas.gridColor}));for(var a=i-this._gridOffset.x;a<=e.width-1;a+=i)n.push(new t.Line([a,0,a,e.height],{stroke:this.canvas.gridColor}));return this._gridObject=new t.Group(n,{left:e.left,top:e.top,selectable:!1,evented:!1}),this.canvas._helpersObjects.push(this._gridObject),this._gridObject},snapCallback:function(t){this.snapTo=t},hideAligmentLines:function(t){this.xLine&&(this.xLine.setVisible(!1),this.xLine.canvas.renderAll()),this.yLine&&(this.yLine.setVisible(!1),this.xLine.canvas.renderAll())},createAligmentLines:function(){},gridSnapResize:function(t){this.setCoords();var e=this.gridSnapXResize(t),i=this.gridSnapYResize(t);return this.snapTo={x:e,y:i},this.snapCallback&&this.snapCallback(this.snapTo),this.snapTo},gridSnapXResize:function(t){var e=this,i=e.rect.left,n=e.rect.width,o=canvas._currentTransform.corner,a=[],s=!1;switch(o){case"tr":case"br":case"mr":s=!0,a=["tr","br"];break;case"tl":case"bl":case"ml":a=["bl","tl"]}Math.PI;for(var r in this.snapCorners){var c=this.snapCorners[r];if(-1!=a.indexOf(c)){var l=t.oCoords[this.snapCorners[r]],u=(l.x-i+e.area)%e.gridSize,h=Math.floor((l.x-i+e.area)/e.gridSize)+1;if(u<-e.gridSize)return!1;if(u<2*e.area&&l.x>i&&l.x<n+i){if(s){if("tr"==c){t.scaleX,e.gridSize,t.oCoords.tl.x,l.x,t.oCoords.tl.x}if("br"==c){t.scaleX,e.gridSize,t.oCoords.bl.x,l.x,t.oCoords.bl.x}}else{var d=(l.x+t.width*t.scaleX-((h-1)*e.gridSize+i))/t.width,f={left:t.oCoords.tr.x-(t.oCoords.tr.x-t.left)/t.scaleX*d,scaleX:d};"ml"!=c&&(f.top=t.oCoords.tr.y-(t.oCoords.tr.y-t.top)/t.scaleX*d)}return t.set(opt),{value:t.left+(l.x-t.oCoords.tl.x),corner:c}}}}return!1},gridSnapYResize:function(t){var e=this,i=e.rect.top,n=e.rect.height,o=canvas._currentTransform.corner,a=[],s=!1;switch(o){case"tr":case"tl":case"mt":a=["tl","tr"];break;case"bl":case"mb":case"br":s=!0,a=["bl","br"]}for(var r in this.snapCorners){var c=this.snapCorners[r];if(-1!=a.indexOf(c)){var l=t.oCoords[this.snapCorners[r]],u=(l.y-i+e.area)%e.gridSize,h=Math.floor((l.y-i+e.area)/e.gridSize)+1;if(u<-e.gridSize)return!1;if(u<2*e.area&&l.y>i&&l.y<n+i){if(s){if("bl"==c){t.scaleY,e.gridSize,t.oCoords.tl.y,l.y,t.oCoords.tl.y}if("br"==c){t.scaleY,e.gridSize,t.oCoords.tr.y,l.y,t.oCoords.tr.y}}else{var d=(l.y+t.width*t.scaleY-((h-1)*e.gridSize+i))/t.width;t.oCoords.bl.y,t.oCoords.bl.y,t.top,t.scaleY}return t.set(opt),{value:t.left+(l.y-t.oCoords.tl.y),corner:c}}}}return!1}}}).call(e,i(0))},function(t,e,i){"use strict";(function(t){t.objectsLibrary={text:{title:"Text",type:"text",text:"Текст"},iText:{title:"IText",type:"i-text",text:"Текст"},textbox:{title:"Textbox",type:"textbox",text:"Текст",width:100},line:{type:"line",strokeWidth:5,stroke:"black",scaleX:1,scaleY:1,x1:0,x2:100,y1:0,y2:50},triangle:{type:"triangle",width:function(t,e){return Math.min(t,e)-4},height:function(t,e){return Math.min(t,e)-4}},rectangle:{type:"rect",width:function(t,e){return Math.min(t,e)-4},height:function(t,e){return Math.min(t,e)-4}},polygon:{scaleX:1,scaleY:1,type:"polygon",points:function(t,e){return[{x:25,y:1},{x:31,y:18},{x:49,y:18},{x:35,y:29},{x:40,y:46},{x:25,y:36},{x:10,y:46},{x:15,y:29},{x:1,y:18},{x:19,y:18}]}},path:{type:"path",path:"m581.077942,2.537359c-2.053223,0.047071 -4.04071,0.188348 -6.108093,0.352907c-33.05542,2.663918 -62.235901,19.640541 -77.057678,44.925953l-7.8573,19.135319c1.698822,-6.633144 4.302979,-13.065384 7.8573,-19.135319c-26.430695,-22.16293 -63.531677,-32.388445 -100.192383,-27.574373c-36.661469,4.788353 -68.503082,24.041758 -85.901978,51.935225c-49.116486,-24.490013 -110.34288,-22.999454 -157.711807,3.860092c-47.369164,26.86068 -72.61673,74.40551 -64.941162,122.38308l5.021355,19.49968c-2.263329,-6.38501 -3.960793,-12.887695 -5.021355,-19.49968l-0.761948,1.798569c-41.179165,3.625244 -74.945375,29.465134 -83.716398,64.059235c-8.771805,34.597748 9.46701,70.085876 45.185621,87.96701l55.776558,10.973114c-19.480217,1.291962 -38.915543,-2.534515 -55.776558,-10.973114c-27.5478,24.96817 -33.888516,61.935303 -15.71492,92.467834c18.173733,30.524719 56.988899,48.110687 97.030457,44.11734l24.339722,-5.21109c-7.827499,2.651611 -15.960983,4.379059 -24.339722,5.21109c22.730042,33.857269 60.428192,58.556244 104.66893,68.383514c44.2491,9.81366 91.240952,4.014771 130.425949,-16.094604c31.96701,40.793823 88.707642,62.217468 145.596313,54.99707c56.902466,-7.219666 103.833984,-41.81427 120.501343,-88.770996l5.781433,-26.239532c-0.863708,8.909546 -2.742249,17.681366 -5.781433,26.239532c39.133301,20.753662 88.353333,21.927307 128.785095,3.049316c40.439819,-18.874084 65.665771,-54.869049 66.036133,-94.078247l-14.495605,-58.580597l-57.105713,-39.630768c44.163452,22.374573 71.992615,56.467255 71.601318,98.211365c52.49707,0.448181 97.103394,-35.956573 117.112427,-77.726288c20.011597,-41.769836 12.443604,-89.396759 -19.864929,-125.164642c13.401184,-26.637695 12.609985,-56.937332 -2.183472,-83.034088c-14.786194,-26.097893 -42.065491,-45.476891 -74.873047,-53.098335c-7.341431,-34.580929 -37.602661,-62.404482 -77.600708,-71.526293c-39.998474,-9.121368 -82.584839,2.123992 -109.364807,28.926123l-16.258179,22.19817c4.157959,-8.018612 9.583923,-15.495213 16.258179,-22.19817c-18.876953,-21.060713 -48.486023,-32.954061 -79.348938,-32.155401l0,0z",width:function(t,e){return t-4},height:function(t,e){return e-4}},ellipse:{type:"ellipse",rx:function(t,e){return t/2-4},ry:function(t,e){return e/2-4}},circle:{type:"circle",radius:function(t,e){return Math.min(t,e)/2-4}}},t.util.object.extend(t.Editor.prototype,{getLibraryElements:function(e){var i=t.util.object.findWhere(this.library,{id:e.category});t.util.object.cloneDeep(i.items);return t.util.object.map(t.util.object.cloneDeep(i.items),function(e){return t.util.object.defaults(e,i.template)})},setLibrary:function(e,i){var n=this;t.util.data.loadJson(e,function(e){e.forEach(function(e){e.id||(e.id=++t.util._idCounter)}),n.library=e,i()})},getObjectsList:function(e,i){var n=[];for(var o in t.objectsLibrary){var a=t.util.object.cloneDeep(t.objectsLibrary[o]);a.id=o,n.push(a),a.title=a.title||a.type,0===a.width&&(a.width=e),0===a.height&&(a.height=i);for(var s in a)a[s].constructor===Function&&(a[s]=a[s].call(a,e,i))}return n}}),t.Editor.prototype.configurationProperties.push("library")}).call(e,i(0))},function(t,e,i){"use strict";(function(t,e){t.util.mediaRoot="",t.util.addNoCache=!1,t.util._loadImage_overwritten=t.util.loadImage,t.util.object.extend(t.Editor.prototype,{optionsOrder:function(){var e=t.Editor.prototype.optionsOrder;return e.splice(e.indexOf("canvasContainer"),0,"mediaRoot"),e}(),setMediaRoot:function(i){if(i){if(i.indexOf(!0))return void(t.util.mediaRoot=i);var n;n=t.isLikelyNode?e:t.util.path.getParentDirectoryUrl(window.location.href);var o=i[i.length-1];"/"!=o&&"\\"!=o&&(i+="/"),i=t.util.path.resolve(n+i),t.util.mediaRoot=i}}}),t.util.loadResources=function(e,i,n,o){var a={},s=t.util.queueLoad(Object.keys(e).length,function(){i(a)});for(var r in e)!function(i){t.util.loadImage(e[i],function(t){a[i]=t,s()},n,o)}(r)},t.util.loadImage=function(e,i,n,o){function a(e){e?i.call(this,e):(t.errors.push({type:"image",message:"Image was not loaded"}),t.util._loadImage_overwritten(t.media.error,i,n,o||"Anonymous"))}e=t.util.getURL(e),t.debugTimeout?setTimeout(t.util._loadImage_overwritten.bind(this,e,a,n,o||"Anonymous"),t.debugTimeout):t.util._loadImage_overwritten(e,a,n,o||"Anonymous")},t.util.getURL=function(e){return 0===e.indexOf("blob")||0===e.indexOf("data")||-1!=e.indexOf("://")||e.startsWith("./")||(e=t.util.mediaRoot+e),t.util.addNoCache&&/^(http|https)\:\/\//.test(e)&&(e+="?no-cache="+(new Date).getTime()),e},t.util.loadVideo=function(e,i,n,o){function a(e){s.src=t.util.getURL(e),s.addEventListener("loadeddata",function(){i(s)},!0),s.load()}var s=document.createElement("video");for(var r in e)if("yes"==s.canPlayType(r))return this.mediaType=r,void a(e[r]);for(var r in e)if("maybe"==s.canPlayType(r))return this.mediaType=r,void a(e[r])},t.util._loadSVGFromURL_overwritten=t.loadSVGFromURL,t.loadSVGFromURL=function(e,i,n){0!==e.indexOf("data")&&-1==e.indexOf("://")&&(e=t.util.mediaRoot+e),t.util.addNoCache&&/^(http|https)\:\/\//.test(e)&&(e+="?no-cache="+moment().format("x")),t.util._loadSVGFromURL_overwritten(e,function(e){if(e)return i(e);var o=jQuery.parseXML(atob(t.media.error.substr(26)));t.parseSVGDocument(o.documentElement,function(t,e){i&&i(t,e)},n)},n)}}).call(e,i(0),"/")},function(t,e,i){"use strict";(function(t){t.util.uploadImageMaxSize={width:400,height:400},t.util.uploadImageMinSize={width:100,height:100},t.util.readImageFile=function(t,e){var i=new FileReader;i.onload=function(i){var n=i.target.result,o=n.substr(11,n.indexOf(";")-11),a=new Image;a.type=o,a.name=t.name,a.onload=function(){e(a,i)},a.src=n},i.readAsDataURL(t)},t.util.createUploadInput=function(e,i,n){var o=document.createElement("input");o.setAttribute("type","file"),e.multiple&&o.setAttribute("multiple",e.multiple),o.className="hidden",$(o).change(function(){if(o.files&&o.files.length)if(1===o.files.length)e.upload?e.upload(o.files[0],i):e.multiUpload&&e.multiUpload(o.files,i);else if(e.multiUpload)e.multiUpload(o.files,i);else for(var a=t.util.queueLoad(o.files.length,function(t){i(t)},function(t,e,i){n&&n(t,e,i)}),s=0;s<o.files.length;s++)e.upload(o.files[s],a)}),t.util.uploadInput=o},t.util.uploadImage=function(e,i,n){t.util.createUploadInput(e,i,n),$(t.util.uploadInput).trigger("click")},t.util.resizeUploadedImage=function(e,i){if("svg+xml"===e.type)return void i(e);if(e.width<t.util.uploadImageMinSize.width||e.height<t.util.uploadImageMinSize.height)return alert("Logo is too small. MInimum size is "+t.util.uploadImageMinSize.width+"x"+t.util.uploadImageMinSize.height),void i(!1);if(e.width>t.util.uploadImageMaxSize.width||e.height>t.util.uploadImageMaxSize.height){var n=t.util.getProportions(e,t.util.uploadImageMaxSize,"fit"),o=new t.Image.filters.ResizeDP,a=t.util.createCanvasElementWithSize(e);a.getContext("2d").drawImage(e,0,0),o.applyTo(a,n.width,n.height),i(a)}else i(e)},t.util.object.extend(t.Canvas.prototype,{uploadClass:"image",multipleUpload:!1,uploadImage:function(e){var i=this.application.uploader||{};e=t.util.object.extend({upload:i.upload,afterUpload:i.callback,validation:i.validation,data:!1,multiple:i.multiple,multiUpload:i.multipleUpload},e),e.afterUpload=e.afterUpload&&e.afterUpload.bind(this.application,this,e.data)||function(t,e,i,n){this.createImageObject(i)}.bind(this),e.upload=e.upload&&e.upload.bind(this.application)||function(i,n){if(e.validation&&!1===e.validation.call(this,i,e.data))return n();t.util.readImageFile(i,function(t,i){e.afterUpload(t,i),n()})}.bind(this.application),t.util.uploadImage({multiple:i.multiple,apiAfterUpload:e.afterUpload,multiUpload:e.multiUpload&&e.multiUpload.bind(this.application),upload:e.upload},function(){})},createImageObject:function(t){var e=this;t&&this.createObject({position:"center",active:!0,type:this.uploadClass,image:t,width:t.width,height:t.height,clipTo:this.activeArea,movementLimits:this.activeArea},function(t){return e.fitObject(t)})},actions:t.util.object.extend(t.Canvas.prototype.actions,{uploadImage:{className:"fa fa-upload",key:"u",title:"upload image",action:function(){this.uploadImage({data:"default"})}}})})}).call(e,i(0))},function(t,e,i){"use strict";(function(t){t.util.object.extend(t.Editor.prototype,{setInstagram:function(t){this.instagram=t,this.instagram.api=new InstagramApi(this.instagram.clientID,this.instagram.redirectURI)},instagramAuth:function(t){var e=this;if(this.instagram.accessToken)return t.call(this);var i=this.instagram.api.getAuthUrl(),n=(window.screen.width-700)/2,o=(window.screen.height-500)/2,a=window.open(i,"","width=700,height=500,left="+n+",top="+o);a.onload=function(){var i=setInterval(function(){try{a.location.hash.length&&(clearInterval(i),e.instagram.accessToken=a.location.hash.slice(14),a.close(),t(e.instagram.accessToken))}catch(t){}},100)}},getInstagramMedia:function(t){var e=this;this.instagramAuth(function(){e.instagram.api.user.media("self",e.instagram.accessToken,function(e){t(e.data)})})}}),t.util.object.extend(t.Canvas.prototype,{actions:t.util.object.extend(t.Canvas.prototype.actions,{instagram:{className:"fa fa-instagram",type:"effect",title:"instagram",effectClassName:"instagram-container",actionParameters:function(e,i){var n=this;this.application.getInstagramMedia(function(i){n.application.createGallery(e,t.util.object.map(i,function(t){return{type:"image",src:t.images.thumbnail.url,title:t.caption&&t.caption.text}}))})}}})})}).call(e,i(0))},function(t,e,i){"use strict";(function(t){t.util.object.extend(t.Editor.prototype,{setFacebook:function(t){this.facebook=t,function(t,e,i){var n,o=t.getElementsByTagName(e)[0];t.getElementById(i)||(n=t.createElement(e),n.id=i,n.src="https://connect.facebook.net/en_US/sdk.js",o.parentNode.insertBefore(n,o))}(document,"script","facebook-jssdk")},facebookAuth:function(t){FB.init({appId:this.facebook.appId,cookie:!0,xfbml:!0,version:"v2.9"}),FB.AppEvents.logPageView(),FB.getLoginStatus(function(t){})},getFacebookMedia:function(t){var e=this;this.facebookAuth(function(){e.facebook.api.user.media("self",e.facebook.accessToken,function(e){t(e.data)})})}}),t.util.object.extend(t.Canvas.prototype,{actions:t.util.object.extend(t.Canvas.prototype.actions,{facebook:{className:"fa fa-facebook",type:"effect",title:"facebook",effectClassName:"facebook-container",actionParameters:function(e,i){var n=this;this.application.getFacebookMedia(function(i){n.application.createElementsList(e,t.util.object.map(i,function(t){return{type:"image",src:t.images.thumbnail.url,title:t.caption&&t.caption.text}}))})}}})})}).call(e,i(0))},function(t,e,i){"use strict";(function(t){i(44),t.util.object.extend(t.Canvas.prototype,{setDroppable:function(t){!this.droppable&&t&&(this.droppable=!0,this.initDragAndDrop())},accepts:{},droppable:!1,isAccepts:function(t,e){for(var i in t)if(t[i].constructor==Array){if(-1==t[i].indexOf(e[i]))return!1}else{if("*"==t[i])continue;if(t[i]!=e[i])return!1}return!0},drop:function(t){this.setData(t)},initDragAndDrop:function(){this.on("mouse:drop",function(e){var i=e.x-e.offsetX,n=e.y-e.offsetY,o=e.width,a=e.height;if(e.data.scaleX)var s=e.data.scaleX/this.viewportTransform[0];else s=1,o/=this.viewportTransform[0];if(e.data.scaleY)var r=e.data.scaleY/this.viewportTransform[3];else r=1,a/=this.viewportTransform[3];var c=e.data.strokeWidth||0;e.data.left&&(i+=(e.data.left+c)/this.viewportTransform[0]),e.data.top&&(n+=(e.data.top+c)/this.viewportTransform[3]),e.data=t.util.object.extend({},e.data,{scaleX:s,scaleY:r,left:i,top:n,width:o,height:a,originalWidth:e.data.width,originalHeight:e.data.height}),this.fire("before:drop",e),e.target=this.findTarget(e.originalEvent),e.target&&!this.isDrawingMode&&e.target.fire("object:drop",e),e.target&&e.target.accepts?this.isAccepts(e.target.accepts,e.data)&&(e.target.deactivate(),e.target.setData(e.data)):this.isAccepts(this.accepts,e.data)&&this.setData(e.data)}),this.on("mouse:dragenter",function(t){t.target&&t.target.accepts&&(this.isAccepts(t.target.accepts,t.data)?(t.target.activate(),t.e.helper.css("cursor","alias"),this.setCursor("alias")):(t.e.helper.css("cursor","not-allowed"),this.setCursor("not-allowed")))}),this.on("mouse:dragleave",function(t){t.target&&t.target.accepts&&(this.isAccepts(t.target.accepts,t.data)&&(this._activated=!1,t.target.deactivate()),t.e.helper.css("cursor","pointer"))})}})}).call(e,i(0))},function(t,e,i){"use strict";(function(t){var e=t.Canvas.prototype._bindEvents,i=t.Canvas.prototype._onMouseDown,n=t.Canvas.prototype._onMouseUp,o=t.Canvas.prototype._initEventListeners,a=t.Canvas.prototype.removeListeners;t.util.object.extend(t.Canvas.prototype,{tapholdThreshold:2e3,_bindEvents:function(){e.call(this),this._onClick=this._onClick.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onTapHold=this._onTapHold.bind(this)},_onDoubleClick:function(t){var e=this,i=e.findTarget(t);e.fire("mouse:dblclick",{target:i,e:t}),i&&!e.isDrawingMode&&i.fire("dblclick",{e:t})},_onDrop:function(t){var e=this.getZoom();t.x/=e,t.y/=e,t.offsetX/=e,t.offsetY/=e,t.width=t.helper.width()/e,t.height=t.helper.height()/e;this.fire("mouse:drop",t)},_onDragMove:function(t){var e=this,i=e.findTarget(t.originalEvent);e.fire("mouse:dragmove",{target:i,e:t,data:t.data}),i&&!e.isDrawingMode&&i.fire("object:dragmove",{e:t,data:t.data}),this._last_target!=i&&(this._last_target&&(e.fire("mouse:dragleave",{target:this._last_target,e:t,data:t.data}),this._last_target.fire("object:dragleave",{e:t,data:t.data}),this._last_target=!1),i&&(e.fire("mouse:dragenter",{target:i,e:t,data:t.data}),i.fire("object:dragenter",{e:t,data:t.data}),this._last_target=i))},_onClick:function(t){var e=this,i=e.findTarget(t);e.fire("mouse:click",{target:i,e:t});var n=this._mouseDownCoordinatesEvent;delete this._mouseDownCoordinatesEvent,i&&!e.isDrawingMode&&n&&n.x===t.x&&n.y===t.y&&i.fire("object:click",{e:t})},_onTapHold:function(t){var e=this,i=e.findTarget(t);e.fire("touch:taphold",{target:i,e:t}),i&&!e.isDrawingMode&&i.fire("taphold",{e:t}),"touchend"===t.type&&null!=e.touchStartTimer&&clearTimeout(e.touchStartTimer)},_onMouseDown:function(t){i.call(this,t),this._mouseDownCoordinatesEvent=t;var e=this;if("touchstart"===t.type){var n=setTimeout(function(){e._onTapHold(t),e.isLongTap=!0},e.tapholdThreshold);return void(e.touchStartTimer=n)}if(3===t.which){var o=this.findTarget(t);e.fire("mouse:down",{target:o,e:t}),o&&!e.isDrawingMode&&o.fire("mousedown",{e:t})}},_onMouseUp:function(t){if(n.call(this,t),"touchend"===t.type){null!=this.touchStartTimer&&clearTimeout(this.touchStartTimer),this.isLongTap&&(this._onLongTapEnd(t),this.isLongTap=!1);var e=(new Date).getTime(),i=this.lastTouch||e+1,o=e-i;o<300&&o>0?(this.lastTouch=null,this._onDoubleTap(t)):this.lastTouch=e}},_onDoubleTap:function(t){var e=this,i=e.findTarget(t);e.fire("touch:doubletap",{target:i,e:t}),i&&!e.isDrawingMode&&i.fire("object:doubletap",{e:t})},_onLongTapEnd:function(t){var e=this,i=e.findTarget(t);e.fire("touch:longtapend",{target:i,e:t}),i&&!e.isDrawingMode&&i.fire("object:longtapend",{e:t})},_initEventListeners:function(){var e=this;o.call(e),t.util.addListener(e.upperCanvasEl,"click",e._onClick),t.util.addListener(e.upperCanvasEl,"dblclick",e._onDoubleClick),e.on("object:scaling",function(t){t.target&&t.target._scaling_events_enabled&&t.target.fire("scaling",t.e)}),e.on("object:selected",function(t){t.target&&t.target.fire("object:selected",t.e)}),e.on("mouse:over",function(t){t.target&&t.target.fire("mouse:over",t.e)}),e.on("mouse:out",function(t){t.target&&t.target.fire("mouse:out",t.e)})},removeListeners:function(){var e=this;a.call(e),t.util.removeListener(e.upperCanvasEl,"click",e._onClick),t.util.removeListener(e.upperCanvasEl,"dblclick",e._onDoubleClick)}})}).call(e,i(0))},function(t,e,i){"use strict";(function(t){i(6),t.util.object.extend(t.Image.prototype,{stateProperties:t.Image.prototype.stateProperties.concat(["crop"]),crop:null,store_crop:function(){if(!this.crop)return null;var e=t.Object.NUM_FRACTION_DIGITS,i={};return this.crop.left&&(i.left=t.util.toFixed(this.crop.left,e)),this.crop.top&&(i.top=t.util.toFixed(this.crop.top,e)),this.crop.scaleX&&(i.scaleX=t.util.toFixed(this.crop.scaleX,e)),this.crop.scaleY&&(i.scaleY=t.util.toFixed(this.crop.scaleY,e)),this.crop.angle&&(i.angle=t.util.toFixed(this.crop.angle,e)),i},setCrop:function(e){if(this.crop=e,!e)return void delete this._draw_transform_element;this._draw_transform_element||(this._draw_transform_element=new t.Image(this._element,{originX:"center",originY:"center"}),this._draw_transform_element.group=this),this._draw_transform_element.set({skewX:e.skewX||0,skewY:e.skewY||0,angle:e.angle||0,left:e.left*this.width||0,top:e.top*this.height||0,width:this.width,height:this.height,scaleX:e.scaleX||1,scaleY:e.scaleY||1})},_render:function(t,e){var i,n,o,a=this._findMargins();i=e?this.left:-this.width/2,n=e?this.top:-this.height/2,(this.crop||"slice"===this.meetOrSlice)&&(t.beginPath(),t.rect(i,n,this.width,this.height),t.clip()),!1===this.isMoving&&this.resizeFilters.length&&this._needsResize()?(this._lastScaleX=this.scaleX,this._lastScaleY=this.scaleY,o=this.applyFilters(null,this.resizeFilters,this._filteredEl||this._originalElement,!0)):o=this._element,this.crop?(this._draw_transform_element.canvas=this.canvas,this._draw_transform_element.render(t)):o&&t.drawImage(o,i+a.marginX,n+a.marginY,a.width,a.height),this._stroke(t),this._renderStroke(t)},cropPhotoEnd:function(){this.canvas.remove(this._transform_element),this.canvas.editingObject=null,this.application.off("target:changed target:cleared",this._endFoo),this.canvas._gridObject&&(this.canvas._gridObject.enabled=!0),this.set({hasControls:!0,evented:!0,flipX:this._transform_element.flipX,flipY:this._transform_element.flipY}),this._resetOrigin(),this._cropmode=!1,this.canvas.setActiveObject(this),this.canvas.renderAll(),this.canvas.stateful=!0,this.canvas.fire("object:modified",{target:this}),this.fire("modified",{})},updateCrop:function(){var t=this._transform_element,e=this,i=Math.PI/180,n=Math.cos(e.angle*i),o=Math.sin(e.angle*i),a=((t.left-e.left)*n+(t.top-e.top)*o)*(t.flipX?-1:1),s=(-(t.left-e.left)*o+(t.top-e.top)*n)*(t.flipY?-1:1);e.setCrop({skewX:t.skewX,skewY:t.skewY,left:a/e.width/e.scaleX,top:s/e.height/e.scaleY,scaleX:t.scaleX/e.scaleX,scaleY:t.scaleY/e.scaleY,angle:t.angle-e.angle})},toSVG_overwritten:t.Image.prototype.toSVG,getShape:function(){var e="M 0 0 L "+this.width+" 0 L "+this.width+" "+this.height+" L 0 "+this.height+" z",i=new t.Path(e,{});return i.group=this,i.canvas=this.canvas,t.Group.prototype.realizeTransform.call(this,i),delete i.group,i.set({originX:"center",originY:"center"}),i},toSVG:function(e){if(this.crop){var i="Clipped"+t.Object.__uid++;return'\n        <clipPath id="'+i+'">\n          '+this.getShape().toSVG(e)+'\n        </clipPath>\n        <g clip-path="url(#'+i+')">\n          '+this._createTransformedElement().toSVG_overwritten(e)+"\n        </g>"}return this.toSVG_overwritten(e)},_createTransformedElement:function(){var e;return this._draw_transform_element?(this._draw_transform_element.group=this,this.setCrop(this.crop),t.Group.prototype.realizeTransform.call(this,this._draw_transform_element),e=new t.Image(this._element,{angle:this._draw_transform_element.angle,left:this._draw_transform_element.left,top:this._draw_transform_element.top,width:this._draw_transform_element.width,height:this._draw_transform_element.height,scaleX:this._draw_transform_element.scaleX,scaleY:this._draw_transform_element.scaleY,skewX:this._draw_transform_element.skewX,skewY:this._draw_transform_element.skewY}),this.setCrop(this.crop)):e=new t.Image(this._element,{angle:this.angle,left:this.left,top:this.top,width:this.width,height:this.height,scaleX:this.scaleX,scaleY:this.scaleY}),e.set({originX:"center",originY:"center",movementLimits:this,clipTo:this,movementLimitMode:"content",hasControls:!0,selectable:!0,perPixelTargetFind:!1}),e.canvas=this.canvas,e.application=this.application,e},cropPhotoStart:function(){var t=this;this._cropmode=!0,this.canvas.stateful&&this.saveState(),this.canvas.stateful=!1,this.canvas.discardActiveGroup(),this.canvas._gridObject&&(this.canvas._gridObject.enabled=!1),this.set({width:this.width*this.scaleX,height:this.height*this.scaleY,scaleY:1,scaleX:1}),this._setOriginToCenter(),this._transform_element=this._createTransformedElement(),this._transform_element.parent=this,this._transform_element.on("rotating",this._transform_element.stepRotating),this._transform_element.set({tools:["cropZoomIn","cropZoomOut","cropEnd"],actions:{cropZoomIn:{className:"fa fa-search-plus ",title:"zoom in",action:function(){this.parent.cropZoomIn()}},cropZoomOut:{className:"fa fa fa-search-minus",title:"zoom out",action:function(){this.parent.cropZoomOut()}},cropEnd:{className:"fa fa-crop",title:"crop end",action:function(){this.parent.cropPhotoEnd()}}},opacity:.5,eventListeners:{"rotating moving scaling skewing":function(){this.parent.updateCrop()}}}),this.canvas.add(this._transform_element),this.canvas.on("mouse:wheel",function(e){e.target===t._transform_element&&(e.e.deltaY<0?t.cropZoomIn():t.cropZoomOut(),e.e.stopPropagation(),e.e.preventDefault())}),this.set({hasControls:!1,evented:!1}),this.canvas.setActiveObject(this._transform_element),this.active=!0;var e=this;this._endFoo=function(){e.cropPhotoEnd()},this.application.on("target:changed target:cleared",this._endFoo),this.fire("cropping:entered"),this.canvas.fire("frame:cropping:entered",{target:this}),this.canvas.editingObject=this,this.canvas.renderAll()},cropZoomOut:function(){this._transform_element.set({scaleX:Math.max(this._transform_element.scaleX-.1,.1),scaleY:Math.max(this._transform_element.scaleY-.1,.1)}),this.updateCrop(),this.canvas.renderAll()},cropZoomIn:function(){this._transform_element.set({scaleX:Math.max(this._transform_element.scaleX+.1,.1),scaleY:Math.max(this._transform_element.scaleY+.1,.1)}),this.updateCrop(),this.canvas.renderAll()},actions:t.util.object.extend(t.Image.prototype.actions,{crop:{title:"crop",className:"fa fa-crop",action:"cropPhotoStart",observe:"cropping:entered cropping:exited element:modified"}})})}).call(e,i(0))},function(t,e,i){"use strict";(function(t){t.Editor.prototype.configurationProperties.push("frames"),t.util.object.extend(t.Editor.prototype,{setFrames:function(e){this.frames=t.util.object.extend(e.map(function(e){return t.util.object.defaults(e,{frame:!1,shape:!1,type:"photo",role:"frame"})}))}})}).call(e,i(0))},function(t,e,i){"use strict";(function(t){t.util.createThumb=function(e,i){function n(){if(r.processing||!r.loaded)return!1;r.renderThumb(i),s=r.modified}function o(){if(this.loaded)this.renderThumb(i);else if(this.thumb){var t=new Image;t.onload=function(){var e=i.getContext("2d");e.clearRect(0,0,i.width,i.height),e.drawImage(t,0,0,i.width,i.height),s=this.modified},t.src=this.thumb}}function a(){var o=t.util.getProportions({width:e.originalWidth||e.width,height:e.originalHeight||e.height},{width:c,height:l},"fit");i.width=o.width,i.height=o.height,i.style.width=o.width+"px",i.style.height=o.height+"px",n()}var s,r=e,c=+i.getAttribute("width"),l=+i.getAttribute("height");l&&(i.style.height=i.height),e.on({"after:render":n,"dimensions:modified":a,"loading:end":a,modified:o}),i.setAttribute("title",e.title),a.call(e),o.call(e)},t.util.object.extend(t.StaticCanvas.prototype,{renderThumb:function(e,i){if(i=i||{objects:!0,clipped_area_only:!1,draw_background:!0},i.zoom)var n=i.zoom;else if(e.width)var n=e.width/(this.originalWidth||this.width);else var n=1;var o=this.viewportTransform[0],a=this.viewportTransform[4],s=this.viewportTransform[5];this.viewportTransform[4]=this.viewportTransform[5]=0,this.viewportTransform[0]=this.viewportTransform[3]=1,this.viewportTransform[0]=this.viewportTransform[3]=n,this.clipRect&&this.clipRect.setOpacity(0);var r={width:this.originalWidth||this.width,height:this.originalHeight||this.height};r.width=Math.ceil(r.width*n),r.height=Math.ceil(r.height*n);var c=t.util.createCanvasElement();c.width=r.width,c.height=r.height;var l=c.getContext("2d");this.clearContext(l),l.save(),l.transform.apply(l,this.viewportTransform),i.draw_background&&this._renderBackground(l),!i.clipped_area_only&&this.clipTo&&t.util.clipContext(this,l);var u;if(u=i.objects&&i.objects.constructor===Array?i.objects:!1!==i.objects?this._objects:[],i.clipped_area){u=t.util.object.clone(u);for(var h=u.length;h--;)u[h].clipTo!==i.clipped_area&&u.splice(h,1)}this._renderObjects(l,u),l.restore(),!i.clipped_area_only&&this.clipTo&&l.restore(),this._renderOverlay(l),l.restore(),this.clipRect&&this.clipRect.setOpacity(1);var d=e.getContext("2d");if(d.clearRect(0,0,e.width,e.height),i.clipped_area_only&&this.clipRect)var f={left:this.clipRect.left*n,top:this.clipRect.top*n,width:this.clipRect.width*n,height:this.clipRect.height*n};else var f={left:i.left*n||0,top:i.top*n||0,width:i.width*n||r.width,height:i.height*n||r.height};return i.angle?(d.rotate(-i.angle*Math.PI/180),d.drawImage(c,0,0,f.width+f.left+c.width,f.height+f.top+c.height,-f.left,-f.top,e.width+f.left+c.width,e.height+f.top+c.height)):d.drawImage(c,f.left,f.top,f.width,f.height,0,0,e.width,e.height),this.viewportTransform[0]=this.viewportTransform[3]=o,this.viewportTransform[4]=a,this.viewportTransform[5]=s,e}})}).call(e,i(0))},function(t,e,i){"use strict";(function(t){i(49),i(50);var e=t.Canvas.prototype._scaleObject;t.util.object.extend(t.Object.prototype,{store_movementLimits:function(){return this.movementLimits?this.movementLimits.id?"#"+this.movementLimits.id:this.movementLimits:null},setWholeCoordinates:function(t){this.wholeCoordinates=t,this.on("added modified",function(){this.wholeCoordinates&&this.set({left:Math.round(this.left),top:Math.round(this.top),width:Math.round(this.width),height:Math.round(this.height)})},!0)},setActive:function(t){this.canvas||this.on("added",function(){this.canvas.interactive&&this.canvas.setActiveObject(this)}),this.active=t},setPosition:function(t){"center"===t&&this.on("added",function(){this.center(),this.setCoords()},!0)},setMovementLimits:function(t){this.movementLimits||this.on({added:function(){this.canvas.interactive&&this.canvas._check_object_position(this)},rotated:function(t){var e=this;e.resizable&&(void 0!==pos.left&&(e.left<pos.left?(e.width+=e.left-pos.left,e.left=pos.left):e.width-=e.left-pos.left),void 0!==pos.top&&(e.top<pos.top?(e.height+=e.top-pos.top,e.top=pos.top):e.height-=e.top-pos.top)),this.canvas._check_object_position(this)},modified:function(t){this.canvas&&this.canvas._check_object_after_modified(this)}}),this.movementLimits=t}}),t.util.object.extend(t.StaticCanvas.prototype,{fitObject:function(e){var i,n,o=this.offsets;if(e.movementLimits&&"canvas"!=e.movementLimits){if(e.movementLimits.constructor!==Function){var a=e.movementLimits;i={left:a.left*a.scaleX,width:a.width*a.scaleX,top:a.top*a.scaleY,height:a.height*a.scaleY}}}else{var s=this.getZoom(),r=this.originalWidth||this.width/s,c=this.originalHeight||this.height/s;i={width:o?r-o.left-o.right:r,height:o?c-o.top-o.bottom:c}}n={width:i.width*this.fitIndex,height:i.height*this.fitIndex};var l=t.util.getProportions(e,n,"fit");e.resizable?(e.setOptions({width:e.width*l.scale,height:e.height*l.scale}),e.updateElement()):e.setOptions({scaleX:l.scale,scaleY:l.scale}),this.centerObject(e),e.setCoords(),this.fire("scaling")},centerObject:function(e){var i;return i=e.movementLimits?this._getMovementsLimitsCenter(e.movementLimits):this.getCenter(),this._centerObject(e,new t.Point(i.left,i.top)),this.renderAll(),this},getCenter:function(){return{top:this.originalHeight||this.height/2/this.getZoom(),left:this.originalWidth||this.width/2/this.getZoom()}},movementLimits:{left:!1,top:!1,right:!1,bottom:!1},setMovementLimits:function(t){return this.movementLimits=t,this},movementLimitMode:"fit",_getMovementsLimitsCenter:function(t){if("canvas"===t){var e=this.offsets,i=this.originalWidth||this.width,n=this.originalHeight||this.height;return{top:e.top+(n-e.top-e.bottom)/2,left:e.left+(i-e.left-e.right)/2}}if("string"==typeof t)var o=this.getObjectByID(t.substr(1));else o=t;var a=o.getCenterPoint();return{top:a.y,left:a.x}},_getMovementsLimitsRect:function(t){var e=this.offsets,i=this.originalWidth||this.width,n=this.originalHeight||this.height;if(t.constructor==Object)return t;var o=this.viewportTransform[0];if("canvas"===t){var a={left:e.left,top:e.top,width:i-e.left-e.right,height:n-e.top-e.bottom,right:e.right,bottom:e.bottom};return a.width*=o,a.height*=o,a}if(t.constructor==String){var s=this.getObjectByID(t.substr(1));if(!s)return!1}else s=t;var r=s.strokeWidth;s.strokeWidth=0,s.setCoords();var a=s.getBoundingRect();return s.strokeWidth=r,a.left/=o,a.top/=o,a.width/=o,a.height/=o,a.left-=this.viewportTransform[4]/o,a.top-=this.viewportTransform[5]/o,a.right=i-(a.left+a.width),a.bottom=n-(a.top+a.height),a},contentOffsets:5,getFixedPosition:function(t,e,i){var n=0,o=0,a=this.originalWidth||this.width,s=this.originalHeight||this.height,r=this.viewportTransform[0];this._currentTransform&&(n=e-this._currentTransform.lastX,o=i-this._currentTransform.lastY),void 0===e&&(e=t.left),void 0===i&&(i=t.top);var c=this._currentTransform&&this._currentTransform._bounding_rect||t.getBoundingRect(),l={left:(c.left+n-this.viewportTransform[4])/r,top:(c.top+o-this.viewportTransform[5])/r,width:c.width/r,height:c.height/r};l.right=a-(l.left+l.width),l.bottom=s-(l.top+l.height);var u=this._currentTransform&&this._currentTransform.movementLimits;if(!u)return{};var h={},d=u.left,f=u.right,p=u.top,g=u.bottom;if("content"===t.movementLimitMode&&(d-=l.width-this.contentOffsets,f-=l.width-this.contentOffsets,p-=l.height-this.contentOffsets,g-=l.height-this.contentOffsets),"fit"===t.movementLimitMode&&!t.resizable){if(!1!==d&&!1!==f&&(a=a-d-f,l.width>a)){var v=a/l.width;h.scaleX=v,h.scaleY=v}if(!1!==p&&!1!==g&&(s=s-p-g,l.height>s)){var v=s/l.height;t.scaleX*=v,t.scaleY*=v}}if("fit"===t.movementLimitMode||"content"===t.movementLimitMode){if(!1!==d){var m=d-l.left;m>0&&(h.left=e+m)}if(!h.left&&!1!==f){var m=f-l.right;m>0&&(h.left=e-m)}if(!1!==p){var m=p-l.top;m>0&&(h.top=i+m)}if(!h.top&&!1!==g){var m=g-l.bottom;m>0&&(h.top=i-m)}}return h},setPositionByOrigin:function(t,e,i){var n=this.translateToCenterPoint(t,e,i),o=this.translateToOriginPoint(n,this.originX,this.originY);this.set("left",o.x),this.set("top",o.y)}});var n=t.Canvas.prototype._translateObject,o=t.Canvas.prototype._beforeScaleTransform,a=t.Canvas.prototype._beforeTransform;t.Canvas.prototype._restoreOriginXY,t.Canvas.prototype._setupCurrentTransform;t.util.object.extend(t.Canvas.prototype,{_beforeScaleTransform_overwritten:o,_setupCurrentTransform_overwritten:t.Canvas.prototype._setupCurrentTransform,_beforeScaleTransform:function(e,i){this._beforeScaleTransform_overwritten(e,i),this._currentTransform.original.oCoords||(this._currentTransform.original.oCoords=t.util.object.cloneDeep(this._currentTransform.target.oCoords))},_setupCurrentTransform:function(t,e){this._setupCurrentTransform_overwritten(t,e),this._currentTransform._bounding_rect=e.getBoundingRect(),this._currentTransform.movementLimits=this._getMovementsLimitsRect(e.movementLimits||this.movementLimits)},getFixedPositionEasy:function(t,e,i){var n=this.originalWidth||this.width,o=this.originalHeight||this.height;void 0===e&&(e=t.left),void 0===i&&(i=t.top);this.viewportTransform[0];t.setCoords(),t.right=n-(t.left+t.width),t.bottom=o-(t.top+t.height);var a={left:e,top:i,width:t.width,height:t.height};return t.width>n&&(a.width=n),t.height>o&&(a.height=o),t.left<0&&(a.width+=t.left,a.left-=t.left),t.right<0&&(a.width+=t.right),t.top<0&&(a.height+=t.top),t.bottom<0&&(a.height+=t.bottom),a},drawInterestionLines:function(){var t=this._currentTransform;if(t&&t._intersections){var e=this.contextTop;e.beginPath(),e.strokeStyle="red";for(var i in t._intersections){var n=t._intersections[i];e.moveTo(n.x+5,n.y),e.arc(n.x,n.y,5,0,2*Math.PI)}for(var i in t.lines){var o=t.lines[i];e.moveTo(o[0].x,o[0].y),e.lineTo(o[1].x,o[1].y)}for(var i in t.mlLines){var o=t.mlLines[i];e.moveTo(o[0].x,o[0].y),e.lineTo(o[1].x,o[1].y)}e.stroke()}},_scaleObjectEasy:function(t,i,n){var o=this._currentTransform,a=o.target;o.corner;if(!a.movementLimits)return e.call(this,t,i,n);"fit"===a.movementLimitMode&&(t=Math.min(a.movementLimits.width,Math.max(0,t)),i=Math.min(a.movementLimits.height,Math.max(0,i)),e.call(this,t,i,n))},_scaleObject:function(i,n,o){function a(e,i){var n;"x"==i&&"m"!=e[0]?n=r.original.oCoords["m"+e[0]]:"y"==i&&"m"!=e[0]?n=r.original.oCoords["m"+e[1]]:(n=r.pointCenter,n={x:n.x+u[4],y:n.y+u[5]});var o=c.oCoords[e];r.lines.push([n,o]),r.mlLines.push([v.tl,v.tr]),r.mlLines.push([v.tr,v.br]),r.mlLines.push([v.br,v.bl]),r.mlLines.push([v.bl,v.tl]);var a=t.Intersection.intersectLinePolygon(n,o,[v.tl,v.tr,v.br,v.bl]);a.points.length&&(a.points[0].coordinate=i,r._intersections.push(a.points[0]))}var s=e.call(this,i,n,o),r=this._currentTransform,c=r.target,l=r.corner,u=this.viewportTransform;if(!c.movementLimits||"fit"!==c.movementLimitMode)return s;c.setCoords();var h=this.getZoom();if(c.movementLimits==this){var d=this.originalWidth||this.width,f=this.originalHeight||this.height,p=this.viewportTransform[4],g=this.viewportTransform[5];d*=h,f*=h;var v={tl:{x:p,y:g},tr:{x:p+d,y:g},bl:{x:p,y:g+f},br:{x:p+d,y:g+f}}}else{c.movementLimits.setCoords();var v=c.movementLimits.oCoords}switch(r.pointerOffset||(r.pointerOffset={x:i*u[0]-c.oCoords[l].x,y:n*u[3]-c.oCoords[l].y},r.pointCenter=c.getCenterPoint(),r.pointCenter.x*=h,r.pointCenter.y*=h,r.pointOriginal=r.original.oCoords[l]),r.pointTranformed=c.oCoords[l],r.mlLines=[],r.lines=[],r._intersection=null,r._intersections=[],l){case"tl":a("tl"),a("bl","x"),a("tr","y");break;case"tr":a("tr"),a("tl","y"),a("br","x");break;case"br":a("br"),a("tr","x"),a("bl","y");break;case"bl":a("bl"),a("tl","x"),a("br","y");break;case"mt":a("mt"),a("tl","y"),a("tr","y");break;case"mb":a("mb"),a("bl","y"),a("br","y");break;case"mr":a("mr"),a("tr","x"),a("br","x");break;case"ml":a("ml"),a("tl","x"),a("bl","x")}if(!r._intersections.length)return s;for(var m=r._intersections[0],p=r._intersections[0].distanceFrom(r.pointOriginal),b=1;b<r._intersections.length;b++){var y=r._intersections[b].distanceFrom(r.pointOriginal);y<p&&(m=r._intersections[b],p=y)}if(r._intersection=m,"equally"==o){var I={x:m.x-r.pointCenter.x,y:m.y-r.pointCenter.y},p=Math.sqrt(I.x*I.x+I.y*I.y);m.x-=I.x/p*c.strokeWidth,m.y-=I.y/p*c.strokeWidth}var C=(m.x+r.pointerOffset.x)/u[0],_=(m.y+r.pointerOffset.y)/u[3];return e.call(this,C,_,o)},movementLimitsOnAddAction:"translate",_check_object_after_modified:function(t){if(this._currentTransform){var e=this.getFixedPosition(t,t.left,t.top);switch(this._currentTransform.corner){case"mtr":void 0!==e.left&&t.set("left",e.left),e.top&&t.set("top",e.top);break;case"mr":case"br":if(void 0!==e.left)var i=t.left-e.left;if(void 0!==e.top)var n=t.top-e.top;i&&(!n||Math.abs(i)>Math.abs(n))?i<0?t.width+=i:t.width-=i:n&&(n<0?t.width+=n:t.width-=n)}}},_check_object_position:function(t){var e=this.getFixedPosition(t,t.left,t.top);"translate"==this.movementLimitsOnAddAction?(void 0!==e.left&&t.set("left",e.left),void 0!==e.top&&t.set("top",e.top)):(void 0!==e.left&&(t.left<e.left?(t.width+=t.left-e.left,t.left=e.left):t.width-=t.left-e.left),void 0!==e.top&&(t.top<e.top?(t.height+=t.top-e.top,t.top=e.top):t.height-=t.top-e.top)),e.scaleX&&(t.scaleX=t.scaleX*=e.scaleX),e.scaleY&&(t.scaleY=t.scaleY*=e.scaleY),t.setCoords(),this.renderAll()},_translateObject:function(t,e,i){var o=this._currentTransform.target;if(o.beforeTranslate){var a=o.beforeTranslate(t,e);if(!a)return!1;t=a.x,e=a.y}var s=n.call(this,t,e,i);if(this.movementLimits){var r=this.getFixedPosition(o,t,e);r.scaleX&&(o.scaleX=this._currentTransform.scaleX*=r.scaleX),r.scaleY&&(o.scaleY=this._currentTransform.scaleY*=r.scaleY),void 0===r.top&&void 0===r.left||(s=n.call(this,void 0!==r.left?r.left:t,void 0!==r.top?r.top:e))}return s||r.scaleX||r.scaleY},_beforeTransform:function(t,e){e&&e._beforeTransform?e._beforeTransform(t):a.call(this,t,e)},_beforeTransformNative:a})}).call(e,i(0))},function(t,e,i){"use strict";(function(t){i(6),t.util.object.extend(t.StaticCanvas.prototype,{optionsOrder:t.StaticCanvas.prototype.optionsOrder&&function(){var e=t.StaticCanvas.prototype.optionsOrder;return e.splice(e.indexOf("*"),0,"areas","offsets","helpers"),e}(),_helpersObjects:null,_areasObjects:null,_update_clip_rect:function(){return},setHelpers:function(t,e){return!1},storeProperties:t.StaticCanvas.prototype.storeProperties&&t.StaticCanvas.prototype.storeProperties.concat(["offsets","helpers","areas"]),areaActivating:!1,addElementsInsideActiveArea:!1,areaProperties:{originX:"left",originY:"top",fill:"transparent",strokeDashArray:[5,5],strokeWidth:1,stroke:"black",resizable:!0},setAreaProperty:function(t,e){this["area_"+t]=e,this._offsetsObject&&(this._offsetsObject[t]=e);var i=!0,n=!1,o=void 0;try{for(var a,s=this._areasObjects[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){a.value[t]=e}}catch(t){n=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(n)throw o}}this.renderAll()},setActiveArea:function(t){this.activeArea&&this.activeArea.setStroke("#000"),this.activeArea=t,t&&t.setStroke("#B7F1ED")},setAreaActivating:function(t){this.areaActivating=!0,this.on("object:modified",function(t){if(this._areasObjects&&!this.editingObject){var e=this.getPointer(event,!0),i=this._searchPossibleTargets(this._areasObjects,e);this._currentTransform&&i&&this.application.target.movementLimits!=i&&(this.application.target.set({movementLimits:i,clipTo:i}),this.setActiveArea(i))}}),this.on("mouse:down",function(t){if(this._areasObjects){var e=this.getPointer(t.e,!0),i=this._searchPossibleTargets(this._areasObjects,e);i&&this.setActiveArea(i)}})},_update_area_geometry:function(e,i){var n=this.originalWidth||this.width,o=this.originalHeight||this.height;if(i.path){i.width=i.width||e.width;var a=t.util.getRect(n,o,i),s=e.width/a.width;return void e.set({left:a.left,top:a.top,scaleX:s,scaleY:s})}var a=t.util.getRect(n,o,i);if(i.src){var s=a.width/img.width;e.set({left:a.left,top:a.top,strokeWidth:this.areaProperties.strokeWidth/s,scaleX:s,scaleY:s})}else e.set(a)},_renderOverlayObjects:function(t){this._offsetsObject&&this._offsetsObject.render(t),this._areasObjects&&this._renderObjects(t,this._areasObjects),this._helpersObjects&&this._renderObjects(t,this._helpersObjects)},createArea:function(e,i){var n,o=this,a=function(t,e){t.id=e.id,this._update_area_geometry(t,e),this._areasObjects.push(t),i()}.bind(this);if(e.path)n=new t.Path(e.path,this.areaProperties),e.top=n.top,e.left=n.left,e.width=n.width,e.height=n.height,a(n,e);else if(e.src){var s=new t.Pathfinder({});t.util.loadImage(e.src,function(i){s.setImage(i),s.mask=MagicWand.selectBackground(s.getInfo(),null,15);var r=s.getContours(),c=r[1].points,l=t.PencilBrush.prototype.convertPointsToSVGPath(c).join("");n=new t.Path(l,o.areaProperties),a(n,e)})}else n=new t.Rect(this.areaProperties),a(n,e);!(e.right||e.bottom||e.path)||this.originalWidth&&this.originalHeight||this.on("background-image:loaded",function(){this._update_area_geometry(n,e),this.renderAll()}.bind(this))},removeArea:function(t){},setOffsets:function(e){var i=this;if(null===e)this.offsets={top:0,right:0,bottom:0,left:0};else if(e.constructor===Number)this.offsets={top:e,right:e,bottom:e,left:e};else if(e.constructor===Array)switch(e.length){case 0:this.offsets={top:0,right:0,bottom:0,left:0};break;case 1:this.offsets={top:e[0],right:e[0],bottom:e[0],left:e[0]};break;case 2:this.offsets={top:e[0],right:e[1],bottom:e[0],left:e[1]};break;case 3:this.offsets={top:e[0],right:e[1],bottom:e[2],left:e[1]};break;case 4:this.offsets={top:e[0],right:e[1],bottom:e[2],left:e[3]}}else this.offsets=e;this.offsets.top||this.offsets.bottom||this.offsets.left||this.offsets.right?(this._offsetsObject=new t.Rect(this.offsets),this._offsetsObject.set(this.areaProperties),this._update_area_geometry(this._offsetsObject,this.offsets),this.on("viewport:scaled",function(){i._update_area_geometry(i._offsetsObject,i.offsets)}),this.on("dimensions:modified",function(){i._update_area_geometry(i._offsetsObject,i.offsets)}),this.areaActivating&&this.setActiveArea(this._offsetsObject||null)):this._offsetsObject=null,this.renderAll()},setAreas:function(e,i){if(this._areasObjects=[],e=e||[],this.areas)for(var n=this.areas.length;n--;)this.removeArea(this.areas[n].instance);this.areas=e;var o=t.util.queueLoad(e.length+1,function(){this.areaActivating&&this.setActiveArea(this._areasObjects[0]||null),i&&i.call(this)}.bind(this));for(var n in e)e[n].id||(e[n].id="__"+n),this.createArea(e[n],o);o(),this.renderAll()}}),t.util.object.extend(t.Canvas.prototype,{defaultOptions:t.util.object.extend(t.Canvas.prototype.defaultOptions,{}),eventListeners:t.util.object.extendArraysObject(t.Canvas.prototype.eventListeners,{"before:drop":function(t){if(this._backgroundLayer){var e=this.getPointer(t.originalEvent,!0),i=this._searchPossibleTargets(this._backgroundLayer,e);i&&(this.setActiveArea(i),t.data.clipTo="#"+i.id,t.data.movementLimits="#"+i.id)}}})})}).call(e,i(0))},function(t,e,i){"use strict";(function(t){var e=t.Object.prototype,i=t.Canvas.prototype._handleGrouping;t.Object.prototype.groupable=!0,t.util.object.extend(t.Canvas.prototype,{deactivateAllWithDispatch:function(t){var e=this.getActiveGroup(),i=this.getActiveObject(),n=i||e;return n&&this.fire("before:selection:cleared",{target:n,e:t}),this.deactivateAll(),n&&(this.fire("selection:cleared",{e:t,target:n}),n.fire("deselected")),this},_handleGrouping:function(t,e){this.fire("before:selection:created"),i.call(this,t,e)},_groupSelectedObjects:function(e){var i=this._collectObjects();i=t.util.object.filter(i,{groupable:!0}),1===i.length?this.setActiveObject(i[0],e):i.length>1&&(i=new t.Group(i.reverse(),{canvas:this}),i.addWithUpdate(),this.setActiveGroup(i,e),i.saveCoords(),this.fire("selection:created",{target:i}),this.renderAll())}}),e.clone=function(e,i){var n=this.toObject(i);return n.application=this.application,this.constructor.fromObject?this.constructor.fromObject(n,e):new t.Object(this.toObject(i))},e.cloneSync=function(){var e=t[t.util.string.camelize(t.util.string.capitalize(this.type))];if(e.async)var i=new e.fromObject(this,function(){});else var i=this.clone();return i.canvas=this.canvas,i},t.util.object.extend(t.Group.prototype,{isPossibleTarget:function(t,e){return null!==this.searchPossibleTargets(t,[e]).target},searchPossibleTargets:function(t,e){e||(e=this._objects);for(var i=this.canvas.getPointer(t,!0),n=e.length,o=this.canvas._normalizePointer(this,i),a={target:null,group:[]};n--;)this.canvas._checkTarget(o,e[n])&&(a.target||(a.target=e[n]),a.group.push(e[n]));return a},groupSelectable:!0,cloneSync:function(){var e=this._objects.map(function(t){return t.cloneSync()}),i=this.toObject();return delete i.objects,new t.Group(e,i,!0)},_calcBounds:function(t){for(var e,i,n=[],o=[],a=["tr","br","bl","tl"],s=0,r=this._objects.length;s<r;++s)if(e=this._objects[s],!e.notSelectableInTheGroup){e.setCoords();for(var c=0;c<4;c++)i=a[c],n.push(e.oCoords[i].x),o.push(e.oCoords[i].y)}this.set(this._getBounds(n,o,t))},initialize_overwritten:t.Group.prototype.initialize,isSelectionGroup:function(){return-1===this.canvas._objects.indexOf(this)},initialize:function(t,e){if(t.constructor!=Array){var i=t;e=i.toObject(),t=[];for(var n in i._objects)t.push(i._objects[n].cloneSync())}this.initialize_overwritten(t,e),"group"==this.type&&this.on("dblclick",function(){-1===this.canvas._objects.indexOf(this)?this.groupSelectedElements():this.ungroup()})},ungroup:function(){var e=this.canvas;e.discardActiveGroup(),this._restoreObjectsState();for(var i in this._objects)e.add(this._objects[i]),this._objects[i].clipTo=this.clipTo;e.remove(this);var n=new t.Group(this._objects,{canvas:e});n.addWithUpdate(),e.setActiveGroup(n),n.saveCoords(),e.fire("selection:created",{target:n}),e.renderAll()},groupSelectedElements:function(){var t=this.cloneSync();this.canvas.add(t),this.canvas.discardActiveGroup(),this.canvas.setActiveObject(t);for(var e in this._objects)this.canvas.remove(this._objects[e].originalObject)},actions:{remove:{className:"fa fa-trash",title:"Delete",key:"Delete",action:function(){if(this.isSelectionGroup()){for(var t in this._objects){var e=this._objects[t];this.canvas.remove(e.originalObject)}this.canvas.discardActiveGroup(),this.canvas.discardActiveObject()}else this.canvas.remove(this);this.canvas.renderAll()}},duplicate:{className:"fa fa-clone",title:"Duplicate",action:function(){this.isSelectionGroup()?(this.canvas.fire("before:selection:cleared",{target:this,e:null}),this.canvas.discardActiveGroup(),this.duplicate(function(t){t.ungroup()}),this.canvas.renderAll()):this.duplicate()}},groupSelectedElements:{title:"группа",className:"fa fa-object-group",visible:function(){return this.isSelectionGroup()},action:function(){this.groupSelectedElements(),this.canvas.renderAll()}},ungroup:{title:"группа",className:"fa fa-object-ungroup",visible:function(){return"group"==this.type&&-1!==this.canvas._objects.indexOf(this)},action:function(){this.ungroup(),this.canvas.renderAll()}}}}),t.util.object.extend(t.Canvas.prototype,{eventListeners:t.util.object.extendArraysObject(t.Canvas.prototype.eventListeners,{"selection:created":function(t){this._onSelectionCreated(t)}}),_onSelectionModified:function(){for(var t in this._objects){var e=this._objects[t].cloneSync();e.group=this,this._restoreObjectState(e),this._objects[t].originalObject.set({clipTo:this.clipTo,movementLimits:this.movementLimits,left:e.left,top:e.top,angle:e.angle,scaleX:e.scaleX,scaleY:e.scaleY,skewX:e.skewX,skewY:e.skewY,width:e.width,height:e.height})}},_onSelectionDeselected:function(t){for(var e in this._objects){var i=this._objects[e];i.originalObject.setCoords(),i.originalObject.evented=!0,delete i.originalObject.hiddenActive}},_onSelectionCreated:function(t){var e=t.target,i=[];for(var n in e._objects){var o=e._objects[n];i.push(o.originalObject||o)}e.destroy(),e._objects=[];var a=i[0].clipTo;for(var n in i){var s=i[n];a!=s.clipTo&&(a=!1);var o=s.cloneSync();o.set({clipTo:null,originalObject:s}),s.set({active:!1,evented:!1,hiddenActive:!0}),e.addWithUpdate(o),e.setCoords()}e.clipTo=a,e.on({modified:this._onSelectionModified,deselected:this._onSelectionDeselected})}})}).call(e,i(0))},function(t,i,n){"use strict";(function(t){t.History=n(52),t.util.object.extend(t.Editor.prototype.actions,{undo:{key:"z",observe:"changed",className:"fa fa-  undo",title:"Undo",enabled:"canUndo",action:function(){this.undo()},target:function(){return this.history}},records:{title:"Records",itemClassName:"filters-selector",className:"fa fa-history",type:"select",target:function(){return this.history},dropdown:{width:300,templateSelection:function(t,e){return t.any?t.text:$("<span>"+t.id+":"+t.type+"</span>")},templateResult:function(e,i,n){if(e.type){var o=e.originalState&&Object.keys(e.originalState).join(",")||"",a=e.object&&e.object.type||"";return $("<span title='{id}:{type}({otype} {keys})'>{id}:{type}({otype} {keys})</span>".format(t.util.object.extend({keys:o,otype:a},e)))}}},value:{observe:"changed",set:function(t,e){this.goto(t)},get:function(){return this.records[this.current].id},options:function(){return this.records}}},redo:{key:"y",observe:"changed",className:"fa fa-repeat",title:"Redo",enabled:"canRedo",action:function(){this.redo()},target:function(){return this.history}},history:{title:"History",type:"menu",menu:["redo","undo"]}}),t.util.object.extend(t.Canvas.prototype,{onCanvasModified:function(t){var e=this;if(this._isHistoryActive()){var i=this.getModifiedStates();i&&this.history.add({canvas:this,originalState:i.original,modifiedState:i.modified,type:"canvas:modified",undo:function(t){e.set(t.originalState).fire("modified").renderAll()},redo:function(t){e.set(t.modifiedState).fire("modified").renderAll()}})}},onCanvasCleared:function(t){var e=this;if(this._isHistoryActive()){var i=this.getModifiedStates();(t.objects.length||i)&&this.history.add({originalState:i&&i.original,modifiedState:i&&i.modified,originalObjects:t.objects,type:"canvas:cleared",redo:function(t){e._clearObjects(),t.originalState&&e.set(t.modifiedState).fire("modified"),e.renderAll()},undo:function(t){e._objects=e._objects.concat(t.originalObjects),t.modifiedState&&e.set(t.originalState).fire("modified"),e.renderAll()}})}},onObjectModified:function(t){if(this._isHistoryActive()){var e=t.target,i=t.target.getModifiedStates();i&&this.history.add({canvas:e.canvas.originalSlide||e.canvas,originalState:i.original,modifiedState:i.modified,object:e,type:"object:modified",undo:function(t){t.object.set(t.originalState),t.object.setCoords(),t.object.fire("modified"),t.canvas.fire("object:modified",{target:t.object}),t.canvas.renderAll()},redo:function(t){t.object.set(t.modifiedState),t.object.setCoords(),t.canvas.fire("object:modified",{target:t.object}),t.object.fire("modified"),t.canvas.renderAll()}})}},clearHistory:function(){this.history.clear()},disableHistory:function(){this.history.enabled=!1},_add_object_historya:function(t){this.canvas;t.canvas.add(t.object),t.canvas.renderAll()},_remove_object_historya:function(t){t.canvas.remove(t.object),t.canvas.renderAll()},_isHistoryActive:function(){return this.stateful&&this.history.enabled&&!this.processing&&!this.history.processing},onObjectRemoved:function(t){this._isHistoryActive()&&this.history.add({canvas:t.target.canvas.originalSlide||t.target.canvas,object:t.target,type:"object:removed",redo:this._remove_object_historya,undo:this._add_object_historya})},onDrawAfter:function(t){if(!e.target.canvas.stateful||!this.history.enabled||this.processing||this.history.processing)return!1;this.history.add(this.freeDrawingBrush.getHistoryRecord(t))},onObjectAdded:function(t){this._isHistoryActive()&&this.history.add({canvas:t.target.canvas.originalSlide||t.target.canvas,object:t.target,type:"object:added",undo:this._remove_object_historya,redo:this._add_object_historya})},initHistory:function(e){e||(e=new t.History(this),e.application=this.application),this.stateful=!0,this.history=e,this.on({modified:this.onCanvasModified,"loading:begin":this.clearHistory,"draw:after":this.onDrawAfter,"object:modified":this.onObjectModified,"canvas:cleared":this.onCanvasCleared,"object:added":this.onObjectAdded,"object:removed":this.onObjectRemoved});var i=this.application.prototypes.History;i&&i.eventListeners&&e.on(i.eventListeners)},enableHistory:function(){this.history.enabled=!0}}),t.HISTORY_MODE={INDIVIDUAL:"slide",SHARED:"global"},t.util.object.extend(t.Editor.prototype,{optionsOrder:function(){var e=t.Editor.prototype.optionsOrder;return e.splice(e.indexOf("*"),0,"history"),e}(),history:null,setHistory:function(e){var i=this;e===t.HISTORY_MODE.SHARED&&(this.history=new t.History(this),this.enableHistory(),this.on("slide:created",function(t){t.target.initHistory(i.history)}))},enableHistory:function(){this.history.enabled=!0}})}).call(i,n(0))},function(t,e,i){"use strict";var n=i(2);n.object=i(3);var o=function(t,e){this.parent=t,this.clear(e)};o.prototype.setRecords=function(t,e){return this.canUndo=t.length,this.canRedo=!1,t.length||(t=[{type:"initialized",id:0,text:"initialized"}]),this.records=t,this.length=this.records.length,this.current=void 0===e?t.length-1:e,this.activeAction=this.records[this.current],this.fire("changed",{action:this.activeAction}),this},o.prototype.restore=function(){return this.setRecords(this.saved.records,this.saved.current),this},o.prototype.save=function(){return this.saved={current:this.current,records:n.object.cloneDeep(this.records)},this},o.prototype.clear=function(t){return t?t.id=0:t={type:"initialized",id:0,text:"initialized"},this.records=[t],this.current=0,this.canUndo=!1,this.canRedo=!1,this.activeAction=this.records[this.current],this.fire("changed",{action:this.activeAction}),this},o.prototype.add=function(t){return!(!this.enabled||this.processing)&&(t.moment=(new Date).getTime(),this.canUndo=!0,this.canRedo=!1,this.records.splice(this.current+1),this.records.push(t),this.length=this.records.length,t.id=this.length-1,t.text=t.type||t.text,this.current=this.length-1,this.activeAction=this.records[this.current],this.fire("changed",{action:t}),this)},o.prototype.disable=function(){return this.enabled=!1,this},o.prototype.enable=function(){return this.enabled=!0,this},o.prototype.undo=function(t){this.canRedo=!0;var e=this.records[this.current];return this.current--,this.processing=!0,e.undo.call(this.parent,e),this.processing=!1,0==this.current&&(this.canUndo=!1),t||(this.activeAction=this.records[this.current],this.fire("changed",{action:e})),this},o.prototype.goto=function(t){if(t!=this.current){if(t<this.current)for(var e=this.current-t;e--;)this.undo(!0);if(t>this.current)for(var e=t-this.current;e--;)this.redo(!0);return this.activeAction=this.records[this.current],this.fire("changed",{action:this.activeAction}),this}},o.prototype.redo=function(t){if(this.current!=this.length-1){this.processing=!0,this.canUndo=!0,this.current++;var e=this.records[this.current];return e.redo.call(this.parent,e),this.current==this.length-1&&(this.canRedo=!1),this.processing=!1,t||(this.activeAction=this.records[this.current],this.fire("changed",{action:e})),this}},n.observable(o.prototype),t.exports=o},function(t,e,i){"use strict";(function(t){t.util.object.extend(t.Object.prototype,{responsiveBorders:!1,centerAndZoomOut:function(){this.canvas.centerOnObject(this)}}),t.Canvas.prototype._default_event_listeners||(t.Canvas.prototype._default_event_listeners={}),t.Object.prototype.updateResponsiveBorder=function(){this.responsiveBorders&&(this.originalStrokeWidth||(this.originalStrokeWidth=this.strokeWidth),this.strokeWidth=this.canvas?this.originalStrokeWidth/this.canvas.viewportTransform[0]:0)},t.util.object.extend(t.Canvas.prototype,{_default_event_listeners:{"dimensions:modified":function(){this.autoCenterAndZoomOutEnabled&&this.centerAndZoomOut()},"viewport:scaled":function(){this.backgroundImage&&this.backgroundImage.updateResponsiveBorder();for(var t in this._objects)this._objects[t].updateResponsiveBorder()},"background-image:loaded":function(t){this.autoCenterAndZoomOutEnabled&&this.centerAndZoomOut()},"loading:end":function(t){this.autoCenterAndZoomOutEnabled&&(this.originalHeight||this.originalWidth)&&this.centerAndZoomOut()},"object:added":function(t){t.target.updateResponsiveBorder()}}}),t.util.object.extend(t.Canvas.prototype,{zoomCtrlKey:!0,mouseWheelZoom:!1,setMouseWheelZoom:function(t){this.mouseWheelZoom=t,this.on("mouse:wheel",this.wheelZoom)},_setZoomNative:t.Canvas.prototype.setZoom,_zoomToPointNative:t.Canvas.prototype.zoomToPoint,changeDimensionOnZoom:!1,drawZoomArea:function(e,i,n,o,a){e.save(),e.translate(i||0,n||0);var s=this.getZoom(),r=t.util.getProportions(this.backgroundImage,{width:o||100,height:a||100});e.globalAlpha=.5,e.fillRect(0,0,r.width,r.height),e.strokeStyle="red";var c=this.viewportTransform,l=-c[4]*r.scale/s,u=-c[5]*r.scale/s,h=l+this.width*r.scale/s,d=u+this.height*r.scale/s;l=Math.max(l,0),u=Math.max(u,0),h=Math.min(h,r.width),d=Math.min(d,r.height),e.globalAlpha=1,e.beginPath(),e.moveTo(l,u),e.lineTo(h,u),e.lineTo(h,d),e.lineTo(l,d),e.lineTo(l,u),e.fill(),e.clip(),e.drawImage(this.backgroundImage._element,0,0,r.width,r.height),e.stroke(),e.strokeRect(0,0,r.width,r.height),e.restore()},setZoom:function(e,i){i||(i=new t.Point(0,0)),this.changeDimensionOnZoom&&(this.originalWidth||(this.originalWidth=this.width),this.originalHeight||(this.originalHeight=this.height),this.setDimensions({width:Math.round(this.originalWidth*e),height:Math.round(this.originalHeight*e)},{})),this._zoomToPointNative(i,e),this._update_background_overlay_image("background"),this._update_background_overlay_image("overlay"),this.fire("viewport:scaled",{scale:e})},zoomToPoint:function(t,e){var i=this.getMaxZoom(),n=this.getMinZoom().scale;e>i&&(e=i),e<n&&(e=n),this.setZoom(e,t)},resetViewport:function(){_canvas.viewportTransform[0]=1,_canvas.viewportTransform[3]=1,_canvas.viewportTransform[4]=0,_canvas.viewportTransform[5]=0,_canvas.renderAll();for(var t in this._objects)this._objects[t].setCoords()},zoomToPointEnabled:!0,minZoomFactor:1,maxZoom:20,autoCenterAndZoomOutEnabled:!1,getMaxZoom:function(){return this.maxZoom},getMinZoom:function(){var e={width:$(this.wrapperEl).width(),height:$(this.wrapperEl).height()},i={width:this.originalWidth,height:this.originalHeight},n={width:e.width*this.minZoomFactor,height:e.height*this.minZoomFactor};return t.util.getProportions(i,n,"fit")},centerAndZoomOut:function(){if(!this.virtual){var t=this.getMinZoom(),e={width:$(this.wrapperEl).width(),height:$(this.wrapperEl).height()},i=this.viewportTransform.slice(0);i[0]=t.scale,i[3]=t.scale,i[4]=(e.width-t.width)/2,i[5]=(e.height-t.height)/2,this.setViewportTransform(i),this._update_background_overlay_image("background"),this._update_background_overlay_image("overlay")}},centerOnObject:function(e){var i=e.getBoundingRect(),n=this.viewportTransform;i.width/=n[0],i.height/=n[3];var o={width:1.1*i.width,height:1.1*i.height},a=t.util.getProportions(o,this),s=(this.width/a.scale-o.width)/2,r=(this.height/a.scale-o.height)/2,c=(i.left-n[4])/n[0],l=(i.top-n[5])/n[3],u=(a.scale,a.scale,e.left,a.scale,e.width,a.scale,e.top,a.scale,e.height,a.scale,[a.scale,0,0,a.scale,-c*a.scale+(.05*i.width+s)*a.scale,-l*a.scale+(.05*i.height+r)*a.scale]);this.setViewportTransform(u),this.fire("viewport:scaled",{scale:a.scale}),this.renderAll()},wheelZoom:function(e){if(this.mouseWheelEnabled&&(!this.zoomCtrlKey||e.ctrlKey)){var i;i=e.deltaY<0?1.1:.9;var n=this.getZoom(),o=n*i,a=this.getMinZoom().scale;if(this.zoomToPointEnabled){var s=new t.Point(e.offsetX,e.offsetY),r=this.viewportTransform[4],c=this.viewportTransform[5],l=this.originalWidth*this.getZoom()+r,u=this.originalHeight*this.getZoom()+c;s.x<r&&(s.x=r),s.y<c&&(s.y=c),s.x>l&&(s.x=l),s.y>u&&(s.y=u),a>o?this.autoCenterAndZoomOutEnabled?this.centerAndZoomOut():e.deltaY<0&&this.zoomToPoint(s,o):this.zoomToPoint(s,o)}else this.setZoom(o);for(var h in this._objects)this._objects[h].setCoords();return this.renderAll(),e.stopPropagation(),e.preventDefault(),!1}},scaleFactor:1.1,getOrignalCenter:function(){var t=this.getCenter();return t.left+=this.viewportTransform[4],t.top+=this.viewportTransform[5],t}}),t.util.object.extend(t.Object.prototype.actions,{centerAndZoomOut:{className:"fa fa-search-plus",title:"centerAndZoomOut"}}),t.util.object.extend(t.Canvas.prototype.actions,{zoomOut:{className:"fa fa-search-minus",title:"zoom-out",action:function(){var t=this.getOrignalCenter(),e=this.getZoom()/this.scaleFactor;this.zoomToPoint({x:t.left,y:t.top},e)}},zoomNumber:{type:"number",value:{min:function(){return.01},max:function(){return 10},set:function(t){this.setZoom(t)},get:function(){return this.getZoom()},observe:"viewport:scaled"}},zoomIn:{className:"fa fa-search-plus",title:"zoom-in",action:function(){var t=this.getOrignalCenter(),e=this.getZoom()*this.scaleFactor;this.zoomToPoint({x:t.left,y:t.top},e)}}})}).call(e,i(0))},function(t,e,i){"use strict";(function(t){t.util.object.extend(t.StaticCanvas.prototype,{_toSVG_overwritten:t.StaticCanvas.prototype.toSVG,toSVG:function(t,e){var i=this.width,n=this.height;this.originalWidth&&(this.svgViewportTransformation=!1,this.width=this.originalWidth,this.height=this.originalHeight),t||(t={});var o=[];return this._setSVGPreamble(o,t),this._setSVGHeader(o,t),this._setSVGLayers(o,e),o.push("</svg>"),this.originalWidth&&(this.width=i,this.height=n),o.join("")},_setSVGLayers:function(t,e){var i=!0,n=!1,o=void 0;try{for(var a,s=this._layers[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var r=a.value;this.layers[r].svg&&this.layers[r].svg(this,t,e)}}catch(t){n=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(n)throw o}}},getSVGBody:function(t,e){var i=this.width,n=this.height;this.originalWidth&&(this.width=this.originalWidth,this.height=this.originalHeight),t=t||{};var o=t.scaleX||(t.width?t.width/this.width:1),a=t.scaleY||(t.height?t.height/this.height:1),s=t.left||0,r=t.top||0,c=t.angle||0,l="";t.clipPath&&(l="clip-path: url(#"+t.clipPath+");");var u="";0!==c&&(u+="rotate("+c+") "),0===s&&0===r||(u+="translate("+s+" "+r+") "),1===o&&1===a||(u+="scale("+o+" "+a+") ");var h=['<g transform="'+u+'" style="'+l+'" id="'+t.clipPath+'">'];return this._setSVGLayers(h,e),h.push("</g>"),this.originalWidth&&(this.width=i,this.height=n),h}}),t.StaticCanvas.prototype.inlineSVG=!1,t.Image.prototype.getSvgSrc=function(e){var i=e?this._element:this._originalElement;if(i){var n=t.isLikelyNode?i._src:i.src;if(this.canvas.inlineSVG&&!n.startsWith("data:image")){if(i.toDataURL)return i.toDataURL();var o=t.util.createCanvasElement();o.width=i.width,o.height=i.height;o.getContext("2d").drawImage(i,0,0);return o.toDataURL()}return n}return this.src||""}}).call(e,i(0))},function(t,e,i){"use strict";(function(t){var e=window.jQuery||window.$;e.focusNextElement=function(t){var e,i=Array.prototype.filter.call(document.querySelectorAll('a:not([disabled]), button:not([disabled]), input[type=text]:not([disabled]), textarea:not([disabled]), [tabindex]:not([disabled]):not([tabindex="-1"])'),function(t){return t.offsetWidth>0||t.offsetHeight>0||t===document.activeElement}),n=i.indexOf(document.activeElement);e=t?i[n-1]||i[i.length-1]:i[n+1]||i[0],e.focus()},t.IText.prototype.activateNextObject=function(t){this.exitEditing();var e=t.shiftKey;this.canvas.activateNextObject(e)},t.IText.prototype.keysMap[9]="activateNextObject",t.focusedCanvas=null,t.util.addListener(t.window,"keydown",function(e){"Tab"===e.code&&(t._tabbableSetToLast=e.shiftKey)}),t.util.object.extend(t.Canvas.prototype,{tabbable:!1,activateFirstObject:function(){this.discardActiveGroup(),this.discardActiveObject(),this._objects.length>0&&this.setActiveObject(this._objects[0])},activateLastObject:function(){this.discardActiveGroup(),this.discardActiveObject(),this._objects.length>0&&this.setActiveObject(this._objects[this._objects.length-1])},activateNextObject:function(i){var n=this.getActiveObject(),o=this._objects.indexOf(n),a=this._objects[o+(i?-1:1)];a?this.setActiveObject(a):(this.discardActiveGroup(),this.discardActiveObject(),this._ignoreFocusEvent=!0,e(this.inputElement).focus(),t._tabbableSetToLast=i,e.focusNextElement(i))},setTabbable:function(i){if(this.tabbable!==i){if(this.tabbable=i,!i)return e(this.inputElement).remove(),void delete this.inputElement;var n=this;this.inputElement=t.document.createElement("input"),this.inputElement.setAttribute("type","text"),this.inputElement.style.cssText="position: absolute; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px;",this.wrapperEl.appendChild(this.inputElement),t.util.addListener(this.inputElement,"focus",this.focus.bind(this)),e(this.inputElement).bind({focus:function(){if(n._ignoreFocusEvent)return delete n._ignoreFocusEvent,!1;n.focus(),t._tabbableSetToLast?n.activateLastObject():n.activateFirstObject()},blur:function(){}}),this.on("mouse:down",this.focus.bind(this))}},onkeyUp:function(t){},blur:function(){return this._activeObject&&this._activeObject.isEditing&&this._activeObject.exitEditing(),this.discardActiveGroup(),this.discardActiveObject(),this.renderAll(),this},focus:function(){if(t.focusedCanvas!=this)return t.focusedCanvas&&t.focusedCanvas.blur(),t.focusedCanvas=this,this}})}).call(e,i(0))},function(t,e,i){"use strict";(function(t){t.util.object.extend(t.Text.prototype,{staticBorderColor:!1,_render_staticBorderColorOverwritten:t.Text.prototype.render,render:function(t,e){this._render_staticBorderColorOverwritten(t),t.save(),e||this.transform(t),this._drawBorders(t),t.restore()},_staticBorderColorRender:t.IText.prototype._render,_drawBorders:function(t){!this.active&&this.staticBorderColor&&(t.strokeStyle=this.staticBorderColor,t.strokeRect(-this.width/2,-this.height/2,this.width,this.height))}})}).call(e,i(0))},function(t,e,i){"use strict";(function(t){var e=t.Canvas.prototype._onMouseDown,i=t.Canvas.prototype._onMouseUp,n=t.Canvas.prototype._onMouseMove;t.util.object.extend(t.Canvas.prototype,{_initEventListeners_overwritten:t.Canvas.prototype._initEventListeners,_initEventListeners:function(){this._initEventListeners_overwritten(),this.___onKeyDown=this._onKeyDown.bind(this),t.util.addListener(t.window,"keydown",this.___onKeyDown)},_removeListeners_overwritten:t.Canvas.prototype.removeListeners,removeListeners:function(){this._removeListeners_overwritten(),t.util.removeListener(t.window,"keydown",this.___onKeyDown)},_onKeyDown:function(t){return this._applyMixedMode(t)},getInteractiveMode:function(){return this.interactiveMode},setInteractiveMode:function(t){this.isDrawingMode="draw"===t,this.isHandMode="hand"===t,this.interactive="disabled"!==t,this.isMixedMode="mixed"===t,this.interactive||(this.upperCanvasEl.style.cursor="default"),this.interactiveMode=t},interactiveMode:"default",isHandMode:!1,_handModeCursorMove:!1,_handModeCursorDown:!1,_handModeCursorPosition:{x:0,y:0},_handModeMouseMove:function(t){if(!0===this._handModeCursorDown){if(t.pageY===this._handModeCursorPosition.y&&t.pageX===this._handModeCursorPosition.x)return;this._handModeCursorMove=!0;var e={x:this.viewportTransform[4],y:this.viewportTransform[5]},i={x:e.x-(this._handModeCursorPosition.x-t.pageX),y:e.y-(this._handModeCursorPosition.y-t.pageY)};this.size.width,this.zoom,this.lowerCanvasEl.width,this.size.height,this.zoom,this.lowerCanvasEl.height;this.viewportTransform[4]=i.x,this.viewportTransform[5]=i.y,this.fire("viewport:translate"),this.renderAll();for(var n=0,o=this._objects.length;n<o;n++)this._objects[n].setCoords();this._handModeCursorPosition.y=t.pageY,this._handModeCursorPosition.x=t.pageX}},_handModeMouseUp:function(){this._handModeCursorDown=!1,this._handModeCursorMove},_handModeMouseDown:function(t){this._handModeCursorMove=!1,this._handModeCursorDown=!0,this._handModeCursorPosition={y:t.pageY,x:t.pageX}},handModeEnabled:!1,handModeKey:"Alt",_applyMixedMode:function(t){if(this.handModeEnabled&&t.altKey||t.key===this.handModeKey)this.isHandMode||(this.isHandMode=!0,this.isDrawingMode=!1,this.setCursor("pointer"));else if(!this.isMixedMode||this._isCurrentlyDrawing||this._currentTransform)this.isHandMode=!1;else if(this.isHandMode=!1,this._current_target=this.findTarget(t),this._current_target)if(this.freeDrawingBrush&&this._current_target.allowDrawing){var e=this._current_target._findTargetCorner(this.getPointer(t,!0));this.isDrawingMode=!e}else this.isDrawingMode&&(this.isDrawingMode=!1);else this.freeDrawingBrush&&!this.isDrawingMode&&(this.setCursor(this.freeDrawingCursor),this.isDrawingMode=!0)},_onMouseMove:function(t){if(this.interactive)return this._applyMixedMode(t),this.isHandMode?(this._current_target&&this._current_target.selectable_overwritten&&(this._current_target.selectable=!0),this._handModeActive?this._handModeMouseMove(t):(this.fire("mouse:move",{target:this._current_target,e:t}),this._current_target&&this._current_target.fire("mousemove",{e:t}),!0)):n.call(this,t)},_onScale:function(t,e,i,n){return(t.shiftKey^this.shiftInverted||this.uniScaleTransform)&&!e.target.get("lockUniScaling")?(e.currentAction="scale",this._scaleObject(i,n)):(e.reset||"scale"!==e.currentAction||this._resetCurrentTransform(t),e.currentAction="scaleEqually",this._scaleObject(i,n,"equally"))},shiftInverted:!1,_setCursorFromEvent_overwritten:t.Canvas.prototype._setCursorFromEvent,_setCursorFromEvent:function(t,e){this.isHandMode?this.setCursor("pointer"):this._setCursorFromEvent_overwritten(t,e)},_onMouseDown:function(t){this.interactive&&(t.preventDefault(),t.stopPropagation(),this._applyMixedMode(t),this.isHandMode&&this._current_target&&(this._current_target.selectable_overwritten=this._current_target.selectable,this._current_target.selectable=!1),e.call(this,t),this.isHandMode&&(this._current_target&&this._current_target.selectable_overwritten&&(this._current_target.selectable=!0),this._handModeActive=!0,this._handModeMouseDown(t)))},_onMouseUp:function(t){this.interactive&&(t.preventDefault(),t.stopPropagation(),i.call(this,t),this.isHandMode&&(this._handModeActive=!1))}})}).call(e,i(0))},function(t,e,i){"use strict";(function(t){t.StrokeMixin||i(59),t.Frame=t.util.createClass(t.Group,t.StrokeMixin,{type:"frame",minWidth:35,minHeight:35,fill:"transparent",resizable:!0,contentTools:!1,stateProperties:t.Group.prototype.stateProperties.concat(["clip"]),optionsOrder:function(){var e=t.Object.prototype.optionsOrder.slice();return e.splice(e.indexOf("*")+1,0,"element","clip"),e}(),clip:{left:0,top:0,scaleX:1,scaleY:1},clippingAvailable:function(){return this.clipEnabled&&this.element&&!this._clipmode},clipEnabled:!0,cloneSync:function(e){var i=new t.Frame(this);return e&&i.set(e),i},initialize:function(t){if(t||(t={}),t.constructor!=Object){var e=t.toObject();t.element&&(e.element=t.element.cloneSync(),e.element.clipTo=e._fabric_shape),e.shape=t.shape,t=e}this.on({"object:click":this._check_text_as_target_and_edit,dblclick:this.toggleClipModeByClick,redraw:this._apply_shape,"element:modified":function(t){this.updateStroke(),this._apply_shape()}}),this.initShape(t),this.callSuper("initialize",[this._fabric_shape],t),this._elements_to_update=[]},toggleClipModeByClick:function(t){this._is_clipping_available(t.e)&&(this._clipmode?this.clipPhotoEnd():this.clipPhotoStart())},_check_text_as_target_and_edit:function(t){this.isPossibleTarget(t.e,this.text)&&(this.text.setOpacity(1),this._on_text_edit(t))},clipPhotoEnd:function(){this.canvas.editingObject=null,this.application.off("target:changed target:cleared",this._endFoo),this.canvas._gridObject&&(this.canvas._gridObject.enabled=!0),this.canvas.remove(this.element),this.set({hasControls:!1,evented:!0,flipX:this.element.flipX,flipY:this.element.flipY});var t=Math.PI/180,e=Math.cos(this.angle*t),i=Math.sin(this.angle*t),n=this.element,o=this,a={angle:this.element.angle-this.angle,left:((n.left-o.left)*e+(n.top-o.top)*i-o.width/2)*(n.flipX?-1:1),top:(-(n.left-o.left)*i+(n.top-o.top)*e-o.height/2)*(n.flipY?-1:1),flipX:!1,flipY:!1};this.element.originX,this.element.originY,this.add(this.element),this.element.set(a),this._clipmode=!1,this.set({hasControls:!0,evented:!0}),this.canvas.remove(this._fabric_shape),this.add(this._fabric_shape),this.updateStroke(),this._apply_shape(),this.element.active=!1,this.canvas.setActiveObject(this),this.canvas.renderAll();var s=this.width,r=this.height,c=this.element;this.clip={left:c.left/s,top:c.top/r,scaleX:c.width/s,scaleY:c.height/r},this.fire("clipping:exited"),this.canvas.fire("frame:clipping:exited",{target:this})},clipPhotoStart:function(){var t=this;this._clipmode=!0,this.updateStroke(),this._apply_shape(),this.canvas.discardActiveGroup(),this.canvas._gridObject&&(this.canvas._gridObject.enabled=!1),this.element.set({movementLimits:this,movementLimitMode:"content",flipX:this.flipX,flipY:this.flipY}),this._restoreObjectState(this.element),this.element.set({hasControls:!0,selectable:!0,perPixelTargetFind:!1}),this.remove(this.element),this.canvas.add(this.element),this._restoreObjectState(this._fabric_shape),this.remove(this._fabric_shape),this.canvas.add(this._fabric_shape),this.set({hasControls:!1,evented:!1}),this.canvas.setActiveObject(this.element),this.active=!0,this._endFoo=function(){t.clipPhotoEnd()},this.application.on("target:changed target:cleared",this._endFoo),this.fire("clipping:entered"),this.canvas.fire("frame:clipping:entered",{target:this}),this.canvas.editingObject=this,this.canvas.renderAll()},render:function(t,e){if(this.dirty){if(this.dirtyHeight){for(var i in this._elements_to_update){var n=this._elements_to_update[i];this._update_interface_element_position(n.element,n,"height")}this._update_element_height(),this.dirtyHeight=!1}if(this.dirtyWidth){for(var i in this._elements_to_update){var n=this._elements_to_update[i];this._update_interface_element_position(n.element,n,"width")}this._update_element_width(),this.dirtyWidth=!1}this.dirty=!1,this.fire("redraw")}if(this._clipmode){var o=this.canvas.getZoom();t.save(),t.globalAlpha=.5;var a=this.element.clipTo;this.element.clipTo=null,this.element.render(t),t.scale(o,o),this.element.clipTo=a,this.transform(t),t.strokeStyle=this.borderColor,t.lineWidth=1/this.borderScaleFactor,t.beginPath(),t.closePath(),t.stroke(),t.restore()}this.callSuper("render",t,e)},clippingSupportedTypes:"*",_is_clipping_available:function(t){if(!this.clipEnabled)return!1;if(!t||!this.isPossibleTarget(t,this.button))return this.element&&("*"==this.clippingSupportedTypes||-1!=this.clippingSupportedTypes.indexOf(this.element.type))},_remove_element:function(){},setData:function(t){"frame"==t.role?(this.setFrame(t.frame),this.setShape(t.shape)):this.setElementObject(t)},accepts:{role:["image","video","frame"]},setElementObject:function(e,i){var n={src:e.src};"image"==e.role&&(n.type="image"),"video"==e.role&&(n.type="video"),this._set_pending(!0),this.fire("element:loading"),t.util.createObject(n,function(t){this._set_pending(!1),this.setElementKlass(t),i&&i(t)}.bind(this))},setElement:function(t,e){t?t.constructor==Object?this.setElementObject(t,e):(this.setElementKlass(t),e&&e()):(this.setElementKlass(),e&&e())},dropElementMethod:"cover",setElementKlass:function(e){if(this.element!==e){if(this.element&&(this._remove_element(),this.element.destructor&&this.element.destructor(),this.remove(this.element),this.canvas&&this.canvas.remove(this.element)),this.element=e,e){if(e.on("dblclick",function(t){this.parent.toggleClipModeByClick(t)}),e.setupState(),"resize"==this.dropElementMethod&&(this.clip={left:0,top:0,scaleX:1,scaleY:1}),"cover"==this.dropElementMethod){var i=t.util.getProportions(e,this,"cover");this.clip={left:0,top:0,scaleX:i.width/this.width,scaleY:i.height/this.height}}e.set({tools:["clipEnd"],actions:{clipEnd:{className:"fa fa-crop",title:"clip end",action:function(){this.parent.clipPhotoEnd()}}},parent:this,notSelectableInTheGroup:!0,originX:"center",originY:"center",transparentCorners:!1,resizable:!0,clipTo:this._fabric_shape}),this.add(e);for(var n in this._elements_to_update)this.remove(this._elements_to_update[n].element),this.add(this._elements_to_update[n].element);this._update_element_size()}this.fire("element:modified",{element:e}),this.canvas&&this.canvas.renderAll()}},_limit_moving:function(t){var e=this.getBoundingRect(),i=this.element;i.on("moving",function(){var t={l:e.left+i.width*i.scaleX/2,r:e.left+e.width-i.width*i.scaleX/2,t:e.top+i.height*i.scaleY/2,b:e.top+e.height-i.height*i.scaleY/2};i.setLeft(Math.max(Math.min(t.l,i.left),t.r)),i.setTop(Math.max(Math.min(t.t,i.top),t.b))}),i.on("scaling",function(){i.set({width:Math.max(e.width,i.width*i.scaleX),height:Math.max(e.height,i.height*i.scaleY),scaleX:1,scaleY:1});e.left,i.width,i.scaleX,e.left,e.width,i.width,i.scaleX,e.top,i.height,i.scaleY,e.top,e.height,i.height,i.scaleY})},_set_pending:function(t){this._pending=t},_create_remove_button:function(t){this.button=this._create_button({text:"",options:{visible:!1},position:{top:0,right:0}}),this.button.on("click",function(t){this._pending||this.setElement(!1)}.bind(this))},_add_element_to_update:function(t){this._elements_to_update.push(t),void 0!==t.right&&t.element.setOriginX("right"),void 0!==t.left&&t.element.setOriginX("left"),void 0!==t.bottom&&t.element.setOriginY("bottom"),void 0!==t.top&&t.element.setOriginY("top"),this._update_interface_element_position(t.element,t)},setClip:function(t){this.clip=t,this._update_element_size()},_update_element_size:function(){this._update_element_width(),this._update_element_height()},_update_element_width:function(){this.element&&("ellipse"==this.element.type?this.element.set({rx:this.width/2*this.clip.scaleX}):"video"==this.element.type||"path"==this.element.type?this.element.set({left:0,scaleX:this.width/this.element.width}):(this.element.setWidth(this.width*this.clip.scaleX),this.element.setLeft(this.width*this.clip.left)))},_update_element_height:function(){this.element&&("ellipse"==this.element.type?this.element.set({ry:this.height/2*this.clip.scaleY}):"video"==this.element.type||"path"==this.element.type?this.element.set({top:0,scaleY:this.height/this.element.height}):(this.element.setHeight(this.height*this.clip.scaleY),this.element.setTop(this.height*this.clip.top)))},_update_interface_element_position:function(t,e,i){i&&"height"!=i||(void 0!==e.top&&void 0!==e.bottom&&(t.setTop(-this.height/2+e.top),t.setHeight(this.height-e.top-e.bottom)),void 0!==e.top?t.setTop(-this.height/2+e.top):void 0!==e.bottom?t.setTop(this.height/2-e.bottom):void 0!==e.height&&t.setHeight(e.height)),i&&"width"!=i||(void 0!==e.right&&void 0!==e.left?(t.setLeft(-this.width/2+e.left),t.setWidth(this.width-e.left-e.right)):void 0!==e.right?t.setLeft(this.width/2-e.right):void 0!==e.left?t.setLeft(-this.width/2+e.left):void 0!==e.width&&t.setWidth(e.width)),t.setCoords()},dirty:!1,dirtyHeight:!1,dirtyWidth:!1,setHeight:function(t){this.height=t,this.dirty=!0,this.dirtyHeight=!0},setWidth:function(t){this.width=t,this.dirty=!0,this.dirtyWidth=!0},toObject:function(e){e=["clip","data"].concat(e);var i=t.Object.prototype.toObject.call(this,e);if(this.shape&&(i.shape=t.util.object.clone(this.shape),i.shape.src&&(delete i.shape.paths,delete i.shape.height,delete i.shape.width,delete i.shape.svgUid,delete i.shape.toBeParsed)),delete i.objects,this.element){var n=this.element.toObject();i.element={type:n.type,src:n.src}}return i}});var e=t.Frame.prototype;t.Frame.prototype.actions=t.util.object.extend({},t.Object.prototype.actions,{clear:{title:"Remove content",className:"fa fa-times",action:e.setElement,visible:"element",observe:"element:modified"},crop:{title:"crop",className:"fa fa-crop",action:e.clipPhotoStart,visible:e.clippingAvailable,observe:"clipping:entered clipping:exited element:modified"}}),t.Frame.fromObject=function(e,i){var n=e.application;delete e.application,e=t.util.object.cloneDeep(e),e.application=n;var o=t.util.queueLoad(2,function(){i&&i(new t.Frame(e))});e.image?t.util.createObject({type:"image",image:e.image,width:e.image.width,height:e.image.height},function(t){e.element=t,o()}):e.element?t.util.createObject(e.element,function(t){e.element=t,o()}):o(),e.shape&&e.shape.src?t.loadSVGFromURL(e.shape.src,function(i,n){e.shape.paths=i,t.util.object.extend(e.shape,n),o()}):o()},t.Frame.async=!0,t.util.createAccessors(t.Frame)}).call(e,i(0))},function(t,e,i){"use strict";(function(t){t.StrokeMixin={shape:{strokeWidthFull:0,strokeWidthEmpty:2,strokeWidthActive:2,strokeDashArray:[5,5],fill:"transparent",strokeEmpty:"red",strokeFull:"red",strokeActive:"green"},setShape:function(e,i){e=t.util.object.extend({strokeWidthFull:this.shape.strokeWidthFull,strokeWidthEmpty:this.shape.strokeWidthEmpty,strokeWidthActive:this.shape.strokeWidthActive,dashArray:this.shape.dashArray,strokeEmpty:this.shape.strokeEmpty,strokeFull:this.shape.strokeFull,strokeActive:this.shape.strokeActive},e);var n=this;e&&e.src&&!e.paths?t.loadSVGFromURL(e.src,function(o,a){e.paths=o,t.util.object.extend(e,a),n._set_shape(e),n.add(n._fabric_shape),n._apply_shape(),n._fabric_shape.sendToBack(),i&&i()}):(n._set_shape(e),n.add(n._fabric_shape),n._apply_shape(),n._fabric_shape.sendToBack(),i&&i())},initShape:function(e){var i=t.util.object.extend(e.shape||{},this.shape);this._fabric_shape=new t.Rect(t.util.object.extend({},i,{width:e.width,height:e.height,stroke:i.strokeEmpty,strokeWidth:i.strokeWidthEmpty}))},_apply_shape:function(){var t=this.shape,e=t&&t.offsets;e||(e=[0,0,0,0]);var i=t&&t.offsets_units;i||(i=[1,1,1,1]),e={top:e[0]*(i[0]?this.height/100:1)||0,right:e[1]*(i[1]?this.width/100:1)||0,bottom:e[2]*(i[2]?this.height/100:1)||0,left:e[3]*(i[3]?this.width/100:1)||0};var n=this.width-e.left-e.right,o=this.height-e.top-e.bottom,a=this.shape.width||this._fabric_shape.width,s=this.shape.height||this._fabric_shape.height,r={left:-this.width/2+e.left,top:-this.height/2+e.top,scaleX:n/100/(a/100),scaleY:o/100/(s/100),angle:0};this._fabric_shape.set(r),this.updateStroke(),this.canvas&&this.canvas.renderAll()},_set_shape:function(e){this._fabric_shape&&(this.remove(this._fabric_shape),delete this._fabric_shape);var i,n={fill:"transparent",strokeDashArray:this.shape.dashArray};if(e||(e={}),this.shape=e,e.paths){for(var o in e.paths)e.paths[o].set(n);i=t.util.groupSVGElements(e.paths,e)}else{var a;e.radius?(a=t.util.getRadiusClipPath(e.radius,e.radius_units,this.width,this.height),i=new t.Path(a,n)):e.path?i=new t.Path(e.path,n):(e.width||(e.width=100),e.height||(e.height=100),a="M 0 0 L "+e.width+" 0 L "+e.width+" "+e.height+" L 0 "+e.height+" z",i=new t.Path(a,n))}i.set({scaleX:this.width/i.width,scaleY:this.height/i.height,perPixelTargetFind:!0,selectable:!1,originX:"left",originY:"top"}),this._fabric_shape=i,this.element&&this.element.setClipTo(this._fabric_shape),this.updateStroke()},updateStroke:function(){var t=this.shape.stroke,e=0;(this._activated||this._clipmode)&&this.shape.strokeWidthActive?e=this.shape.strokeWidthActive:this.element&&this.shape.strokeWidthFull?e=this.shape.strokeWidthFull:!this.element&&this.shape.strokeWidthEmpty&&(e=this.shape.strokeWidthEmpty),(this._activated||this._clipmode)&&this.shape.strokeActive?t=this.shape.strokeActive:this.element&&this.shape.strokeFull?t=this.shape.strokeFull:!this.element&&this.shape.strokeEmpty&&(t=this.shape.strokeEmpty);var i=e/Math.max(this._fabric_shape.scaleX,this._fabric_shape.scaleY);if(this.shape)if(this.shape.paths)for(var n in this._fabric_shape.paths)this._fabric_shape.paths[n].setStrokeWidth(i),this._fabric_shape.paths[n].setStroke(t);else this._fabric_shape.setStrokeWidth(i),this._fabric_shape.setStroke(t)},activate:function(){this._activated=!0,this._fabric_shape.setOpacity(1),this.updateStroke(),this.canvas.renderAll()},deactivate:function(){this._activated=!1,this.updateStroke(),this.canvas.renderAll()}}}).call(e,i(0))},function(t,e,i){"use strict";(function(t){i(61),t.Barcode=t.util.createClass(t.Image,{type:"barcode",storeProperties:t.Object.prototype.storeProperties,stateProperties:t.Image.prototype.stateProperties.concat(["text"]),correctLevel:QRCode.CorrectLevel.L,setText:function(t){return this.text=t,this.qrcode=new QRCode({correctLevel:this.correctLevel}),this._element=this.qrcode.makeCode(t),this.dirty=!0,this.canvas.renderAll(),this},setCorrectLevel:function(){return this.qrcode=new QRCode({correctLevel:this.correctLevel}),this},initialize:function(t){this.setCorrectLevel(new QRCode({correctLevel:this.correctLevel||t.correctLevel}));var e=this.qrcode.makeCode(t.text);this.text=t.text,delete t.text,this.callSuper("initialize",e,t)}}),t.Barcode.fromObject=function(e){return new t.Barcode(e)}}).call(e,i(0))},function(t,e,i){"use strict";window.QRCode=function(){function t(t){this.mode=l.MODE_8BIT_BYTE,this.data=t,this.parsedData=[];for(var e=0,i=this.data.length;e<i;e++){var n=[],o=this.data.charCodeAt(e);o>65536?(n[0]=240|(1835008&o)>>>18,n[1]=128|(258048&o)>>>12,n[2]=128|(4032&o)>>>6,n[3]=128|63&o):o>2048?(n[0]=224|(61440&o)>>>12,n[1]=128|(4032&o)>>>6,n[2]=128|63&o):o>128?(n[0]=192|(1984&o)>>>6,n[1]=128|63&o):n[0]=o,this.parsedData.push(n)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function e(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function i(t,e){if(void 0==t.length)throw Error(t.length+"/"+e);for(var i=0;i<t.length&&0==t[i];)i++;this.num=Array(t.length-i+e);for(var n=0;n<t.length-i;n++)this.num[n]=t[n+i]}function n(t,e){this.totalCount=t,this.dataCount=e}function o(){this.buffer=[],this.length=0}function a(){var t=!1,e=navigator.userAgent;if(/android/i.test(e)){t=!0;var i=(""+e).match(/android ([0-9]\.[0-9])/i);i&&i[1]&&(t=parseFloat(i[1]))}return t}function s(t,e){for(var i=1,n=r(t),o=0,a=p.length;o<=a;o++){var s=0;switch(e){case u.L:s=p[o][0];break;case u.M:s=p[o][1];break;case u.Q:s=p[o][2];break;case u.H:s=p[o][3]}if(n<=s)break;i++}if(i>p.length)throw Error("Too long data");return i}function r(t){var e=(""+encodeURI(t)).replace(/\%[0-9a-fA-F]{2}/g,"a");return e.length+(e.length!=t?3:0)}var c;t.prototype={getLength:function(t){return this.parsedData.length},write:function(t){for(var e=0,i=this.parsedData.length;e<i;e++)t.put(this.parsedData[e],8)}},e.prototype={addData:function(e){var i=new t(e);this.dataList.push(i),this.dataCache=null},isDark:function(t,e){if(t<0||this.moduleCount<=t||e<0||this.moduleCount<=e)throw Error(t+","+e);return this.modules[t][e]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(t,i){this.moduleCount=4*this.typeNumber+17,this.modules=Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++){this.modules[n]=Array(this.moduleCount);for(var o=0;o<this.moduleCount;o++)this.modules[n][o]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,i),this.typeNumber>=7&&this.setupTypeNumber(t),null==this.dataCache&&(this.dataCache=e.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,i)},setupPositionProbePattern:function(t,e){for(var i=-1;i<=7;i++)if(!(t+i<=-1||this.moduleCount<=t+i))for(var n=-1;n<=7;n++)e+n<=-1||this.moduleCount<=e+n||(this.modules[t+i][e+n]=0<=i&&i<=6&&(0==n||6==n)||0<=n&&n<=6&&(0==i||6==i)||2<=i&&i<=4&&2<=n&&n<=4)},getBestMaskPattern:function(){for(var t=0,e=0,i=0;i<8;i++){this.makeImpl(!0,i);var n=h.getLostPoint(this);(0==i||t>n)&&(t=n,e=i)}return e},createMovieClip:function(t,e,i){var n=t.createEmptyMovieClip(e,i);this.make();for(var o=0;o<this.modules.length;o++)for(var a=1*o,s=0;s<this.modules[o].length;s++){var r=1*s,c=this.modules[o][s];c&&(n.beginFill(0,100),n.moveTo(r,a),n.lineTo(r+1,a),n.lineTo(r+1,a+1),n.lineTo(r,a+1),n.endFill())}return n},setupTimingPattern:function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=t%2==0);for(var e=8;e<this.moduleCount-8;e++)null==this.modules[6][e]&&(this.modules[6][e]=e%2==0)},setupPositionAdjustPattern:function(){for(var t=h.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var i=0;i<t.length;i++){var n=t[e],o=t[i];if(null==this.modules[n][o])for(var a=-2;a<=2;a++)for(var s=-2;s<=2;s++)this.modules[n+a][o+s]=-2==a||2==a||-2==s||2==s||0==a&&0==s}},setupTypeNumber:function(t){for(var e=h.getBCHTypeNumber(this.typeNumber),i=0;i<18;i++){var n=!t&&1==(e>>i&1);this.modules[Math.floor(i/3)][i%3+this.moduleCount-8-3]=n}for(var i=0;i<18;i++){var n=!t&&1==(e>>i&1);this.modules[i%3+this.moduleCount-8-3][Math.floor(i/3)]=n}},setupTypeInfo:function(t,e){for(var i=this.errorCorrectLevel<<3|e,n=h.getBCHTypeInfo(i),o=0;o<15;o++){var a=!t&&1==(n>>o&1);o<6?this.modules[o][8]=a:o<8?this.modules[o+1][8]=a:this.modules[this.moduleCount-15+o][8]=a}for(var o=0;o<15;o++){var a=!t&&1==(n>>o&1);o<8?this.modules[8][this.moduleCount-o-1]=a:o<9?this.modules[8][15-o-1+1]=a:this.modules[8][15-o-1]=a}this.modules[this.moduleCount-8][8]=!t},mapData:function(t,e){for(var i=-1,n=this.moduleCount-1,o=7,a=0,s=this.moduleCount-1;s>0;s-=2)for(6==s&&s--;;){for(var r=0;r<2;r++)if(null==this.modules[n][s-r]){var c=!1;a<t.length&&(c=1==(t[a]>>>o&1));var l=h.getMask(e,n,s-r);l&&(c=!c),this.modules[n][s-r]=c,o--,-1==o&&(a++,o=7)}if((n+=i)<0||this.moduleCount<=n){n-=i,i=-i;break}}}},e.PAD0=236,e.PAD1=17,e.createData=function(t,i,a){for(var s=n.getRSBlocks(t,i),r=new o,c=0;c<a.length;c++){var l=a[c];r.put(l.mode,4),r.put(l.getLength(),h.getLengthInBits(l.mode,t)),l.write(r)}for(var u=0,c=0;c<s.length;c++)u+=s[c].dataCount;if(r.getLengthInBits()>8*u)throw Error("code length overflow. ("+r.getLengthInBits()+">"+8*u+")");for(r.getLengthInBits()+4<=8*u&&r.put(0,4);r.getLengthInBits()%8!=0;)r.putBit(!1);for(;;){if(r.getLengthInBits()>=8*u)break;if(r.put(e.PAD0,8),r.getLengthInBits()>=8*u)break;r.put(e.PAD1,8)}return e.createBytes(r,s)},e.createBytes=function(t,e){for(var n=0,o=0,a=0,s=Array(e.length),r=Array(e.length),c=0;c<e.length;c++){var l=e[c].dataCount,u=e[c].totalCount-l;o=Math.max(o,l),a=Math.max(a,u),s[c]=Array(l);for(var d=0;d<s[c].length;d++)s[c][d]=255&t.buffer[d+n];n+=l;var f=h.getErrorCorrectPolynomial(u),p=new i(s[c],f.getLength()-1),g=p.mod(f);r[c]=Array(f.getLength()-1);for(var d=0;d<r[c].length;d++){var v=d+g.getLength()-r[c].length;r[c][d]=v>=0?g.get(v):0}}for(var m=0,d=0;d<e.length;d++)m+=e[d].totalCount;for(var b=Array(m),y=0,d=0;d<o;d++)for(var c=0;c<e.length;c++)d<s[c].length&&(b[y++]=s[c][d]);for(var d=0;d<a;d++)for(var c=0;c<e.length;c++)d<r[c].length&&(b[y++]=r[c][d]);return b};for(var l={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},u={L:1,M:0,Q:3,H:2},h={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){for(var e=t<<10;h.getBCHDigit(e)-h.getBCHDigit(h.G15)>=0;)e^=h.G15<<h.getBCHDigit(e)-h.getBCHDigit(h.G15);return(t<<10|e)^h.G15_MASK},getBCHTypeNumber:function(t){for(var e=t<<12;h.getBCHDigit(e)-h.getBCHDigit(h.G18)>=0;)e^=h.G18<<h.getBCHDigit(e)-h.getBCHDigit(h.G18);return t<<12|e},getBCHDigit:function(t){for(var e=0;0!=t;)e++,t>>>=1;return e},getPatternPosition:function(t){return h.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,i){switch(t){case 0:return(e+i)%2==0;case 1:return e%2==0;case 2:return i%3==0;case 3:return(e+i)%3==0;case 4:return(Math.floor(e/2)+Math.floor(i/3))%2==0;case 5:return e*i%2+e*i%3==0;case 6:return(e*i%2+e*i%3)%2==0;case 7:return(e*i%3+(e+i)%2)%2==0;default:throw Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new i([1],0),n=0;n<t;n++)e=e.multiply(new i([1,d.gexp(n)],0));return e},getLengthInBits:function(t,e){if(1<=e&&e<10)switch(t){case l.MODE_NUMBER:return 10;case l.MODE_ALPHA_NUM:return 9;case l.MODE_8BIT_BYTE:case l.MODE_KANJI:return 8;default:throw Error("mode:"+t)}else if(e<27)switch(t){case l.MODE_NUMBER:return 12;case l.MODE_ALPHA_NUM:return 11;case l.MODE_8BIT_BYTE:return 16;case l.MODE_KANJI:return 10;default:throw Error("mode:"+t)}else{if(!(e<41))throw Error("type:"+e);switch(t){case l.MODE_NUMBER:return 14;case l.MODE_ALPHA_NUM:return 13;case l.MODE_8BIT_BYTE:return 16;case l.MODE_KANJI:return 12;default:throw Error("mode:"+t)}}},getLostPoint:function(t){for(var e=t.getModuleCount(),i=0,n=0;n<e;n++)for(var o=0;o<e;o++){for(var a=0,s=t.isDark(n,o),r=-1;r<=1;r++)if(!(n+r<0||e<=n+r))for(var c=-1;c<=1;c++)o+c<0||e<=o+c||0==r&&0==c||s==t.isDark(n+r,o+c)&&a++;a>5&&(i+=3+a-5)}for(var n=0;n<e-1;n++)for(var o=0;o<e-1;o++){var l=0;t.isDark(n,o)&&l++,t.isDark(n+1,o)&&l++,t.isDark(n,o+1)&&l++,t.isDark(n+1,o+1)&&l++,0!=l&&4!=l||(i+=3)}for(var n=0;n<e;n++)for(var o=0;o<e-6;o++)t.isDark(n,o)&&!t.isDark(n,o+1)&&t.isDark(n,o+2)&&t.isDark(n,o+3)&&t.isDark(n,o+4)&&!t.isDark(n,o+5)&&t.isDark(n,o+6)&&(i+=40);for(var o=0;o<e;o++)for(var n=0;n<e-6;n++)t.isDark(n,o)&&!t.isDark(n+1,o)&&t.isDark(n+2,o)&&t.isDark(n+3,o)&&t.isDark(n+4,o)&&!t.isDark(n+5,o)&&t.isDark(n+6,o)&&(i+=40);for(var u=0,o=0;o<e;o++)for(var n=0;n<e;n++)t.isDark(n,o)&&u++;return i+=Math.abs(100*u/e/e-50)/5*10}},d={glog:function(t){if(t<1)throw Error("glog("+t+")");return d.LOG_TABLE[t]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return d.EXP_TABLE[t]},EXP_TABLE:Array(256),LOG_TABLE:Array(256)},f=0;f<8;f++)d.EXP_TABLE[f]=1<<f;for(var f=8;f<256;f++)d.EXP_TABLE[f]=d.EXP_TABLE[f-4]^d.EXP_TABLE[f-5]^d.EXP_TABLE[f-6]^d.EXP_TABLE[f-8];for(var f=0;f<255;f++)d.LOG_TABLE[d.EXP_TABLE[f]]=f;i.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=Array(this.getLength()+t.getLength()-1),n=0;n<this.getLength();n++)for(var o=0;o<t.getLength();o++)e[n+o]^=d.gexp(d.glog(this.get(n))+d.glog(t.get(o)));return new i(e,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var e=d.glog(this.get(0))-d.glog(t.get(0)),n=Array(this.getLength()),o=0;o<this.getLength();o++)n[o]=this.get(o);for(var o=0;o<t.getLength();o++)n[o]^=d.gexp(d.glog(t.get(o))+e);return new i(n,0).mod(t)}},n.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],n.getRSBlocks=function(t,e){var i=n.getRsBlockTable(t,e);if(void 0==i)throw Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var o=i.length/3,a=[],s=0;s<o;s++)for(var r=i[3*s+0],c=i[3*s+1],l=i[3*s+2],u=0;u<r;u++)a.push(new n(c,l));return a},n.getRsBlockTable=function(t,e){switch(e){case u.L:return n.RS_BLOCK_TABLE[4*(t-1)+0];case u.M:return n.RS_BLOCK_TABLE[4*(t-1)+1];case u.Q:return n.RS_BLOCK_TABLE[4*(t-1)+2];case u.H:return n.RS_BLOCK_TABLE[4*(t-1)+3];default:return}},o.prototype={get:function(t){var e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(var i=0;i<e;i++)this.putBit(1==(t>>>e-i-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var p=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],g=function(){var t=function(t){this._htOption=t};return t.prototype.draw=function(t){function e(t,e){var i=document.createElementNS("http://www.w3.org/2000/svg",t);for(var n in e)e.hasOwnProperty(n)&&i.setAttribute(n,e[n]);return i}var i=this._htOption,n=t.getModuleCount();Math.floor(i.width/n),Math.floor(i.height/n);this.clear();var o=e("svg",{viewBox:"0 0 "+n+" "+n,width:"100%",height:"100%",fill:i.colorLight});o.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),o.appendChild(e("rect",{fill:i.colorLight,width:"100%",height:"100%"})),o.appendChild(e("rect",{fill:i.colorDark,width:"1",height:"1",id:"template"}));for(var a=0;a<n;a++)for(var s=0;s<n;s++)if(t.isDark(a,s)){var r=e("use",{x:s+"",y:a+""});r.setAttributeNS("http://www.w3.org/1999/xlink","href","#template"),o.appendChild(r)}return o},t}(),v="svg"===document.documentElement.tagName.toLowerCase(),m=v?g:function(){return"undefined"!=typeof CanvasRenderingContext2D}()?function(){function t(){this._elCanvas=document.createElement("canvas")}function e(t,e){var i=this;if(i._fFail=e,i._fSuccess=t,null===i._bSupportDataURI){var n=document.createElement("img"),o=function(){i._bSupportDataURI=!1,i._fFail&&i._fFail.call(i)},a=function(){i._bSupportDataURI=!0,i._fSuccess&&i._fSuccess.call(i)};return n.onabort=o,n.onerror=o,n.onload=a,n.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==",n}!0===i._bSupportDataURI&&i._fSuccess?i._fSuccess.call(i):!1===i._bSupportDataURI&&i._fFail&&i._fFail.call(i)}if(window._android&&window._android<=2.1){var i=1/window.devicePixelRatio,n=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(t,e,o,a,s,r,c,l,u){if("nodeName"in t&&/img/i.test(t.nodeName))for(var h=arguments.length-1;h>=1;h--)arguments[h]=arguments[h]*i;else void 0===l&&(arguments[1]*=i,arguments[2]*=i,arguments[3]*=i,arguments[4]*=i);n.apply(this,arguments)}}var o=function(t){this._bIsPainted=!1,window._android=a(),this._htOption=t,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=t.width,this._elCanvas.height=t.height,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._elImage=document.createElement("img"),this._elImage.alt="Scan me!",this._elImage.style.display="none",this._bSupportDataURI=null};return o.prototype.draw=function(t){var e=this._elImage,i=this._oContext,n=this._htOption,o=t.getModuleCount(),a=n.width/o,s=n.height/o,r=Math.round(a),c=Math.round(s);e.style.display="none",this.clear();for(var l=0;l<o;l++)for(var u=0;u<o;u++){var h=t.isDark(l,u),d=u*a,f=l*s;i.strokeStyle=h?n.colorDark:n.colorLight,i.lineWidth=1,i.fillStyle=h?n.colorDark:n.colorLight,i.fillRect(d,f,a,s),i.strokeRect(Math.floor(d)+.5,Math.floor(f)+.5,r,c),i.strokeRect(Math.ceil(d)-.5,Math.ceil(f)-.5,r,c)}this._bIsPainted=!0},o.prototype.makeImage=function(){this._bIsPainted&&e.call(this,t);var i=new Image;return i.src=this._elCanvas.toDataURL(),i},o.prototype.isPainted=function(){return this._bIsPainted},o.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},o.prototype.round=function(t){return t?Math.floor(1e3*t)/1e3:t},o}():function(){var t=function(t){this._htOption=t};return t.prototype.draw=function(t){for(var e=this._htOption,i=t.getModuleCount(),n=Math.floor(e.width/i),o=Math.floor(e.height/i),a=['<table style="border:0;border-collapse:collapse;">'],s=0;s<i;s++){a.push("<tr>");for(var r=0;r<i;r++)a.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+n+"px;height:"+o+"px;background-color:"+(t.isDark(s,r)?e.colorDark:e.colorLight)+';"></td>');a.push("</tr>")}a.push("</table>"),_el.innerHTML=a.join("");var c=_el.childNodes[0],l=(e.width-c.offsetWidth)/2,u=(e.height-c.offsetHeight)/2;l>0&&u>0&&(c.style.margin=u+"px "+l+"px")},t.prototype.clear=function(){this._el.innerHTML=""},t}();return c=function(t){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:u.H},"string"==typeof t&&(t={text:t}),t)for(var e in t)this._htOption[e]=t[e];this._htOption.useSVG&&(m=g),window._android=a(),this._oQRCode=null,this._oDrawing=new m(this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)},c.prototype.makeCode=function(t){return this._oQRCode=new e(s(t,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(t),this._oQRCode.make(),this._oDrawing.draw(this._oQRCode),this.makeImage()},c.prototype.makeImage=function(){if("function"==typeof this._oDrawing.makeImage&&(!window._android||window._android>=3))return this._oDrawing.makeImage()},c.prototype.clear=function(){this._oDrawing.clear()},c.CorrectLevel=u,c}()},function(t,e,i){"use strict";(function(t){t.util.object.extend(t.Textbox.prototype,{stateProperties:t.Textbox.prototype.stateProperties.concat(["maxLines","maxWidth","fixedWidth","maxHeight","easyEdit"]),maxLines:0,maxWidth:0,fixedWidth:!1,maxHeight:0,_longLines:[],easyEdit:!1,setEasyEdit:function(t){this.easyEdit=t,t?(this._enterEditing=this.enterEditing.bind(this),this.on("selected",this._enterEditing)):(this.off("selected",this._enterEditing),delete this._enterEditing)},render:function(t){this.dirty&&(this._forceClearCache=!0,this._textLines=this._splitTextIntoLines(t),this._updateTextarea(),this.setCoords()),this.callSuper("render",t)},_getNewSelectionStartFromOffset:function(t,e,i,n,o){var a=t.x-e,s=i-t.x,r=s>a?0:1,c=n+r;this.flipX&&(c=o-c);for(var l=0,u=0,h=0,d=0;d<this._textLines.length&&!((l+=this._textLines[d].length)+u>=c);d++)this._longLines[d]&&(c--,h++),"\n"!==this.text[l+u]&&" "!==this.text[l+u]||u++;return c>this.text.length&&(c=this.text.length),c-d+u+h},_wrapLine:function(t,e,i){var n=0,o=[],a="",s=e.split(" "),r="",c=0,l=0,u=0,h=0,d=!0,f=this._getWidthOfCharSpacing();this._longLines=[];for(var p=this.maxWidth||this.fixedWidth&&this.width,g=!1,v=0;v<s.length;v++){r=s[v],l=this._measureText(t,r,i,c);if(p&&l>p){""!=a&&(o.push(a),this._longLines.push(g),g=!1,n=0,a="");for(var m=0,b=0,y=r.length;b<y&&m<p-10;b++)m+=this._getWidthOfChar(t,r[b],i,b+c);var I=r.substring(0,b-1);g=!0,s.splice(v,1,I,r.substr(b-1)),v--,d=!0}else n+=u+l-f,n>=this.width?d||(o.push(a),this._longLines.push(g),g=!1,a="",n=l,d=!0):n+=f,c+=r.length,d||(a+=" "),a+=r,u=this._measureText(t," ",i,c),c++,l>h&&(h=l),d=!1}return v&&o.push(a),this._longLines.push(!1),h>this.dynamicMinWidth&&(this.dynamicMinWidth=h-f),o},_renderText:function(t){this._renderTextFill(t),this._renderTextStroke(t),this._renderTextOversize(t)},_renderTextOversize:function(t){for(var e=0,i=0,n=this._textLines.length;i<n;i++){var o=this._getLineWidth(t,i),a=this._getLineLeftOffset(o),s=this._getHeightOfLine(t,i);this._longLines[i]&&t.fillRect(this._getLeftOffset()+a+o+2,this._getTopOffset()+e+s/2-1,5,this.fontSize/15),e+=s}},insertChar:function(t,e,i){var n="\n"===this.text[this.selectionStart],o=this.text;this._textLines,this._styleMap;this.text=this.text.slice(0,this.selectionStart)+t+this.text.slice(this.selectionEnd),this._textLines=this._splitTextIntoLines(),this.insertStyleObjects(t,n,i),this.selectionStart+=t.length,this.selectionEnd=this.selectionStart;var a=!1;if(this.maxHeight){for(var s=0,r=0;r<this._textLines.length;r++)s+=this._getHeightOfLine(this.ctx,0);s>this.maxHeight&&(a=!0)}this.maxLines&&this._textLines.length>this.maxLines&&(a=!0),a&&(this.text=o,this.selectionStart-=t.length,this.selectionEnd=this.selectionStart,this._textLines=this._splitTextIntoLines()),e||(this._updateTextarea(),this.setCoords(),this._fireSelectionChanged(),this.fire("changed"),this.restartCursorIfNeeded(),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.renderAll()))}})}).call(e,i(0))},function(t,e,i){"use strict";(function(t){t.util.object.extend(t.StaticCanvas.prototype,{_showMainLoaderIndicator:function(t){var e=t.target;e.loaderElement=$(this.loader.template),$(e.wrapperEl).append(e.loaderElement).addClass("loading")},_hideMainLoaderIndicator:function(t){var e=t.target;e.loaderElement.remove(),$(e.wrapperEl).removeClass("loading")}}),t.util.object.extend(t.Editor.prototype,{pending:!1,setPending:function(t){if(this.pending=t,t&&(this.canvas&&(this.canvas.interactive=!1),this.slides)){var e=!0,i=!1,n=void 0;try{for(var o,a=this.slides[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){o.value.interactive=!1}}catch(t){i=!0,n=t}finally{try{!e&&a.return&&a.return()}finally{if(i)throw n}}}},loader:{container:"",template:"<div class='canvas-loader'><span class='loader-spinner fa fa-pulse fa-spinner canvas-load-spinner'></span><span class='loader-message'>Loading...</span></div>",icon:"data:image/svg+xml;base64,"+i(64)},_showMainLoaderIndicator:function(t){$(this.canvasContainer).append(this._loaderElement).addClass("loading")},_hideMainLoaderIndicator:function(t){if(this.pending)return void(this.pending=!1);this._loaderElement.remove(),$(this.canvasContainer).removeClass("loading")},setLoader:function(t){t&&(t.constructor===String&&(t={id:t}),t.id&&(this._loaderElement=$(document.getElementById(t.id))),t.template&&(this.loader.template=t.template.replace("{loaderIcon}",this.loader.icon),this._loaderElement=$(this.loader.template)),t&&(this._loading&&this._showMainLoaderIndicator(),t.pending&&this._showMainLoaderIndicator(),this.on("loading:begin",this._showMainLoaderIndicator.bind(this)),this.on("loading:end",this._hideMainLoaderIndicator.bind(this))))}})}).call(e,i(0))},function(t,e){t.exports="PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHdpZHRoPScxODhweCcgaGVpZ2h0PScxODhweCcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQiIGNsYXNzPSJ1aWwtc3BpbiI+PHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEwMCIgaGVpZ2h0PSIxMDAiIGZpbGw9Im5vbmUiIGNsYXNzPSJiayI+PC9yZWN0PjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUwIDUwKSI+PGcgdHJhbnNmb3JtPSJyb3RhdGUoMCkgdHJhbnNsYXRlKDM0IDApIj48Y2lyY2xlIGN4PSIwIiBjeT0iMCIgcj0iOCIgZmlsbD0iI2NmZmZkZiI+PGFuaW1hdGUgYXR0cmlidXRlTmFtZT0ib3BhY2l0eSIgZnJvbT0iMSIgdG89IjAuMSIgYmVnaW49IjBzIiBkdXI9IjFzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSI+PC9hbmltYXRlPjxhbmltYXRlVHJhbnNmb3JtIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0ic2NhbGUiIGZyb209IjEuNSIgdG89IjEiIGJlZ2luPSIwcyIgZHVyPSIxcyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiPjwvYW5pbWF0ZVRyYW5zZm9ybT48L2NpcmNsZT48L2c+PGcgdHJhbnNmb3JtPSJyb3RhdGUoNDUpIHRyYW5zbGF0ZSgzNCAwKSI+PGNpcmNsZSBjeD0iMCIgY3k9IjAiIHI9IjgiIGZpbGw9IiNjZmZmZGYiPjxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9Im9wYWNpdHkiIGZyb209IjEiIHRvPSIwLjEiIGJlZ2luPSIwLjEycyIgZHVyPSIxcyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiPjwvYW5pbWF0ZT48YW5pbWF0ZVRyYW5zZm9ybSBhdHRyaWJ1dGVOYW1lPSJ0cmFuc2Zvcm0iIHR5cGU9InNjYWxlIiBmcm9tPSIxLjUiIHRvPSIxIiBiZWdpbj0iMC4xMnMiIGR1cj0iMXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIj48L2FuaW1hdGVUcmFuc2Zvcm0+PC9jaXJjbGU+PC9nPjxnIHRyYW5zZm9ybT0icm90YXRlKDkwKSB0cmFuc2xhdGUoMzQgMCkiPjxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSI4IiBmaWxsPSIjY2ZmZmRmIj48YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJvcGFjaXR5IiBmcm9tPSIxIiB0bz0iMC4xIiBiZWdpbj0iMC4yNXMiIGR1cj0iMXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIj48L2FuaW1hdGU+PGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJzY2FsZSIgZnJvbT0iMS41IiB0bz0iMSIgYmVnaW49IjAuMjVzIiBkdXI9IjFzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSI+PC9hbmltYXRlVHJhbnNmb3JtPjwvY2lyY2xlPjwvZz48ZyB0cmFuc2Zvcm09InJvdGF0ZSgxMzUpIHRyYW5zbGF0ZSgzNCAwKSI+PGNpcmNsZSBjeD0iMCIgY3k9IjAiIHI9IjgiIGZpbGw9IiNjZmZmZGYiPjxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9Im9wYWNpdHkiIGZyb209IjEiIHRvPSIwLjEiIGJlZ2luPSIwLjM3cyIgZHVyPSIxcyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiPjwvYW5pbWF0ZT48YW5pbWF0ZVRyYW5zZm9ybSBhdHRyaWJ1dGVOYW1lPSJ0cmFuc2Zvcm0iIHR5cGU9InNjYWxlIiBmcm9tPSIxLjUiIHRvPSIxIiBiZWdpbj0iMC4zN3MiIGR1cj0iMXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIj48L2FuaW1hdGVUcmFuc2Zvcm0+PC9jaXJjbGU+PC9nPjxnIHRyYW5zZm9ybT0icm90YXRlKDE4MCkgdHJhbnNsYXRlKDM0IDApIj48Y2lyY2xlIGN4PSIwIiBjeT0iMCIgcj0iOCIgZmlsbD0iI2NmZmZkZiI+PGFuaW1hdGUgYXR0cmlidXRlTmFtZT0ib3BhY2l0eSIgZnJvbT0iMSIgdG89IjAuMSIgYmVnaW49IjAuNXMiIGR1cj0iMXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIj48L2FuaW1hdGU+PGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJzY2FsZSIgZnJvbT0iMS41IiB0bz0iMSIgYmVnaW49IjAuNXMiIGR1cj0iMXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIj48L2FuaW1hdGVUcmFuc2Zvcm0+PC9jaXJjbGU+PC9nPjxnIHRyYW5zZm9ybT0icm90YXRlKDIyNSkgdHJhbnNsYXRlKDM0IDApIj48Y2lyY2xlIGN4PSIwIiBjeT0iMCIgcj0iOCIgZmlsbD0iI2NmZmZkZiI+PGFuaW1hdGUgYXR0cmlidXRlTmFtZT0ib3BhY2l0eSIgZnJvbT0iMSIgdG89IjAuMSIgYmVnaW49IjAuNjJzIiBkdXI9IjFzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSI+PC9hbmltYXRlPjxhbmltYXRlVHJhbnNmb3JtIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0ic2NhbGUiIGZyb209IjEuNSIgdG89IjEiIGJlZ2luPSIwLjYycyIgZHVyPSIxcyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiPjwvYW5pbWF0ZVRyYW5zZm9ybT48L2NpcmNsZT48L2c+PGcgdHJhbnNmb3JtPSJyb3RhdGUoMjcwKSB0cmFuc2xhdGUoMzQgMCkiPjxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSI4IiBmaWxsPSIjY2ZmZmRmIj48YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJvcGFjaXR5IiBmcm9tPSIxIiB0bz0iMC4xIiBiZWdpbj0iMC43NXMiIGR1cj0iMXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIj48L2FuaW1hdGU+PGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJzY2FsZSIgZnJvbT0iMS41IiB0bz0iMSIgYmVnaW49IjAuNzVzIiBkdXI9IjFzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSI+PC9hbmltYXRlVHJhbnNmb3JtPjwvY2lyY2xlPjwvZz48ZyB0cmFuc2Zvcm09InJvdGF0ZSgzMTUpIHRyYW5zbGF0ZSgzNCAwKSI+PGNpcmNsZSBjeD0iMCIgY3k9IjAiIHI9IjgiIGZpbGw9IiNjZmZmZGYiPjxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9Im9wYWNpdHkiIGZyb209IjEiIHRvPSIwLjEiIGJlZ2luPSIwLjg3cyIgZHVyPSIxcyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiPjwvYW5pbWF0ZT48YW5pbWF0ZVRyYW5zZm9ybSBhdHRyaWJ1dGVOYW1lPSJ0cmFuc2Zvcm0iIHR5cGU9InNjYWxlIiBmcm9tPSIxLjUiIHRvPSIxIiBiZWdpbj0iMC44N3MiIGR1cj0iMXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIj48L2FuaW1hdGVUcmFuc2Zvcm0+PC9jaXJjbGU+PC9nPjwvZz48L3N2Zz4="},function(t,e,i){"use strict";(function(t){t.webFontsLoader=i(66),t.loadFonts=function(e){var i=this;this.webFontsStatus="loading";var e=t.util.object.extend({active:function(){if(i.waitForWebfonts)t.util.fonts.waitFor(e.google.families.concat(e.custom.families),function(){i.webFontsStatus="ready",i.fire("fonts:loaded")});else{if(e.google&&e.google.families.length){var n=!0,o=!1,a=void 0;try{for(var s,r=e.google.families[Symbol.iterator]();!(n=(s=r.next()).done);n=!0){var c=s.value;t.util.clearFabricFontCache(c)}}catch(t){o=!0,a=t}finally{try{!n&&r.return&&r.return()}finally{if(o)throw a}}}if(e.custom&&e.custom.families.length){var l=!0,u=!1,h=void 0;try{for(var d,f=e.custom.families[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var p=d.value;t.util.clearFabricFontCache(p)}}catch(t){u=!0,h=t}finally{try{!l&&f.return&&f.return()}finally{if(u)throw h}}}i.webFontsStatus="ready",i.fire("fonts:loaded")}},inactive:function(){i.webFontsStatus="failed",i.fire("fonts:loaded")}},e);t.webFontsLoader.load(e)},t.util.object.extend(t.Editor.prototype,{setWebfonts:function(e,i){var n=[].concat(e.native||[]).concat(e.custom||[]).concat(e.google||[]);if(this.fonts=t.util.object.sortBy(n,function(t){return t}),"ready"===t.webFontsStatus||"failed"===t.webFontsStatus)return i();if(t.on("fonts:loaded fonts:failed",function(){i()}),"loading"!==t.webFontsStatus){if(t.isLikelyNode)return t.webFontsStatus="failed",i();e.google&&(e.google.length?e.google={families:e.google}:delete e.google),e.custom&&(e.custom.length?e.custom={families:e.custom}:delete e.custom),t.loadFonts(e)}},setFonts:function(t){this.fonts=t},fonts:["Arial","Arial Black","Comic Sans MS","Courier New","Georgia","Impact","Lucida Console","Tahoma","Times New Roman","Geneva","sans-serif","serif","monospace","cursive"],webfonts:null}),t.util.fonts={waitFor:function(e,i){function n(){for(var e=a.length;e--;)s.offsetWidth!==c&&(a.splice(a.indexOf(r),1),s.parentNode.removeChild(s),t.clearFabricFontCache(s.style.fontFamily),a.length||(clearInterval(o),i()))}for(var o,a=[],s=void 0,r=void 0,c=void 0,l=0,u=e.length;l<u;++l)r=e[l],s=document.createElement("span"),s.innerHTML="giItT1WQy@!-/#",s.style.position="absolute",s.style.left="-10000px",s.style.top="-10000px",s.style.fontSize="300px",s.style.fontFamily="sans-serif",s.style.fontVariant="normal",s.style.fontStyle="normal",s.style.fontWeight="normal",s.style.letterSpacing="0",document.body.appendChild(s),c=s.offsetWidth,s.style.fontFamily=r,s.offsetWidth===c?a.push(s):t.clearFabricFontCache(s.style.fontFamily);a.length?o=setInterval(n,50):i()}}}).call(e,i(0))},function(t,e,i){"use strict";var n;!function(){function o(t,e,i){return t.call.apply(t.bind,arguments)}function a(t,e,i){if(!t)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,n),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function s(t,e,i){return s=Function.prototype.bind&&-1!=(""+Function.prototype.bind).indexOf("native code")?o:a,s.apply(null,arguments)}function r(t,e){this.a=t,this.o=e||t,this.c=this.o.document}function c(t,e,i,n){if(e=t.c.createElement(e),i)for(var o in i)i.hasOwnProperty(o)&&("style"==o?e.style.cssText=i[o]:e.setAttribute(o,i[o]));return n&&e.appendChild(t.c.createTextNode(n)),e}function l(t,e,i){t=t.c.getElementsByTagName(e)[0],t||(t=document.documentElement),t.insertBefore(i,t.lastChild)}function u(t){t.parentNode&&t.parentNode.removeChild(t)}function h(t,e,i){e=e||[],i=i||[];for(var n=t.className.split(/\s+/),o=0;o<e.length;o+=1){for(var a=!1,s=0;s<n.length;s+=1)if(e[o]===n[s]){a=!0;break}a||n.push(e[o])}for(e=[],o=0;o<n.length;o+=1){for(a=!1,s=0;s<i.length;s+=1)if(n[o]===i[s]){a=!0;break}a||e.push(n[o])}t.className=e.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function d(t,e){for(var i=t.className.split(/\s+/),n=0,o=i.length;n<o;n++)if(i[n]==e)return!0;return!1}function f(t){return t.o.location.hostname||t.a.location.hostname}function p(t,e,i){function n(){r&&o&&a&&(r(s),r=null)}e=c(t,"link",{rel:"stylesheet",href:e,media:"all"});var o=!1,a=!0,s=null,r=i||null;at?(e.onload=function(){o=!0,n()},e.onerror=function(){o=!0,s=Error("Stylesheet failed to load"),n()}):setTimeout(function(){o=!0,n()},0),l(t,"head",e)}function g(t,e,i,n){var o=t.c.getElementsByTagName("head")[0];if(o){var a=c(t,"script",{src:e}),s=!1;return a.onload=a.onreadystatechange=function(){s||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(s=!0,i&&i(null),a.onload=a.onreadystatechange=null,"HEAD"==a.parentNode.tagName&&o.removeChild(a))},o.appendChild(a),setTimeout(function(){s||(s=!0,i&&i(Error("Script load timeout")))},n||5e3),a}return null}function v(){this.a=0,this.c=null}function m(t){return t.a++,function(){t.a--,y(t)}}function b(t,e){t.c=e,y(t)}function y(t){0==t.a&&t.c&&(t.c(),t.c=null)}function I(t){this.a=t||"-"}function C(t,e){this.c=t,this.f=4,this.a="n";var i=(e||"n4").match(/^([nio])([1-9])$/i);i&&(this.a=i[1],this.f=parseInt(i[2],10))}function _(t){return j(t)+" "+t.f+"00 300px "+A(t.c)}function A(t){var e=[];t=t.split(/,\s*/);for(var i=0;i<t.length;i++){var n=t[i].replace(/['"]/g,"");-1!=n.indexOf(" ")||/^\d/.test(n)?e.push("'"+n+"'"):e.push(n)}return e.join(",")}function w(t){return t.a+t.f}function j(t){var e="normal";return"o"===t.a?e="oblique":"i"===t.a&&(e="italic"),e}function x(t){var e=4,i="n",n=null;return t&&((n=t.match(/(normal|oblique|italic)/i))&&n[1]&&(i=n[1].substr(0,1).toLowerCase()),(n=t.match(/([1-9]00|normal|bold)/i))&&n[1]&&(/bold/i.test(n[1])?e=7:/[1-9]00/.test(n[1])&&(e=parseInt(n[1].substr(0,1),10)))),i+e}function S(t,e){this.c=t,this.f=t.o.document.documentElement,this.h=e,this.a=new I("-"),this.j=!1!==e.events,this.g=!1!==e.classes}function M(t){t.g&&h(t.f,[t.a.c("wf","loading")]),O(t,"loading")}function T(t){if(t.g){var e=d(t.f,t.a.c("wf","active")),i=[],n=[t.a.c("wf","loading")];e||i.push(t.a.c("wf","inactive")),h(t.f,i,n)}O(t,"inactive")}function O(t,e,i){t.j&&t.h[e]&&(i?t.h[e](i.c,w(i)):t.h[e]())}function k(){this.c={}}function L(t,e,i){var n,o=[];for(n in e)if(e.hasOwnProperty(n)){var a=t.c[n];a&&o.push(a(e[n],i))}return o}function E(t,e){this.c=t,this.f=e,this.a=c(this.c,"span",{"aria-hidden":"true"},this.f)}function D(t){l(t.c,"body",t.a)}function N(t){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+A(t.c)+";font-style:"+j(t)+";font-weight:"+t.f+"00;"}function z(t,e,i,n,o,a){this.g=t,this.j=e,this.a=n,this.c=i,this.f=o||3e3,this.h=a||void 0}function P(t,e,i,n,o,a,s){this.v=t,this.B=e,this.c=i,this.a=n,this.s=s||"BESbswy",this.f={},this.w=o||3e3,this.u=a||null,this.m=this.j=this.h=this.g=null,this.g=new E(this.c,this.s),this.h=new E(this.c,this.s),this.j=new E(this.c,this.s),this.m=new E(this.c,this.s),t=new C(this.a.c+",serif",w(this.a)),t=N(t),this.g.a.style.cssText=t,t=new C(this.a.c+",sans-serif",w(this.a)),t=N(t),this.h.a.style.cssText=t,t=new C("serif",w(this.a)),t=N(t),this.j.a.style.cssText=t,t=new C("sans-serif",w(this.a)),t=N(t),this.m.a.style.cssText=t,D(this.g),D(this.h),D(this.j),D(this.m)}function Z(){if(null===rt){var t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);rt=!!t&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))}return rt}function G(t,e,i){for(var n in st)if(st.hasOwnProperty(n)&&e===t.f[st[n]]&&i===t.f[st[n]])return!0;return!1}function F(t){var e,i=t.g.a.offsetWidth,n=t.h.a.offsetWidth;(e=i===t.f.serif&&n===t.f["sans-serif"])||(e=Z()&&G(t,i,n)),e?ot()-t.A>=t.w?Z()&&G(t,i,n)&&(null===t.u||t.u.hasOwnProperty(t.a.c))?Y(t,t.v):Y(t,t.B):R(t):Y(t,t.v)}function R(t){setTimeout(s(function(){F(this)},t),50)}function Y(t,e){setTimeout(s(function(){u(this.g.a),u(this.h.a),u(this.j.a),u(this.m.a),e(this.a)},t),0)}function B(t,e,i){this.c=t,this.a=e,this.f=0,this.m=this.j=!1,this.s=i}function W(t){0==--t.f&&t.j&&(t.m?(t=t.a,t.g&&h(t.f,[t.a.c("wf","active")],[t.a.c("wf","loading"),t.a.c("wf","inactive")]),O(t,"active")):T(t.a))}function X(t){this.j=t,this.a=new k,this.h=0,this.f=this.g=!0}function H(t,e,i,n,o){var a=0==--t.h;(t.f||t.g)&&setTimeout(function(){var t=o||null,r=n||null||{};if(0===i.length&&a)T(e.a);else{e.f+=i.length,a&&(e.j=a);var c,l=[];for(c=0;c<i.length;c++){var u=i[c],d=r[u.c],f=e.a,p=u;if(f.g&&h(f.f,[f.a.c("wf",p.c,""+w(p),"loading")]),O(f,"fontloading",p),f=null,null===ct)if(window.FontFace){var p=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent),g=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);ct=p?42<parseInt(p[1],10):!g}else ct=!1;f=ct?new z(s(e.g,e),s(e.h,e),e.c,u,e.s,d):new P(s(e.g,e),s(e.h,e),e.c,u,e.s,t,d),l.push(f)}for(c=0;c<l.length;c++)l[c].start()}},0)}function U(t,e,i){var n=[],o=i.timeout;M(e);var n=L(t.a,i,t.c),a=new B(t.c,e,o);for(t.h=n.length,e=0,i=n.length;e<i;e++)n[e].load(function(e,i,n){H(t,a,e,i,n)})}function V(t,e){this.c=t,this.a=e}function J(t,e){this.c=t,this.a=e}function K(t,e){this.c=t||lt,this.a=[],this.f=[],this.g=e||""}function $(t,e){for(var i=e.length,n=0;n<i;n++){var o=e[n].split(":");3==o.length&&t.f.push(o.pop());var a="";2==o.length&&""!=o[1]&&(a=":"),t.a.push(o.join(a))}}function Q(t){if(0==t.a.length)throw Error("No fonts to load!");if(-1!=t.c.indexOf("kit="))return t.c;for(var e=t.a.length,i=[],n=0;n<e;n++)i.push(t.a[n].replace(/ /g,"+"));return e=t.c+"?family="+i.join("%7C"),0<t.f.length&&(e+="&subset="+t.f.join(",")),0<t.g.length&&(e+="&text="+encodeURIComponent(t.g)),e}function q(t){this.f=t,this.a=[],this.c={}}function tt(t){for(var e=t.f.length,i=0;i<e;i++){var n=t.f[i].split(":"),o=n[0].replace(/\+/g," "),a=["n4"];if(2<=n.length){var s,r=n[1];if(s=[],r)for(var r=r.split(","),c=r.length,l=0;l<c;l++){var u;if(u=r[l],u.match(/^[\w-]+$/)){var h=ft.exec(u.toLowerCase());if(null==h)u="";else{if(u=h[2],u=null==u||""==u?"n":dt[u],null==(h=h[1])||""==h)h="4";else var d=ht[h],h=d||(isNaN(h)?"4":h.substr(0,1));u=""+u+h}}else u="";u&&s.push(u)}0<s.length&&(a=s),3==n.length&&(n=n[2],s=[],n=n?n.split(","):s,0<n.length&&(n=ut[n[0]])&&(t.c[o]=n))}for(t.c[o]||(n=ut[o])&&(t.c[o]=n),n=0;n<a.length;n+=1)t.a.push(new C(o,a[n]))}}function et(t,e){this.c=t,this.a=e}function it(t,e){this.c=t,this.a=e}function nt(t,e){this.c=t,this.f=e,this.a=[]}var ot=Date.now||function(){return+new Date},at=!!window.FontFace;I.prototype.c=function(t){for(var e=[],i=0;i<arguments.length;i++)e.push(arguments[i].replace(/[\W_]+/g,"").toLowerCase());return e.join(this.a)},z.prototype.start=function(){var t=this.c.o.document,e=this,i=ot(),n=new Promise(function(n,o){function a(){ot()-i>=e.f?o():t.fonts.load(_(e.a),e.h).then(function(t){1<=t.length?n():setTimeout(a,25)},function(){o()})}a()}),o=null,a=new Promise(function(t,i){o=setTimeout(i,e.f)});Promise.race([a,n]).then(function(){o&&(clearTimeout(o),o=null),e.g(e.a)},function(){e.j(e.a)})};var st={D:"serif",C:"sans-serif"},rt=null;P.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=ot(),F(this)};var ct=null;B.prototype.g=function(t){var e=this.a;e.g&&h(e.f,[e.a.c("wf",t.c,""+w(t),"active")],[e.a.c("wf",t.c,""+w(t),"loading"),e.a.c("wf",t.c,""+w(t),"inactive")]),O(e,"fontactive",t),this.m=!0,W(this)},B.prototype.h=function(t){var e=this.a;if(e.g){var i=d(e.f,e.a.c("wf",t.c,""+w(t),"active")),n=[],o=[e.a.c("wf",t.c,""+w(t),"loading")];i||n.push(e.a.c("wf",t.c,""+w(t),"inactive")),h(e.f,n,o)}O(e,"fontinactive",t),W(this)},X.prototype.load=function(t){this.c=new r(this.j,t.context||this.j),this.g=!1!==t.events,this.f=!1!==t.classes,U(this,new S(this.c,t),t)},V.prototype.load=function(t){function e(){if(a["__mti_fntLst"+n]){var i,o=a["__mti_fntLst"+n](),s=[];if(o)for(var r=0;r<o.length;r++){var c=o[r].fontfamily;void 0!=o[r].fontStyle&&void 0!=o[r].fontWeight?(i=o[r].fontStyle+o[r].fontWeight,s.push(new C(c,i))):s.push(new C(c))}t(s)}else setTimeout(function(){e()},50)}var i=this,n=i.a.projectId,o=i.a.version;if(n){var a=i.c.o;g(this.c,(i.a.api||"https://fast.fonts.net/jsapi")+"/"+n+".js"+(o?"?v="+o:""),function(o){o?t([]):(a["__MonotypeConfiguration__"+n]=function(){return i.a},e())}).id="__MonotypeAPIScript__"+n}else t([])},J.prototype.load=function(t){var e,i,n=this.a.urls||[],o=this.a.families||[],a=this.a.testStrings||{},s=new v;for(e=0,i=n.length;e<i;e++)p(this.c,n[e],m(s));var r=[];for(e=0,i=o.length;e<i;e++)if(n=o[e].split(":"),n[1])for(var c=n[1].split(","),l=0;l<c.length;l+=1)r.push(new C(n[0],c[l]));else r.push(new C(n[0]));b(s,function(){t(r,a)})};var lt="https://fonts.googleapis.com/css",ut={latin:"BESbswy","latin-ext":"çöüğş",cyrillic:"йяЖ",greek:"αβΣ",khmer:"កខគ",Hanuman:"កខគ"},ht={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},dt={i:"i",italic:"i",n:"n",normal:"n"},ft=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/,pt={Arimo:!0,Cousine:!0,Tinos:!0};et.prototype.load=function(t){var e=new v,i=this.c,n=new K(this.a.api,this.a.text),o=this.a.families;$(n,o);var a=new q(o);tt(a),p(i,Q(n),m(e)),b(e,function(){t(a.a,a.c,pt)})},it.prototype.load=function(t){var e=this.a.id,i=this.c.o;e?g(this.c,(this.a.api||"https://use.typekit.net")+"/"+e+".js",function(e){if(e)t([]);else if(i.Typekit&&i.Typekit.config&&i.Typekit.config.fn){e=i.Typekit.config.fn;for(var n=[],o=0;o<e.length;o+=2)for(var a=e[o],s=e[o+1],r=0;r<s.length;r++)n.push(new C(a,s[r]));try{i.Typekit.load({events:!1,classes:!1,async:!0})}catch(t){}t(n)}},2e3):t([])},nt.prototype.load=function(t){var e=this.f.id,i=this.c.o,n=this;e?(i.__webfontfontdeckmodule__||(i.__webfontfontdeckmodule__={}),i.__webfontfontdeckmodule__[e]=function(e,i){for(var o=0,a=i.fonts.length;o<a;++o){var s=i.fonts[o];n.a.push(new C(s.name,x("font-weight:"+s.weight+";font-style:"+s.style)))}t(n.a)},g(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+f(this.c)+"/"+e+".js",function(e){e&&t([])})):t([])};var gt=new X(window);gt.a.c.custom=function(t,e){return new J(e,t)},gt.a.c.fontdeck=function(t,e){return new nt(e,t)},gt.a.c.monotype=function(t,e){return new V(e,t)},gt.a.c.typekit=function(t,e){return new it(e,t)},gt.a.c.google=function(t,e){return new et(e,t)};var vt={load:s(gt.load,gt)};void 0!==(n=function(){return vt}.call(e,i,e,t))&&(t.exports=n)}()},function(t,e,i){"use strict";(function(t){if(!e){i(68);var e=i(1);i(69),i(71),i(73),i(74),i(75)}e.prototype.setFunctionCallback=function(t){return t.canvas?t.canvas.renderAll():t.renderAll?t.renderAll():void 0},t.ToolsMixin={_getTools:function(e,i){var n=-1;if(-1==(n=e.indexOf("*")))return e;var o=t.util.string.capitalize(t.util.string.camelize(i.type),!0),a=t[o].prototype,s=this.application.prototypes[o],r=s&&s.tools||a.tools;return r&&e.splice.apply(e,[n,1].concat(r)),this._getTools(e,a.__proto__)},setTools:function(t){if(this.application.toolbars.objects){var e=[].concat(t);this.tools=this._getTools(e,this.__proto__.__proto__),this.makeActions()}},makeActions:function(){var t={},i=!0,n=!1,o=void 0;try{for(var a,s=this.tools[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var r=a.value,c=this._getActionValue(r);c&&(t[r]=c)}}catch(t){n=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(n)throw o}}this.generatedActions=e.makeActions(t,this)}},t.Toolbar=e,t.util.object.extend(t.Object.prototype,t.ToolsMixin,{optionsOrder:function(){var e=t.Object.prototype.optionsOrder;return e.push("actions","tools"),e}()}),t.util.object.extend(t.Editor.prototype,t.ToolsMixin,{optionsOrder:function(){var e=t.Editor.prototype.optionsOrder;return e.splice(e.indexOf("prototypes")+1,0,"actions"),e.splice(e.indexOf("objects"),0,"toolbars","tools"),e}(),objectsToolbarContainer:null,target:null,setToolbarCoords:function(e,i,n){n=t.util.object.extend({originX:"left",originY:"top",marginX:0,marginY:0},n),i.setCoords();var o,a=i.getBoundingRect();switch(n.originX){case"left":o=a.left;break;case"right":o=a.left+a.width;break;case"center":o=a.left+a.width/2}var s;switch(n.originY){case"top":s=a.top-e.height();break;case"bottom":s=a.top+a.height;break;case"center":s=a.top+a.height/2-e.height()/2}var r=e.relativeParent(),c=$(e.parents()[0]).offset(),l=$(i.canvas.wrapperEl).offset(),u=($(i.canvas.wrapperEl).position(),$(i.canvas.wrapperEl).height()/i.canvas.height);s*=u,o*=u,s+=n.marginY+l.top-c.top,o+=n.marginX+l.left-c.left,o=Math.max(3,o);var h=-r.width()+o+e.width()+3;h>0&&(o-=h);var d={top:Math.max(3,s),left:o};return e.css(d),d},_createObjectsToolbar:function(e){var i,n=this;e.container?i=$(document.getElementById(e.container)):(i=$("<div>"),$(this.wrapperEl).prepend(i)),e.position&&(t.util.object.defaults(e.position,{originX:"left",originY:"top",marginX:0,marginY:0}),i.addClass("floated-menu"),i.css({position:"absolute","z-index":999})),i.hide(),this.on({"target:cleared":function(t){t.previous&&(i.hide(),n.objectToolbar.destroy(),delete n.objectToolbar)},"target:changed":function(o){o.previous&&n.objectToolbar.destroy(),i.show(),n.target.actions&&(n.objectToolbar=new t.Toolbar(n.target,i,n.target.generatedActions,e)),e.position&&n.setToolbarCoords(i,n.target,e.position)},"target:modified":function(t){e.position&&n.setToolbarCoords(i,n.target,e.position)}})},_createCanvasToolbar:function(e){e&&(this.on("slide:changed",function(i){var n=i.canvas;this.slideToolbar&&this.slideToolbar.destroy(),this.slideToolbar=new t.Toolbar(n,e.container,n.generatedActions,e)}),this.canvas&&(this.slideToolbar=new t.Toolbar(this.canvas,e.container,this.canvas.generatedActions,e)))},setToolbars:function(t){if(this.toolbars=t,t.tools){t.tools.Editor&&(this.setTools(t.tools.Editor),delete t.tools.Editor);for(var e in t.tools)this.prototypes[e]||(this.prototypes[e]={}),this.prototypes[e].tools=t.tools[e]}t.application,t.objects&&this._createObjectsToolbar(t.objects),t.canvas&&this._createCanvasToolbar(t.canvas)},setTools:function(e){if(this.toolbars.application){var i=[].concat(e);this.tools=this._getTools(i,this.__proto__.__proto__),this.makeActions(),new t.Toolbar(this,this.toolbars.application.container,this.generatedActions,this.toolbars.application)}},eventListeners:t.util.object.extendArraysObject(t.Editor.prototype.eventListeners,{})}),t.util.object.extend(t.Canvas.prototype,t.ToolsMixin,{setTools:function(t){if(this.application.toolbars.canvas){var e=[].concat(t);this.tools=this._getTools(e,this.__proto__.__proto__),this.makeActions()}},optionsOrder:function(){var e=t.StaticCanvas.prototype.optionsOrder;return e.push("actions","tools"),e}()})}).call(e,i(0))},function(t,e,i){"use strict";$.fn.extend({relativeParent:function(){var t=/(static|relative|absolute)/,e=this.parents().filter(function(){var e=$(this);return t.test(e.css("position"))}).eq(0);return e.length?e:$(this[0].ownerDocument||document)},scrollParent:function(t){var e=this.css("position"),i="absolute"===e,n=t?/(auto|scroll|hidden)/:/(auto|scroll)/,o=this.parents().filter(function(){var t=$(this);return(!i||"static"!==t.css("position"))&&n.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==e&&o.length?o:$(this[0].ownerDocument||document)},eachSelf:function(t,e){this.find(t).each(e),this.is(t)&&e.call(this[0])}}),$.fn.appendText=function(t){return this.each(function(){var e=document.createTextNode(t);$(this).append(e)})}},function(t,e,i){"use strict";(function(t){if($.minicolors||i(70),void 0===e)var e=i(1);e.prototype.colorpicker=function(t,e){e.format="rgb",e.opacity=!0,t.minicolors(e)},e.prototype.colorpickerOptions={position:"right bottom"},e.prototype.tools.color={template:'<div class="object-menu-item" title="{title}"><div class="btn button-{id} {className}"><input type="text" data-format="rgba" data-opacity="true" data-text="true" data-control="saturation" data-swatches="#fff|#000|#f00|#0f0|#00f|#ff0|#0ff"  value="{valueCurrent}" transclude>',post:function(e,i,n,o){var a=!1;this.colorpicker(o,t.util.object.extend({defaultValue:i.value.get(),control:"hue",format:"hex",keywords:"",inline:!1,letterCase:"lowercase",opacity:!0,position:"right bottom",swatches:"#fff|#000|#f00|#0f0|#00f|#ff0|#0ff".split("|"),text:!0,hide:function(){a=!1},show:function(){a=!0},change:function(t,e){i.value.set(t)}},n.colorpicker));var s=$(o.parents()[0]).find(".minicolors-panel"),r=function t(e){a&&-1==$(e.target).parents().index(s)&&(o.minicolors("hide"),$("body").off("mousedown",t))};$("body").on("mousedown",r)}}}).call(e,i(0))},function(t,e,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};/*
 * jQuery MiniColors: A tiny color picker built on jQuery
 *
 * Copyright: Cory LaViska for A Beautiful Site, LLC: http://www.abeautifulsite.net/
 *
 * Contribute: https://github.com/claviska/jquery-minicolors
 *
 * @license: http://opensource.org/licenses/MIT
 *
 */
!function(o){"object"===n(e)?t.exports=o(i(7)):o(jQuery)}(function(t){function e(e,i){var n,o,a,s,r,c,u=t('<div class="minicolors" />'),h=t.minicolors.defaults;if(!e.data("minicolors-initialized")){if(M=i=t.extend(!0,{},h,i),u.addClass("minicolors-theme-"+i.theme).toggleClass("minicolors-with-opacity",i.opacity).toggleClass("minicolors-no-data-uris",!0!==i.dataUris),void 0!==i.position&&t.each(i.position.split(" "),function(){u.addClass("minicolors-position-"+this)}),n="rgb"===i.format?i.opacity?"25":"20":i.keywords?"11":"7",T=e,e.addClass("minicolors-input").data("minicolors-initialized",!1).data("minicolors-settings",i).prop("size",n).wrap(u).after('<div class="minicolors-panel minicolors-slider-'+i.control+'"><div class="minicolors-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-opacity-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-grid minicolors-sprite"><div class="minicolors-grid-inner"></div><div class="minicolors-picker"><div></div></div></div></div>'),i.inline||(e.after('<span class="minicolors-swatch minicolors-sprite minicolors-input-swatch"><span class="minicolors-swatch-color"></span></span>'),e.next(".minicolors-input-swatch").on("click",function(t){t.preventDefault(),e.focus()})),r=e.parent().find(".minicolors-panel"),r.on("selectstart",function(){return!1}).end(),i.swatches&&0!==i.swatches.length)for(i.swatches.length>7&&(i.swatches.length=7),r.addClass("minicolors-with-swatches"),o=t('<ul class="minicolors-swatches"></ul>').appendTo(r),c=0;c<i.swatches.length;++c)s=i.swatches[c],s=b(s)?g(s,!0):x(p(s,!0)),t('<li class="minicolors-swatch minicolors-sprite"><span class="minicolors-swatch-color"></span></li>').appendTo(o).data("swatch-color",i.swatches[c]).find(".minicolors-swatch-color").css({backgroundColor:_(s),opacity:s.a}),i.swatches[c]=s;i.text&&(r.addClass("minicolors-with-text"),a=t('<div class="minicolors-text"></div>').appendTo(r),S=t('<input type="text">').appendTo(a),t(S).change(function(){e.val(S.val()),l(e,!0)})),i.inline&&e.parent().addClass("minicolors-inline"),l(e,!1),e.data("minicolors-initialized",!0)}}function i(t){var e=t.parent();t.removeData("minicolors-initialized").removeData("minicolors-settings").removeProp("size").removeClass("minicolors-input"),e.before(t).remove()}function o(t){var e=t.parent(),i=e.find(".minicolors-panel"),n=t.data("minicolors-settings");!t.data("minicolors-initialized")||t.prop("disabled")||e.hasClass("minicolors-inline")||e.hasClass("minicolors-focus")||(a(),e.addClass("minicolors-focus"),i.stop(!0,!0).fadeIn(n.showSpeed,function(){n.show&&n.show.call(t.get(0))}))}function a(){t(".minicolors-focus").each(function(){var e=t(this),i=e.find(".minicolors-input"),n=e.find(".minicolors-panel"),o=i.data("minicolors-settings");n.fadeOut(o.hideSpeed,function(){o.hide&&o.hide.call(i.get(0)),e.removeClass("minicolors-focus")})})}function s(t,e,i){var n,o,a,s,c=t.parents(".minicolors").find(".minicolors-input"),l=c.data("minicolors-settings"),u=t.find("[class$=-picker]"),h=t.offset().left,d=t.offset().top,f=Math.round(e.pageX-h),p=Math.round(e.pageY-d),g=i?l.animationSpeed:0;e.originalEvent.changedTouches&&(f=e.originalEvent.changedTouches[0].pageX-h,p=e.originalEvent.changedTouches[0].pageY-d),f<0&&(f=0),p<0&&(p=0),f>t.width()&&(f=t.width()),p>t.height()&&(p=t.height()),t.parent().is(".minicolors-slider-wheel")&&u.parent().is(".minicolors-grid")&&(n=75-f,o=75-p,a=Math.sqrt(n*n+o*o),s=Math.atan2(o,n),s<0&&(s+=2*Math.PI),a>75&&(a=75,f=75-75*Math.cos(s),p=75-75*Math.sin(s)),f=Math.round(f),p=Math.round(p)),t.is(".minicolors-grid")?u.stop(!0).animate({top:p+"px",left:f+"px"},g,l.animationEasing,function(){r(c,t)}):u.stop(!0).animate({top:p+"px"},g,l.animationEasing,function(){r(c,t)})}function r(t,e){function i(t,e){var i,n;return t.length&&e?(i=t.offset().left,n=t.offset().top,{x:i-e.offset().left+t.outerWidth()/2,y:n-e.offset().top+t.outerHeight()/2}):null}var n,o,a,s,r,l,h,d=t.val(),f=t.attr("data-opacity"),p=t.parent(),g=t.data("minicolors-settings"),v=p.find(".minicolors-input-swatch"),b=p.find(".minicolors-grid"),y=p.find(".minicolors-slider"),I=p.find(".minicolors-opacity-slider"),C=b.find("[class$=-picker]"),_=y.find("[class$=-picker]"),w=I.find("[class$=-picker]"),j=i(C,b),x=i(_,y),S=i(w,I);if(e.is(".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider")){switch(g.control){case"wheel":s=b.width()/2-j.x,r=b.height()/2-j.y,l=Math.sqrt(s*s+r*r),h=Math.atan2(r,s),h<0&&(h+=2*Math.PI),l>75&&(l=75,j.x=69-75*Math.cos(h),j.y=69-75*Math.sin(h)),o=m(l/.75,0,100),n=m(180*h/Math.PI,0,360),a=m(100-Math.floor(x.y*(100/y.height())),0,100),d=A({h:n,s:o,b:a}),y.css("backgroundColor",A({h:n,s:o,b:100}));break;case"saturation":n=m(parseInt(j.x*(360/b.width()),10),0,360),o=m(100-Math.floor(x.y*(100/y.height())),0,100),a=m(100-Math.floor(j.y*(100/b.height())),0,100),d=A({h:n,s:o,b:a}),y.css("backgroundColor",A({h:n,s:100,b:a})),p.find(".minicolors-grid-inner").css("opacity",o/100);break;case"brightness":n=m(parseInt(j.x*(360/b.width()),10),0,360),o=m(100-Math.floor(j.y*(100/b.height())),0,100),a=m(100-Math.floor(x.y*(100/y.height())),0,100),d=A({h:n,s:o,b:a}),y.css("backgroundColor",A({h:n,s:o,b:100})),p.find(".minicolors-grid-inner").css("opacity",1-a/100);break;default:n=m(360-parseInt(x.y*(360/y.height()),10),0,360),o=m(Math.floor(j.x*(100/b.width())),0,100),a=m(100-Math.floor(j.y*(100/b.height())),0,100),d=A({h:n,s:o,b:a}),b.css("backgroundColor",A({h:n,s:100,b:100}))}f=g.opacity?parseFloat(1-S.y/I.height()).toFixed(2):1,c(t,d,f)}else v.find("span").css({backgroundColor:d,opacity:f}),u(t,d,f)}function c(t,e,i){var n,o=t.parent(),a=t.data("minicolors-settings"),s=o.find(".minicolors-input-swatch");a.opacity&&t.attr("data-opacity",i),"rgb"===a.format?(n=b(e)?g(e,!0):x(p(e,!0)),i=""===t.attr("data-opacity")?1:m(parseFloat(t.attr("data-opacity")).toFixed(2),0,1),!isNaN(i)&&a.opacity||(i=1),e=t.minicolors("rgbObject").a<=1&&n&&a.opacity?"rgba("+n.r+", "+n.g+", "+n.b+", "+parseFloat(i)+")":"rgb("+n.r+", "+n.g+", "+n.b+")"):(b(e)&&(e=C(e)),e=f(e,a.letterCase)),t.val(e),S&&S.val(e),s.find("span").css({backgroundColor:e,opacity:i}),u(t,e,i)}function l(e,i){var n,o,a,s,r,c,l,h,d,I,_=M,j=e.parent(),x=j.find(".minicolors-input-swatch"),O=j.find(".minicolors-grid"),k=j.find(".minicolors-slider"),L=j.find(".minicolors-opacity-slider"),E=O.find("[class$=-picker]"),D=k.find("[class$=-picker]"),N=L.find("[class$=-picker]");switch(b(e.val())?(n=C(e.val()),(r=m(parseFloat(y(e.val())).toFixed(2),0,1))&&e.attr("data-opacity",r)):n=f(p(e.val(),!0),_.letterCase),n||(n=f(v(_.defaultValue,!0),_.letterCase)),o=w(n),s=_.keywords?t.map(_.keywords.split(","),function(e){return t.trim(e.toLowerCase())}):[],c=""!==e.val()&&t.inArray(e.val().toLowerCase(),s)>-1?f(e.val()):b(e.val())?g(e.val()):n,i||(T.val(c),S&&S.val(c)),M=_,_.opacity&&(a=""===e.attr("data-opacity")?1:m(parseFloat(e.attr("data-opacity")).toFixed(2),0,1),isNaN(a)&&(a=1),e.attr("data-opacity",a),x.find("span").css("opacity",a),h=m(L.height()-L.height()*a,0,L.height()),N.css("top",h+"px")),"transparent"===e.val().toLowerCase()&&x.find("span").css("opacity",0),x.find("span").css("backgroundColor",n),_.control){case"wheel":d=m(Math.ceil(.75*o.s),0,O.height()/2),I=o.h*Math.PI/180,l=m(75-Math.cos(I)*d,0,O.width()),h=m(75-Math.sin(I)*d,0,O.height()),E.css({top:h+"px",left:l+"px"}),h=150-o.b/(100/O.height()),""===n&&(h=0),D.css("top",h+"px"),k.css("backgroundColor",A({h:o.h,s:o.s,b:100}));break;case"saturation":l=m(5*o.h/12,0,150),h=m(O.height()-Math.ceil(o.b/(100/O.height())),0,O.height()),E.css({top:h+"px",left:l+"px"}),h=m(k.height()-o.s*(k.height()/100),0,k.height()),D.css("top",h+"px"),k.css("backgroundColor",A({h:o.h,s:100,b:o.b})),j.find(".minicolors-grid-inner").css("opacity",o.s/100);break;case"brightness":l=m(5*o.h/12,0,150),h=m(O.height()-Math.ceil(o.s/(100/O.height())),0,O.height()),E.css({top:h+"px",left:l+"px"}),h=m(k.height()-o.b*(k.height()/100),0,k.height()),D.css("top",h+"px"),k.css("backgroundColor",A({h:o.h,s:o.s,b:100})),j.find(".minicolors-grid-inner").css("opacity",1-o.b/100);break;default:l=m(Math.ceil(o.s/(100/O.width())),0,O.width()),h=m(O.height()-Math.ceil(o.b/(100/O.height())),0,O.height()),E.css({top:h+"px",left:l+"px"}),h=m(k.height()-o.h/(360/k.height()),0,k.height()),D.css("top",h+"px"),O.css("backgroundColor",A({h:o.h,s:100,b:100}))}e.data("minicolors-initialized")&&u(e,c,a)}function u(t,e,i){var n,o,a=t.data("minicolors-settings"),s=t.data("minicolors-lastChange");if(!s||s.value!==e||s.opacity!==i){if(t.data("minicolors-lastChange",{value:e,opacity:i}),a.swatches&&0!==a.swatches.length){for(n=b(e)?g(e,!0):x(e),-1,o=0;o<a.swatches.length;++o)if(n.r===a.swatches[o].r&&n.g===a.swatches[o].g&&n.b===a.swatches[o].b&&n.a===a.swatches[o].a){o;break}t.parent().find(".minicolors-swatches .minicolors-swatch").removeClass("selected"),-1!==o&&t.parent().find(".minicolors-swatches .minicolors-swatch").eq(o).addClass("selected")}a.change&&(a.changeDelay?(clearTimeout(t.data("minicolors-changeTimeout")),t.data("minicolors-changeTimeout",setTimeout(function(){a.change.call(t.get(0),e,i)},a.changeDelay))):a.change.call(t.get(0),e,i)),t.trigger("change").trigger("input")}}function h(e){var i=p(t(e).val(),!0),n=x(i),o=t(e).attr("data-opacity");return n?(void 0!==o&&t.extend(n,{a:parseFloat(o)}),n):null}function d(e,i){var n=p(t(e).val(),!0),o=x(n),a=t(e).attr("data-opacity");return o?(void 0===a&&(a=1),i?"rgba("+o.r+", "+o.g+", "+o.b+", "+parseFloat(a)+")":"rgb("+o.r+", "+o.g+", "+o.b+")"):null}function f(t,e){return"uppercase"===e?t.toUpperCase():t.toLowerCase()}function p(t,e){return t=t.replace(/^#/g,""),t.match(/^[A-F0-9]{3,6}/gi)?3!==t.length&&6!==t.length?"":(3===t.length&&e&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),"#"+t):""}function g(t,e){var i=t.replace(/[^\d,.]/g,""),n=i.split(",");return n[0]=m(parseInt(n[0],10),0,255),n[1]=m(parseInt(n[1],10),0,255),n[2]=m(parseInt(n[2],10),0,255),n[3]&&(n[3]=m(parseFloat(n[3],10),0,1)),e?{r:n[0],g:n[1],b:n[2],a:n[3]?n[3]:null}:void 0!==n[3]&&n[3]<=1?"rgba("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+")":"rgb("+n[0]+", "+n[1]+", "+n[2]+")"}function v(t,e){return b(t)?g(t):p(t,e)}function m(t,e,i){return t<e&&(t=e),t>i&&(t=i),t}function b(t){var e=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);return!(!e||4!==e.length)}function y(t){return t=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+(\.\d{1,2})?|\.\d{1,2})[\s+]?/i),t&&6===t.length?t[4]:"1"}function I(t){var e={},i=Math.round(t.h),n=Math.round(255*t.s/100),o=Math.round(255*t.b/100);if(0===n)e.r=e.g=e.b=o;else{var a=o,s=(255-n)*o/255,r=i%60*(a-s)/60;360===i&&(i=0),i<60?(e.r=a,e.b=s,e.g=s+r):i<120?(e.g=a,e.b=s,e.r=a-r):i<180?(e.g=a,e.r=s,e.b=s+r):i<240?(e.b=a,e.r=s,e.g=a-r):i<300?(e.b=a,e.g=s,e.r=s+r):i<360?(e.r=a,e.g=s,e.b=a-r):(e.r=0,e.g=0,e.b=0)}return{r:Math.round(e.r),g:Math.round(e.g),b:Math.round(e.b)}}function C(t){return t=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i),t&&4===t.length?"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2):""}function _(e){var i=[e.r.toString(16),e.g.toString(16),e.b.toString(16)];return t.each(i,function(t,e){1===e.length&&(i[t]="0"+e)}),"#"+i.join("")}function A(t){return _(I(t))}function w(t){var e=j(x(t));return 0===e.s&&(e.h=360),e}function j(t){var e={h:0,s:0,b:0},i=Math.min(t.r,t.g,t.b),n=Math.max(t.r,t.g,t.b),o=n-i;return e.b=n,e.s=0!==n?255*o/n:0,0!==e.s?t.r===n?e.h=(t.g-t.b)/o:t.g===n?e.h=2+(t.b-t.r)/o:e.h=4+(t.r-t.g)/o:e.h=-1,e.h*=60,e.h<0&&(e.h+=360),e.s*=100/255,e.b*=100/255,e}function x(t){return t=parseInt(t.indexOf("#")>-1?t.substring(1):t,16),{r:t>>16,g:(65280&t)>>8,b:255&t}}t.minicolors={defaults:{animationSpeed:50,animationEasing:"swing",change:null,changeDelay:0,control:"hue",dataUris:!0,defaultValue:"",format:"hex",hide:null,hideSpeed:100,inline:!1,keywords:"",letterCase:"lowercase",opacity:!1,position:"bottom left",show:null,showSpeed:100,theme:"default",swatches:[]}},t.extend(t.fn,{minicolors:function(s,r){switch(s){case"destroy":return t(this).each(function(){i(t(this))}),t(this);case"hide":return a(),t(this);case"opacity":return void 0===r?t(this).attr("data-opacity"):(t(this).each(function(){l(t(this).attr("data-opacity",r))}),t(this));case"rgbObject":return h(t(this));case"rgbString":case"rgbaString":return d(t(this),"rgbaString"===s);case"settings":return void 0===r?t(this).data("minicolors-settings"):(t(this).each(function(){var e=t(this).data("minicolors-settings")||{};i(t(this)),t(this).minicolors(t.extend(!0,e,r))}),t(this));case"show":return o(t(this).eq(0)),t(this);case"value":return void 0===r?t(this).val():(t(this).each(function(){"object"===(void 0===r?"undefined":n(r))?(r.opacity&&t(this).attr("data-opacity",m(r.opacity,0,1)),r.color&&t(this).val(r.color)):t(this).val(r),l(t(this))}),t(this));default:return"create"!==s&&(r=s),t(this).each(function(){e(t(this),r)}),t(this)}}});var S,M,T;t(document).on("mousedown.minicolors touchstart.minicolors",function(e){t(e.target).parents().add(e.target).hasClass("minicolors")||a()}).on("mousedown.minicolors touchstart.minicolors",".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider",function(e){var i=t(this);e.preventDefault(),t(document).data("minicolors-target",i),s(i,e,!0)}).on("mousemove.minicolors touchmove.minicolors",function(e){var i=t(document).data("minicolors-target");i&&s(i,e)}).on("mouseup.minicolors touchend.minicolors",function(){t(this).removeData("minicolors-target")}).on("click.minicolors",".minicolors-swatches li",function(e){e.preventDefault();var i=t(this),n=i.parents(".minicolors").find(".minicolors-input"),o=i.data("swatch-color");c(n,o,y(o)),l(n)}).on("mousedown.minicolors touchstart.minicolors",".minicolors-input-swatch",function(e){var i=t(this).parent().find(".minicolors-input");e.preventDefault(),"none"!==i.parent().find(".minicolors-panel").css("display")||o(i)}).on("focus.minicolors",".minicolors-input",function(){var e=t(this);e.data("minicolors-initialized")&&o(e)}).on("blur.minicolors",".minicolors-input",function(){var e,i,n,o,a,s=t(this),r=s.data("minicolors-settings");s.data("minicolors-initialized")&&(e=r.keywords?t.map(r.keywords.split(","),function(e){return t.trim(e.toLowerCase())}):[],""!==s.val()&&t.inArray(s.val().toLowerCase(),e)>-1?a=s.val():(b(s.val())?n=g(s.val(),!0):(i=p(s.val(),!0),n=i?x(i):null),a=null===n?r.defaultValue:"rgb"===r.format?g(r.opacity?"rgba("+n.r+","+n.g+","+n.b+","+s.attr("data-opacity")+")":"rgb("+n.r+","+n.g+","+n.b+")"):_(n)),o=r.opacity?s.attr("data-opacity"):1,"transparent"===a.toLowerCase()&&(o=0),s.closest(".minicolors").find(".minicolors-input-swatch > span").css("opacity",o),s.val(a),""===s.val()&&s.val(v(r.defaultValue,!0)),s.val(f(s.val(),r.letterCase)))}).on("keydown.minicolors",".minicolors-input",function(e){var i=t(this);if(i.data("minicolors-initialized"))switch(e.keyCode){case 9:a();break;case 13:case 27:a(),i.blur()}}).on("keyup.minicolors",".minicolors-input",function(){var e=t(this);e.data("minicolors-initialized")&&l(e,!0)}).on("paste.minicolors",".minicolors-input",function(){var e=t(this);e.data("minicolors-initialized")&&setTimeout(function(){l(e,!0)},1)})})},function(t,e,i){"use strict";if($.fontSelector||i(72),void 0===n)var n=i(1);n.prototype.fonts=["Arial,Helvetica,sans-serif","Arial Black,Gadget,sans-serif","Comic Sans MS,cursive","Courier New,Courier,monospace","Georgia,serif","Impact,Charcoal,sans-serif","Lucida Console,Monaco,monospace","Lucida Sans Unicode,Lucida Grande,sans-serif","Palatino Linotype,Book Antiqua,Palatino,serif","Tahoma,Geneva,sans-serif","Times New Roman,Times,serif","Trebuchet MS,Helvetica,sans-serif","Verdana,Geneva,sans-serif","Gill Sans,Geneva,sans-serif"],n.prototype.tools.fontFamily={scope:function(t,e){return{onchange:function(e){t.value.set(parseFloat($(e.target).val()))}}},template:'<div class="object-menu-item object-menu-font-family" title="{title}">\n      <label class="btn button-{id} {className}">\n      <div class="fontSelect" transclude><div class="arrow-down">',post:function(t,e,i,n){n.fontSelector({hide_fallbacks:!0,initial:e.value.get(),selected:e.value.set.bind(e.target),fonts:e.data}),this.on("destroy",function(){n.fontSelector("destroy")})}}},function(t,e,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(o){"object"===n(e)?t.exports=o(i(7)):o(jQuery)}(function(t){var e,i={destroy:function(t){this.ul.remove()},close:function(t){this.closeUl()},init:function(i){e=t.extend({hide_fallbacks:!1,selected:function(t){},opened:function(){},closed:function(){},initial:"",fonts:[]},i);var n=this,o=t(this);n.selectedCallback=e.selected,n.openedCallback=e.opened,n.closedCallback=e.closed;var a=!1,s=!1,r=function(t){if(e.hide_fallbacks){var i=t.indexOf(",");return-1==i?t:t.substr(0,i)}return t},c=function(t,e){n.find("span").html(r(t).replace(/["']{1}/gi,"")),n.css("font-family",t),s=t,e||n.selectedCallback(s)},l=function(){var e,i;e=t(n).offset().left,i=t(n).offset().top+t(n).outerHeight(),t(d).css({position:"absolute",left:e+"px",top:i+"px",width:t(n).outerWidth()+"px"})},u=this.closeUl=function(){d.slideUp("fast",function(){a=!1}),o.removeClass("fontSelectOpen"),n.closedCallback()},h=function(){d.slideDown("fast",function(){a=!0}),o.addClass("fontSelectOpen"),n.openedCallback()};o.prepend("<span>"+e.initial.replace(/'/g,"&#039;")+"</span>");var d=this.ul=t('<ul class="fontSelectUl"></ul>').appendTo("body");d.hide(),l();for(var f=0;f<e.fonts.length;f++){var p=t("<li>"+r(e.fonts[f])+"</li>").appendTo(d);p.css("font-family",e.fonts[f]),p[0].data=e.fonts[f]}""!=e.initial&&c(e.initial,!0),d.find("li").click(function(){a&&(l(),u(),c(this.data))}),o.click(function(t){a||(t.stopPropagation(),l(),h())}),t("html").click(function(){a&&u()})},selected:function(){return this.data},select:function(t){this.find("span").html(t.substr(0,t.indexOf(",")).replace(/["']{1}/gi,"")),this.css("font-family",t)}};t.fontSelector={},t.fn.fontSelector=function(e){return i[e]?i[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!==(void 0===e?"undefined":n(e))&&e?void t.error("Method "+e+" does not exist on jQuery.fontSelector"):i.init.apply(this,arguments)}})},function(t,e,i){"use strict";if(void 0===n)var n=i(1);n.prototype.updateSelectedOption=function(t){var e=t.$item.find(":checked"),i=$(e.parents()[0]);t.$item.find(".btn-selected-option").html(i.find("label")[0].outerHTML)},n.prototype.tools.option={scope:function(t,e){var i=this;return{parentId:t.parent.id,valueCurrent:t.parent.value.get()===t.option,onchange:function(){var e=t.$item.find(":checked"),n=e.val();n==t.option&&t.parent.value.set(n),i.updateSelectedOption(t.parent)}}},template:'<div class="object-menu-item object-menu-option " title="{title}" ><input type="radio" id="tool-{id}" dp-checked="{valueCurrent}" name="{parentId}" value="{option}" onchange="onchange()"><label class="btn button-{id} {className}" for="tool-{id}"><img dp-if="icon" dp-src="icon"><span dp-include="svg" dp-if="svg"></span><span dp-if="title" class="option-title">{title}</span>'},n.prototype.tools.options={scope:function(t,e){return{position:e.options&&e.options.position,className:t.className||"items-column",buttonsTitle:e.buttons&&e.buttons.title||!1,buttonsClassName:e.buttons.className||""}},template:'<div class="object-menu-item object-menu-options {className}" title="{title}">\n      <div class="btn-selected-option"></div>\n      <div class="object-menu-options-container {position}" transclude>',post:function(t,e,i,n){this.generateMenu(e.target,n,i,e.menu),this.updateSelectedOption(e)}}},function(t,e,i){"use strict";if(void 0===n)var n=i(1);n.prototype.tools.select={scope:function(t,e){return{getInputValue:function(){return parseFloat(t.$item.find("input").val())},getValue:t.value.get,setValue:t.value.set,onchange:function(e,i){t.value.set(e.params.data.id,i)}}},template:'<div class="object-menu-item object-menu-select {itemClassName}" title="{title}" ><label for="xxx" class="btn button-{id} {className}"></label><select id="xxx">',render:function(t,e,i,n,o){var a=e.value.options(),s=e.value.get(),r=t.find("select");r.dpSelect("data",a),r.dpSelect("val",[s])},post:function(t,e,i,n,o){var a=e.value.options(),s=e.value.get(),r=t.find("select"),c=e.dropdown;r.dpSelect({width:c.width||40,minimumResultsForSearch:c.minimumResultsForSearch||1/0,dropdownParent:this.container.relativeParent(),data:a,theme:c.theme,templateSelection:function(t,i){return c.templateSelection(t,i,e)},templateResult:function(t,i){return c.templateResult(t,i,e)}}).on("select2:select",function(t){e.onchange(t,a)}),r.dpSelect("val",[s]),this.on("destroy",function(){r.dpSelect("destroy")})}}},function(t,e,i){"use strict";if(void 0===n)var n=i(1);n.prototype.colorpicker=function(t,e){t.minicolors(e)},n.prototype.tools.effect={scope:function(t,e){return{buttonsTitle:e.buttons&&e.buttons.title||!1,isParameters:!!t.actionParameters,buttonsClassName:e.buttons&&e.buttons.className||""}},template:'<div class="object-menu-item" title="{title}"><button class="btn button-{id} {className} {buttonsClassName}"><span dp-if="buttonsTitle" class="button-title">{title}</span></button><div dp-if="isParameters" class="menu-action-parameters {effectClassName}" style="display: none" transclude></div></div>',post:function(t,e,i,n){e.container&&(n=$(document.getElementById(e.container)));var o,a=function(){return e.effectTpl&&(o=$(e.effectTpl),n.html(o)),e.actionParametersId&&(o=$("#"+e.actionParametersId).clone(),n.html(o)),e.actionParameters.call(e.target,n,e,i)};this.toggleByButton(t,n,a,e)}}},function(t,e){t.exports="PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgICB4bWxuczppbmtzY2FwZT0iaHR0cDovL3d3dy5pbmtzY2FwZS5vcmcvbmFtZXNwYWNlcy9pbmtzY2FwZSIKICAgIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyIKICAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgIHhtbG5zOmNjPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9ucyMiCiAgICB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIKICAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgICB4bWxuczpuczE9Imh0dHA6Ly9zb3ppLmJhaWVyb3VnZS5mciIKICAgIGlkPSJzdmc0ODg4IgogICAgc29kaXBvZGk6ZG9jbmFtZT0id2FybmluZ19idXR0b24uc3ZnIgogICAgdmlld0JveD0iMCAwIDQwMCA0MDAiCiAgICB2ZXJzaW9uPSIxLjEiCiAgICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ4LjAgcjk2NTQiCiAgPgogIDxkZWZzCiAgICAgIGlkPSJkZWZzNDg5MCIKICAgID4KICAgIDxsaW5lYXJHcmFkaWVudAogICAgICAgIGlkPSJsaW5lYXJHcmFkaWVudDg0MTEiCiAgICAgICAgeTI9IjM2Ny44OCIKICAgICAgICBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIKICAgICAgICB5MT0iMjg3LjQ5IgogICAgICAgIHgyPSIzMTUuNDciCiAgICAgICAgeDE9IjI0MS40MSIKICAgICAgICBpbmtzY2FwZTpjb2xsZWN0PSJhbHdheXMiCiAgICAgID4KICAgICAgPHN0b3AKICAgICAgICAgIGlkPSJzdG9wNDE1OCIKICAgICAgICAgIHN0eWxlPSJzdG9wLWNvbG9yOiNmZmZmZmYiCiAgICAgICAgICBvZmZzZXQ9IjAiCiAgICAgIC8+CiAgICAgIDxzdG9wCiAgICAgICAgICBpZD0ic3RvcDQxNjAiCiAgICAgICAgICBzdHlsZT0ic3RvcC1jb2xvcjojZmZmZmZmO3N0b3Atb3BhY2l0eTowIgogICAgICAgICAgb2Zmc2V0PSIxIgogICAgICAvPgogICAgPC9saW5lYXJHcmFkaWVudAogICAgPgogICAgPGZpbHRlcgogICAgICAgIGlkPSJmaWx0ZXI2MTI2IgogICAgICAgIGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycz0ic1JHQiIKICAgICAgICBpbmtzY2FwZTpjb2xsZWN0PSJhbHdheXMiCiAgICAgID4KICAgICAgPGZlR2F1c3NpYW5CbHVyCiAgICAgICAgICBpZD0iZmVHYXVzc2lhbkJsdXI2MTI4IgogICAgICAgICAgc3RkRGV2aWF0aW9uPSIwLjUzMDM1NzEzIgogICAgICAgICAgaW5rc2NhcGU6Y29sbGVjdD0iYWx3YXlzIgogICAgICAvPgogICAgPC9maWx0ZXIKICAgID4KICAgIDxsaW5lYXJHcmFkaWVudAogICAgICAgIGlkPSJsaW5lYXJHcmFkaWVudDg0MTMiCiAgICAgICAgeTI9IjM5MS40NSIKICAgICAgICBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIKICAgICAgICB5MT0iMzAwLjg2IgogICAgICAgIHgyPSIzNDIiCiAgICAgICAgeDE9IjI3NS42MSIKICAgICAgICBpbmtzY2FwZTpjb2xsZWN0PSJhbHdheXMiCiAgICAgID4KICAgICAgPHN0b3AKICAgICAgICAgIGlkPSJzdG9wNzIwMSIKICAgICAgICAgIHN0eWxlPSJzdG9wLWNvbG9yOiM1NTAwMDAiCiAgICAgICAgICBvZmZzZXQ9IjAiCiAgICAgIC8+CiAgICAgIDxzdG9wCiAgICAgICAgICBpZD0ic3RvcDcyMDMiCiAgICAgICAgICBzdHlsZT0ic3RvcC1jb2xvcjojZmYwMDAwIgogICAgICAgICAgb2Zmc2V0PSIxIgogICAgICAvPgogICAgPC9saW5lYXJHcmFkaWVudAogICAgPgogICAgPHJhZGlhbEdyYWRpZW50CiAgICAgICAgaWQ9InJhZGlhbEdyYWRpZW50ODQxNSIKICAgICAgICBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIKICAgICAgICBjeD0iMzEyLjc4IgogICAgICAgIGN5PSIzODYuNTciCiAgICAgICAgcj0iNTMuMDM2IgogICAgICAgIGdyYWRpZW50VHJhbnNmb3JtPSJtYXRyaXgoLS41OTMyNyAtLjU5MzI3IC43MTUwNSAtLjcxNTA1IDI0My4yNyA4NDkuMDMpIgogICAgICAgIGlua3NjYXBlOmNvbGxlY3Q9ImFsd2F5cyIKICAgICAgPgogICAgICA8c3RvcAogICAgICAgICAgaWQ9InN0b3A3MTEzLTciCiAgICAgICAgICBzdHlsZT0ic3RvcC1jb2xvcjojZmZmZmZmO3N0b3Atb3BhY2l0eTouNDA4MTYiCiAgICAgICAgICBvZmZzZXQ9IjAiCiAgICAgIC8+CiAgICAgIDxzdG9wCiAgICAgICAgICBpZD0ic3RvcDcxMTUtNyIKICAgICAgICAgIHN0eWxlPSJzdG9wLWNvbG9yOiNmZmZmZmY7c3RvcC1vcGFjaXR5OjAiCiAgICAgICAgICBvZmZzZXQ9IjEiCiAgICAgIC8+CiAgICA8L3JhZGlhbEdyYWRpZW50CiAgICA+CiAgICA8bGluZWFyR3JhZGllbnQKICAgICAgICBpZD0ibGluZWFyR3JhZGllbnQxMDQ0OSIKICAgICAgICB5Mj0iMzM4LjgyIgogICAgICAgIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIgogICAgICAgIHkxPSIyODYuNjciCiAgICAgICAgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCguOTU1MzQgMCAwIC45NTUzNCAxMzYuMTIgMTQuMDU1KSIKICAgICAgICB4Mj0iMzAwLjI3IgogICAgICAgIHgxPSIyNTUuMzIiCiAgICAgICAgaW5rc2NhcGU6Y29sbGVjdD0iYWx3YXlzIgogICAgICA+CiAgICAgIDxzdG9wCiAgICAgICAgICBpZD0ic3RvcDQxNTAiCiAgICAgICAgICBzdHlsZT0ic3RvcC1jb2xvcjojZmZmZmZmIgogICAgICAgICAgb2Zmc2V0PSIwIgogICAgICAvPgogICAgICA8c3RvcAogICAgICAgICAgaWQ9InN0b3A0MTUyIgogICAgICAgICAgc3R5bGU9InN0b3AtY29sb3I6I2ZmZmZmZjtzdG9wLW9wYWNpdHk6MCIKICAgICAgICAgIG9mZnNldD0iMSIKICAgICAgLz4KICAgIDwvbGluZWFyR3JhZGllbnQKICAgID4KICAgIDxmaWx0ZXIKICAgICAgICBpZD0iZmlsdGVyMTE0MjgiCiAgICAgICAgY29sb3ItaW50ZXJwb2xhdGlvbi1maWx0ZXJzPSJzUkdCIgogICAgICAgIGlua3NjYXBlOmNvbGxlY3Q9ImFsd2F5cyIKICAgICAgPgogICAgICA8ZmVHYXVzc2lhbkJsdXIKICAgICAgICAgIGlkPSJmZUdhdXNzaWFuQmx1cjExNDMwIgogICAgICAgICAgc3RkRGV2aWF0aW9uPSIxLjI0MzQ2NzgiCiAgICAgICAgICBpbmtzY2FwZTpjb2xsZWN0PSJhbHdheXMiCiAgICAgIC8+CiAgICA8L2ZpbHRlcgogICAgPgogIDwvZGVmcwogID4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgIGlkPSJiYXNlIgogICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICAgaW5rc2NhcGU6cGFnZXNoYWRvdz0iMiIKICAgICAgaW5rc2NhcGU6d2luZG93LXk9Ii04IgogICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgIGlua3NjYXBlOndpbmRvdy1oZWlnaHQ9Ijk4OCIKICAgICAgaW5rc2NhcGU6d2luZG93LW1heGltaXplZD0iMSIKICAgICAgaW5rc2NhcGU6em9vbT0iMC43MDcxMDY3OCIKICAgICAgaW5rc2NhcGU6d2luZG93LXg9Ii04IgogICAgICBzaG93Z3JpZD0iZmFsc2UiCiAgICAgIGJvcmRlcm9wYWNpdHk9IjEuMCIKICAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgICBpbmtzY2FwZTpjeD0iMzA0Ljg5NDA5IgogICAgICBpbmtzY2FwZTpjeT0iMzQxLjUyMTg2IgogICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjE2ODAiCiAgICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwLjAiCiAgICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAvPgogIDxnCiAgICAgIGlkPSJsYXllcjEiCiAgICAgIGlua3NjYXBlOmxhYmVsPSJMYXllciAxIgogICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIC02NTIuMzYpIgogICAgPgogICAgPGcKICAgICAgICBpZD0iZzExNDMyIgogICAgICAgIGlua3NjYXBlOmV4cG9ydC15ZHBpPSI5MCIKICAgICAgICBpbmtzY2FwZTpleHBvcnQteGRwaT0iOTAiCiAgICAgICAgdHJhbnNmb3JtPSJtYXRyaXgoMi45MDUxIDAgMCAyLjkwNTEgLTEwMDEuOSAtNzguOTYxKSIKICAgICAgPgogICAgICA8cGF0aAogICAgICAgICAgaWQ9InBhdGg3Mjc2IgogICAgICAgICAgc29kaXBvZGk6cng9IjUzLjAzNTcxMyIKICAgICAgICAgIHNvZGlwb2RpOnJ5PSI1My4wMzU3MTMiCiAgICAgICAgICBzdHlsZT0iZmlsbDojOTk5OTk5IgogICAgICAgICAgc29kaXBvZGk6dHlwZT0iYXJjIgogICAgICAgICAgZD0ibTM1Ni43OSAzNDYuMTFjMCAyOS4yOTEtMjMuNzQ1IDUzLjAzNi01My4wMzYgNTMuMDM2cy01My4wMzYtMjMuNzQ1LTUzLjAzNi01My4wMzYgMjMuNzQ1LTUzLjAzNiA1My4wMzYtNTMuMDM2IDUzLjAzNiAyMy43NDUgNTMuMDM2IDUzLjAzNnoiCiAgICAgICAgICB0cmFuc2Zvcm09Im1hdHJpeCguOTczNTQgMCAwIC45NzM1NCAxMjAuMDkgLTEyLjYyOCkiCiAgICAgICAgICBzb2RpcG9kaTpjeT0iMzQ2LjExMjE4IgogICAgICAgICAgc29kaXBvZGk6Y3g9IjMwMy43NSIKICAgICAgLz4KICAgICAgPHBhdGgKICAgICAgICAgIGlkPSJwYXRoNzI3OCIKICAgICAgICAgIHNvZGlwb2RpOnJ4PSI1My4wMzU3MTMiCiAgICAgICAgICBzb2RpcG9kaTpyeT0iNTMuMDM1NzEzIgogICAgICAgICAgc3R5bGU9ImZpbGw6dXJsKCNsaW5lYXJHcmFkaWVudDg0MTEpIgogICAgICAgICAgc29kaXBvZGk6dHlwZT0iYXJjIgogICAgICAgICAgZD0ibTM1Ni43OSAzNDYuMTFjMCAyOS4yOTEtMjMuNzQ1IDUzLjAzNi01My4wMzYgNTMuMDM2cy01My4wMzYtMjMuNzQ1LTUzLjAzNi01My4wMzYgMjMuNzQ1LTUzLjAzNiA1My4wMzYtNTMuMDM2IDUzLjAzNiAyMy43NDUgNTMuMDM2IDUzLjAzNnoiCiAgICAgICAgICB0cmFuc2Zvcm09Im1hdHJpeCguOTU5NjAgMCAwIC45NTk2MCAxMjQuMzMgLTcuODAxNCkiCiAgICAgICAgICBzb2RpcG9kaTpjeT0iMzQ2LjExMjE4IgogICAgICAgICAgc29kaXBvZGk6Y3g9IjMwMy43NSIKICAgICAgLz4KICAgICAgPHBhdGgKICAgICAgICAgIGlkPSJwYXRoNzI4MCIKICAgICAgICAgIHNvZGlwb2RpOnJ4PSI1My4wMzU3MTMiCiAgICAgICAgICBzb2RpcG9kaTpyeT0iNTMuMDM1NzEzIgogICAgICAgICAgc3R5bGU9ImZpbHRlcjp1cmwoI2ZpbHRlcjYxMjYpO2ZpbGw6I2VjZWNlYyIKICAgICAgICAgIHNvZGlwb2RpOnR5cGU9ImFyYyIKICAgICAgICAgIGQ9Im0zNTYuNzkgMzQ2LjExYzAgMjkuMjkxLTIzLjc0NSA1My4wMzYtNTMuMDM2IDUzLjAzNnMtNTMuMDM2LTIzLjc0NS01My4wMzYtNTMuMDM2IDIzLjc0NS01My4wMzYgNTMuMDM2LTUzLjAzNiA1My4wMzYgMjMuNzQ1IDUzLjAzNiA1My4wMzZ6IgogICAgICAgICAgdHJhbnNmb3JtPSJtYXRyaXgoLjg3MzU1IDAgMCAuODczNTUgMTUwLjQ3IDIxLjk4MSkiCiAgICAgICAgICBzb2RpcG9kaTpjeT0iMzQ2LjExMjE4IgogICAgICAgICAgc29kaXBvZGk6Y3g9IjMwMy43NSIKICAgICAgLz4KICAgICAgPHBhdGgKICAgICAgICAgIGlkPSJwYXRoNzI4MiIKICAgICAgICAgIHNvZGlwb2RpOnJ4PSI1My4wMzU3MTMiCiAgICAgICAgICBzb2RpcG9kaTpyeT0iNTMuMDM1NzEzIgogICAgICAgICAgc3R5bGU9ImZpbHRlcjp1cmwoI2ZpbHRlcjYxMjYpO2ZpbGw6Izk5OTk5OSIKICAgICAgICAgIHNvZGlwb2RpOnR5cGU9ImFyYyIKICAgICAgICAgIGQ9Im0zNTYuNzkgMzQ2LjExYzAgMjkuMjkxLTIzLjc0NSA1My4wMzYtNTMuMDM2IDUzLjAzNnMtNTMuMDM2LTIzLjc0NS01My4wMzYtNTMuMDM2IDIzLjc0NS01My4wMzYgNTMuMDM2LTUzLjAzNiA1My4wMzYgMjMuNzQ1IDUzLjAzNiA1My4wMzZ6IgogICAgICAgICAgdHJhbnNmb3JtPSJtYXRyaXgoLjgzODM4IDAgMCAuODM4MzggMTYxLjE1IDM0LjE1MikiCiAgICAgICAgICBzb2RpcG9kaTpjeT0iMzQ2LjExMjE4IgogICAgICAgICAgc29kaXBvZGk6Y3g9IjMwMy43NSIKICAgICAgLz4KICAgICAgPHBhdGgKICAgICAgICAgIGlkPSJwYXRoNzI4NCIKICAgICAgICAgIHNvZGlwb2RpOnJ4PSI1My4wMzU3MTMiCiAgICAgICAgICBzb2RpcG9kaTpyeT0iNTMuMDM1NzEzIgogICAgICAgICAgc3R5bGU9ImZpbGw6dXJsKCNsaW5lYXJHcmFkaWVudDg0MTMpIgogICAgICAgICAgc29kaXBvZGk6dHlwZT0iYXJjIgogICAgICAgICAgZD0ibTM1Ni43OSAzNDYuMTFjMCAyOS4yOTEtMjMuNzQ1IDUzLjAzNi01My4wMzYgNTMuMDM2cy01My4wMzYtMjMuNzQ1LTUzLjAzNi01My4wMzYgMjMuNzQ1LTUzLjAzNiA1My4wMzYtNTMuMDM2IDUzLjAzNiAyMy43NDUgNTMuMDM2IDUzLjAzNnoiCiAgICAgICAgICB0cmFuc2Zvcm09Im1hdHJpeCguODA1ODcgMCAwIC44MDU4NyAxNzEuMDMgNDUuNDA1KSIKICAgICAgICAgIHNvZGlwb2RpOmN5PSIzNDYuMTEyMTgiCiAgICAgICAgICBzb2RpcG9kaTpjeD0iMzAzLjc1IgogICAgICAvPgogICAgICA8cGF0aAogICAgICAgICAgaWQ9InBhdGg3Mjg2IgogICAgICAgICAgc29kaXBvZGk6cng9IjUzLjAzNTcxMyIKICAgICAgICAgIHNvZGlwb2RpOnJ5PSI1My4wMzU3MTMiCiAgICAgICAgICBzdHlsZT0iZmlsbDp1cmwoI3JhZGlhbEdyYWRpZW50ODQxNSkiCiAgICAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICAgICBkPSJtMzU2Ljc5IDM0Ni4xMWMwIDI5LjI5MS0yMy43NDUgNTMuMDM2LTUzLjAzNiA1My4wMzZzLTUzLjAzNi0yMy43NDUtNTMuMDM2LTUzLjAzNiAyMy43NDUtNTMuMDM2IDUzLjAzNi01My4wMzYgNTMuMDM2IDIzLjc0NSA1My4wMzYgNTMuMDM2eiIKICAgICAgICAgIHRyYW5zZm9ybT0ibWF0cml4KC43NTgyNSAwIDAgLjc1ODI1IDE4Ni43NSA2My45MDYpIgogICAgICAgICAgc29kaXBvZGk6Y3k9IjM0Ni4xMTIxOCIKICAgICAgICAgIHNvZGlwb2RpOmN4PSIzMDMuNzUiCiAgICAgIC8+CiAgICAgIDxwYXRoCiAgICAgICAgICBpZD0icGF0aDcyODgiCiAgICAgICAgICBzdHlsZT0ib3BhY2l0eTouMzE3NzE7ZmlsbDp1cmwoI2xpbmVhckdyYWRpZW50MTA0NDkpIgogICAgICAgICAgaW5rc2NhcGU6Y29ubmVjdG9yLWN1cnZhdHVyZT0iMCIKICAgICAgICAgIGQ9Im00MTQuOCAyODQuMTVjLTEzLjMzMSAwLjMwMDY5LTI2LjE4NiA3LjM1OC0zMy4zMzYgMTkuNzQyLTcuNjkwMyAxMy4zMi02LjcxMzkgMjkuMjY2IDEuMTU0NSA0MS4zMzEgMC44NTMwNi0yNi41MzIgMjEuMTMyLTQ2LjUxNSA0Ni4zMjQtNDUuMDU0IDguMjU4OSAwLjQ3OTA3IDE2LjA1NCAzLjIwMDEgMjIuODU5IDcuNTkwOC0zLjI1NzgtNy40NDk4LTguODE3MS0xMy45NTMtMTYuMzk0LTE4LjMyNy02LjQ4NjctMy43NDUxLTEzLjYyNS01LjQzOTMtMjAuNjA4LTUuMjgxOHoiCiAgICAgIC8+CiAgICAgIDxwYXRoCiAgICAgICAgICBpZD0icmVjdDczNzAiCiAgICAgICAgICBkPSJtNDAyLjg4IDMwMC4wOS0xMS41ODEgMTEuNTgxIDEzLjI5NSAxMy4yOTUtMTMuMjk1IDEzLjI4MSAxMS41ODEgMTEuNTgxIDEzLjI4MS0xMy4yOTUgMTMuMjk1IDEzLjI5NSAxMS41ODEtMTEuNTgxLTEzLjI4MS0xMy4yODEgMTMuMjgxLTEzLjI5NS0xMS41ODEtMTEuNTgxLTEzLjI5NSAxMy4yODEtMTMuMjgxLTEzLjI4MXoiCiAgICAgICAgICBzdHlsZT0iZmlsdGVyOnVybCgjZmlsdGVyMTE0MjgpO2ZpbGw6IzFhMWExYSIKICAgICAgICAgIGlua3NjYXBlOmNvbm5lY3Rvci1jdXJ2YXR1cmU9IjAiCiAgICAgIC8+CiAgICAgIDxwYXRoCiAgICAgICAgICBpZD0icGF0aDEwNDU3IgogICAgICAgICAgc3R5bGU9ImZpbGw6I2ZmZmZmZiIKICAgICAgICAgIGlua3NjYXBlOmNvbm5lY3Rvci1jdXJ2YXR1cmU9IjAiCiAgICAgICAgICBkPSJtNDAzLjQ1IDMwMS4xNS0xMS4wODcgMTEuMDg3IDEyLjcyOCAxMi43MjgtMTIuNzI4IDEyLjcxNCAxMS4wODcgMTEuMDg3IDEyLjcxNC0xMi43MjggMTIuNzI4IDEyLjcyOCAxMS4wODctMTEuMDg3LTEyLjcxNC0xMi43MTQgMTIuNzE0LTEyLjcyOC0xMS4wODctMTEuMDg3LTEyLjcyOCAxMi43MTQtMTIuNzE0LTEyLjcxNHoiCiAgICAgIC8+CiAgICA8L2cKICAgID4KICA8L2cKICA+CiAgPG1ldGFkYXRhCiAgICA+CiAgICA8cmRmOlJERgogICAgICA+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgPgogICAgICAgIDxkYzpmb3JtYXQKICAgICAgICAgID5pbWFnZS9zdmcreG1sPC9kYzpmb3JtYXQKICAgICAgICA+CiAgICAgICAgPGRjOnR5cGUKICAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIKICAgICAgICAvPgogICAgICAgIDxjYzpsaWNlbnNlCiAgICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbGljZW5zZXMvcHVibGljZG9tYWluLyIKICAgICAgICAvPgogICAgICAgIDxkYzpwdWJsaXNoZXIKICAgICAgICAgID4KICAgICAgICAgIDxjYzpBZ2VudAogICAgICAgICAgICAgIHJkZjphYm91dD0iaHR0cDovL29wZW5jbGlwYXJ0Lm9yZy8iCiAgICAgICAgICAgID4KICAgICAgICAgICAgPGRjOnRpdGxlCiAgICAgICAgICAgICAgPk9wZW5jbGlwYXJ0PC9kYzp0aXRsZQogICAgICAgICAgICA+CiAgICAgICAgICA8L2NjOkFnZW50CiAgICAgICAgICA+CiAgICAgICAgPC9kYzpwdWJsaXNoZXIKICAgICAgICA+CiAgICAgICAgPGRjOnRpdGxlCiAgICAgICAgICA+ZXJyb3IgYnV0dG9uPC9kYzp0aXRsZQogICAgICAgID4KICAgICAgICA8ZGM6ZGF0ZQogICAgICAgICAgPjIwMTEtMDItMjRUMTc6NDU6NDU8L2RjOmRhdGUKICAgICAgICA+CiAgICAgICAgPGRjOmRlc2NyaXB0aW9uCiAgICAgICAgLz4KICAgICAgICA8ZGM6c291cmNlCiAgICAgICAgICA+aHR0cHM6Ly9vcGVuY2xpcGFydC5vcmcvZGV0YWlsLzEyMjQyNS9lcnJvci1idXR0b24tYnktcmljYXJkb21haWE8L2RjOnNvdXJjZQogICAgICAgID4KICAgICAgICA8ZGM6Y3JlYXRvcgogICAgICAgICAgPgogICAgICAgICAgPGNjOkFnZW50CiAgICAgICAgICAgID4KICAgICAgICAgICAgPGRjOnRpdGxlCiAgICAgICAgICAgICAgPnJpY2FyZG9tYWlhPC9kYzp0aXRsZQogICAgICAgICAgICA+CiAgICAgICAgICA8L2NjOkFnZW50CiAgICAgICAgICA+CiAgICAgICAgPC9kYzpjcmVhdG9yCiAgICAgICAgPgogICAgICAgIDxkYzpzdWJqZWN0CiAgICAgICAgICA+CiAgICAgICAgICA8cmRmOkJhZwogICAgICAgICAgICA+CiAgICAgICAgICAgIDxyZGY6bGkKICAgICAgICAgICAgICA+YnV0dG9uPC9yZGY6bGkKICAgICAgICAgICAgPgogICAgICAgICAgICA8cmRmOmxpCiAgICAgICAgICAgICAgPmNhbmNlbDwvcmRmOmxpCiAgICAgICAgICAgID4KICAgICAgICAgICAgPHJkZjpsaQogICAgICAgICAgICAgID5jaXJjbGU8L3JkZjpsaQogICAgICAgICAgICA+CiAgICAgICAgICAgIDxyZGY6bGkKICAgICAgICAgICAgICA+ZGVsZXRlPC9yZGY6bGkKICAgICAgICAgICAgPgogICAgICAgICAgICA8cmRmOmxpCiAgICAgICAgICAgICAgPnJlZDwvcmRmOmxpCiAgICAgICAgICAgID4KICAgICAgICAgICAgPHJkZjpsaQogICAgICAgICAgICAgID5yb3VuZDwvcmRmOmxpCiAgICAgICAgICAgID4KICAgICAgICAgIDwvcmRmOkJhZwogICAgICAgICAgPgogICAgICAgIDwvZGM6c3ViamVjdAogICAgICAgID4KICAgICAgPC9jYzpXb3JrCiAgICAgID4KICAgICAgPGNjOkxpY2Vuc2UKICAgICAgICAgIHJkZjphYm91dD0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbGljZW5zZXMvcHVibGljZG9tYWluLyIKICAgICAgICA+CiAgICAgICAgPGNjOnBlcm1pdHMKICAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9ucyNSZXByb2R1Y3Rpb24iCiAgICAgICAgLz4KICAgICAgICA8Y2M6cGVybWl0cwogICAgICAgICAgICByZGY6cmVzb3VyY2U9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zI0Rpc3RyaWJ1dGlvbiIKICAgICAgICAvPgogICAgICAgIDxjYzpwZXJtaXRzCiAgICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjRGVyaXZhdGl2ZVdvcmtzIgogICAgICAgIC8+CiAgICAgIDwvY2M6TGljZW5zZQogICAgICA+CiAgICA8L3JkZjpSREYKICAgID4KICA8L21ldGFkYXRhCiAgPgo8L3N2Zwo+Cg=="}]);
